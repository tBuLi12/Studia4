(this.webpackJsonpstudia4=this.webpackJsonpstudia4||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(11),i=n.n(a),u=n(8),o=n(4),s=n(2),l=n(6),d=(n(16),n(3)),j=n.n(d),f=n(5);function b(e){var t=c.a.useState(null),n=Object(o.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){return e().then(a).catch(alert)}),[e]),r}function h(){return(h=Object(f.a)(j.a.mark((function e(t,n){var r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("entered async"),e.next=3;break;case 3:return(r=new FormData).append("username",t),r.append("password",n),console.log("created logging from"),e.next=9,fetch("http://"+document.location.host+"/login",{method:"POST",body:r});case 9:if(c=e.sent,console.log(c.status),console.log(typeof c.status),401!==c.status){e.next=14;break}throw"Login failed";case 14:return e.next=16,fetch("http://"+document.location.host+"/logged").then((function(e){return e.json()})).catch(alert);case 16:return a=e.sent,e.abrupt("return",a.username);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch("http://"+document.location.host+"/classes").then((function(e){return e.json()}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(t=new URL("http://"+document.location.host+"/classes")).searchParams.append("flag","1"),console.log("schedule requested"),e.next=7,fetch(t).then((function(e){return e.json()}));case 7:return n=e.sent,console.log("Classes obtained"),console.log(n),r={},n.forEach((function(e){var t=e.name,n=e.id,c=e.roomNumber,a=e.class_type,i=e.timeSlotID;return r[n]={name:t,id:n,room:c,type:a,slot:i}})),console.log("transformed schedule:"),console.log(r),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{2:0,5:2,0:2});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(!0)}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e,t){return setTimeout((function(){return t("dupa")}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log(n),e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:0},{name:"SOI",id:2,slots:[0,2,5]},{name:"PAP",id:3},{name:"PROB",id:4}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{2:13,15:10});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",grade:3},{name:"SOI",grade:-10}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:0,cls:{name:"WSI",type:["lab","exercise","lecture"][Math.floor(3*Math.random())]},stud:"Jeremi S",to:"3"},{id:1,cls:{name:"SOI",type:["lab","exercise","lecture"][Math.floor(3*Math.random())]},stud:"Karol O",to:"25"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return B.apply(this,arguments)}function B(){return(B=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"dupa",id:0},{name:"yyyy",id:1}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return X.apply(this,arguments)}function X(){return(X=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:0,type:"Przedmiot"},{name:"SOI - lab",id:1,type:"Zajecia"},{name:"Grupa I2",id:0,type:"Grupa"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{8:!0,12:!0});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:{name:"WSI",slot:"2",room:"98",id:0,type:["lab","exercise","lecture"][Math.floor(3*Math.random())]},1:{name:"SI",slot:"2",room:"98",id:1,type:["lab","exercise","lecture"][Math.floor(3*Math.random())]},2:{name:"Wsi",slot:"2",room:"11",id:2,type:["lab","exercise","lecture"][Math.floor(3*Math.random())]},3:{name:"nji",slot:"10",room:"98",id:3,type:"lab"}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:3,22:4});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{title:"DUPA",text:"yyyyyyysapidfj aijsd 0iasj d0asdjo asj"},{title:"Hee",text:"0aijsdiwef0u82hgfy23h8irj1jkfi0owshdfsgbfhidb"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return _.apply(this,arguments)}function _(){return(_=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"Ewa S.",id:0},{name:"Peter Gawkuu",id:1}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:"Jakie\u015b info o panu pracowniku"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=n(0),$=["8:15","10:15","12:15","14:15","16:15","18:15"],ee=["poniedzialek","wtorek","sroda","czwartek","piatek"];function te(e,t){var n,r=t.action,c=t.data;switch(r){case"drag":return Object(s.a)(Object(s.a)({},e),{},{dragged:c});case"endDrag":for(var a=c.x,i=c.y,u=c.id,d=null,j=0,f=Object.entries(e.dropSlots.current);j<f.length;j++){var b=Object(o.a)(f[j],2),h=b[0];if((0,b[1])(a,i)){(d=JSON.parse(JSON.stringify(e.schedule)))[u].resched=h,d[u].slot===h&&delete d[u].resched;break}}return Object(s.a)(Object(s.a)({},e),{},{dragged:null,schedule:null!==(n=d)&&void 0!==n?n:e.schedule});case"toggleSelect":return Object(s.a)(Object(s.a)({},e),{},{selections:Object(s.a)(Object(s.a)({},e.selections),{},Object(l.a)({},c,!e.selections[c]))});case"rerate":return Object(s.a)(Object(s.a)({},e),{},{ratings:Object(s.a)(Object(s.a)({},e.ratings),{},Object(l.a)({},c.slot,c.rating))});case"setSchedule":return Object(s.a)(Object(s.a)({},e),{},{schedule:c});case"setSelections":return Object(s.a)(Object(s.a)({},e),{},{selections:c});case"setRatings":return Object(s.a)(Object(s.a)({},e),{},{ratings:c});default:return e}}function ne(e){var t=e.initSchedule,n=e.initRatings,r=e.initSelections,a=e.onSelect,i=e.mode,u=e.actions,l=e.permResched,d=c.a.useRef({}),j=c.a.useRef(),f=c.a.useReducer(te,{schedule:t,selections:r,ratings:n,dragged:null,dropSlots:d}),b=Object(o.a)(f,2),h=b[0],p=h.schedule,O=h.selections,m=h.ratings,x=h.dragged,v=b[1];c.a.useEffect((function(){return v({action:"setSchedule",data:t})}),[t]),c.a.useEffect((function(){return v({action:"setSelections",data:r})}),[r]),c.a.useEffect((function(){return v({action:"setRatings",data:n})}),[n]);var g=c.a.useMemo((function(){return function(e,t,n){if(void 0===e)return{};for(var r={},c=0,a=Object.entries(e);c<a.length;c++){var i,u,l,d,j,f=Object(o.a)(a[c],2),b=f[0],h=f[1];t?b!=n&&(null!==(i=r[null!==(u=h.resched)&&void 0!==u?u:h.slot])&&void 0!==i?i:r[null!==(l=h.resched)&&void 0!==l?l:h.slot]=[]).push(h):((null!==(d=r[h.slot])&&void 0!==d?d:r[h.slot]=[]).push(h),h.resched&&(null!==(j=r[h.resched])&&void 0!==j?j:r[h.resched]=[]).push(Object(s.a)(Object(s.a)({},h),{},{pend:!0})))}return r}(p,l,null===x||void 0===x?void 0:x.disId)}),[p,l,x]),w={mode:i,dispatch:v,dropSlots:d,onSelect:a,borderRef:j},y={reschedule:function(){return function(e,t){for(var n={},r=0,c=Object.entries(t);r<c.length;r++){var a,i,u,s=Object(o.a)(c[r],2),l=s[0],d=s[1];(null!==(a=d.resched)&&void 0!==a?a:d.slot)!==(null!==(i=e[l].resched)&&void 0!==i?i:e[l].slot)&&(n[l]=null!==(u=d.resched)&&void 0!==u?u:d.slot)}return n}(t,p)},select:function(){return function(e){for(var t=new Set,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(o.a)(r[n],2),a=c[0];c[1]&&t.add(a)}return t}(O)},rate:function(){return m}}[i];return Object(V.jsxs)("div",{id:"schedule",className:"content-box",children:["Plan zaj\u0119\u0107",Object(V.jsx)("div",{id:"scheduleborder",ref:j,children:Object(V.jsxs)("ul",{id:"daylist",children:[Object(V.jsx)("li",{children:Object(V.jsx)(re,{})}),ee.map((function(e){return Object(V.jsx)("li",{children:Object(V.jsxs)("ul",{className:"daycolumn",children:[e,$.map((function(t){var n=function(e,t){return($.indexOf(t)+6*ee.indexOf(e)).toString()}(e,t);return Object(V.jsx)(ce,Object(s.a)({slot:n,cls:g[n],selected:null===O||void 0===O?void 0:O[n],rating:null===m||void 0===m?void 0:m[n],droppable:l?"all":null===x||void 0===x?void 0:x.drops.includes(n)},w),n)}))]})},e)})),Object(V.jsx)("li",{children:Object(V.jsx)(re,{})})]})}),null===x||void 0===x?void 0:x.elem,null===u||void 0===u?void 0:u.map((function(e,t){return Object(V.jsx)(Ze,{onClick:function(){return e.cb(y())},children:e.name},t)}))]})}function re(){return Object(V.jsxs)("ul",{className:"hourlegend",children:["\xa0",[8,10,12,14,16,18].map((function(e){return Object(V.jsx)("li",{children:e.toString()+":15"},e)}))]})}function ce(e){var t=e.cls,n=e.slot,r=e.mode,a=e.dispatch,i=e.dropSlots,u=e.selected,o=e.onSelect,l=e.rating,d=e.droppable,j=e.borderRef,f=c.a.useRef(),b={mode:r,dispatch:a,rating:l,borderRef:j};c.a.useEffect((function(){if(d)return i.current[n]=function(e,t){var n=f.current.getBoundingClientRect();return t>n.top&&t<n.bottom&&e>n.left&&e<n.right},function(){return delete i.current[n]}}),[n,i,d]);var h=null;void 0!==t&&0!==t.length&&(h=1===t.length?Object(V.jsx)(ae,Object(s.a)(Object(s.a)({},b),{},{cls:t[0]})):Object(V.jsx)(ue,Object(s.a)(Object(s.a)({},b),{},{cls:t})));var p={};return"select"===r&&void 0!==u&&(p.onClick=function(){a({action:"toggleSelect",data:n}),null===o||void 0===o||o(n)}),void 0!==l&&(h=Object(V.jsxs)(V.Fragment,{children:[h,Object(V.jsx)(oe,Object(s.a)(Object(s.a)({},b),{},{slot:n}))]})),Object(V.jsx)("li",Object(s.a)(Object(s.a)({className:"class-box"+(!0===d||u?" highlight":"")},p),{},{ref:f,children:h}))}function ae(e){var t,n=null!==(t=e.width)&&void 0!==t?t:100,r=c.a.useState({prevW:100}),a=Object(o.a)(r,2),i=a[0],u=i.text,l=i.prevW,d=a[1];c.a.useLayoutEffect((function(){var t;if(t=n>=65?Object(V.jsxs)(V.Fragment,{children:[e.cls.name,Object(V.jsx)("br",{}),e.cls.type,Object(V.jsx)("br",{}),"Sala: ",e.cls.room]}):n>18?Object(V.jsx)(V.Fragment,{children:e.cls.name.split("").map((function(e){return Object(V.jsxs)(V.Fragment,{children:[e,Object(V.jsx)("br",{})]})}))}):Object(V.jsx)(V.Fragment,{children:"I"}),n>l){var r=setTimeout((function(){return d({text:t,prevW:n})}),100);return function(){return clearTimeout(r)}}d({text:t,prevW:n})}),[n]);var j={};"reschedule"===e.mode&&(j.onMouseDown=function(t){var n;t.preventDefault();var r=t.currentTarget.getBoundingClientRect(),c={x:r.x+window.scrollX-t.pageX,y:r.y+window.scrollY-t.pageY};null===(n=e.dispatch)||void 0===n||n.call(e,{action:"drag",data:{elem:Object(V.jsx)(ie,{cls:e.cls,initPos:{x:t.pageX,y:t.pageY},offset:c,dispatch:e.dispatch,borderRef:e.borderRef}),drops:e.cls.alts,disId:e.cls.id}})});var f=e.cls.pend?{opacity:.5}:{};return Object(V.jsx)("div",Object(s.a)(Object(s.a)({className:e.cls.type},j),{},{style:f,children:u}))}function ie(e){var t,n,r=e.initPos,a=e.cls,i=e.offset,u=i.x,s=i.y,l=e.dispatch,d=e.borderRef,j=c.a.useRef(),f=function(e){var t=c.a.useState(e),n=Object(o.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){function e(e){a({x:e.pageX,y:e.pageY})}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),r}(r),b=f.x,h=f.y,p=null!==(t=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0},O=p.width,m=p.height,x=d.current.getBoundingClientRect(),v=x.top,g=x.left,w=x.bottom,y=x.right,S=Math.min(Math.max(b+u,g+window.scrollX),y+window.scrollX-O),k=Math.min(Math.max(h+s,v+window.scrollY),w+window.scrollY-m);return Object(V.jsx)("div",{className:"class-box",style:{position:"absolute",left:S,top:k},ref:j,onMouseUp:function(){var e=j.current.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.left,c=e.right;l({action:"endDrag",data:{y:(t+n)/2,x:(r+c)/2,id:a.id}})},children:Object(V.jsx)(ae,{cls:a})})}function ue(e){var t=e.cls,n=e.mode,r=e.dispatch,a=e.borderRef,i=100/t.length,u=35/(t.length-1),l=c.a.useState(null),d=Object(o.a)(l,2),j=d[0],f=d[1];return Object(V.jsx)("div",{onMouseLeave:function(){return f(null)},style:{height:"100%"},children:t.map((function(e,t){var c=null===j?i:t===j?65:u,o={cls:e,width:c,mode:n,dispatch:r,borderRef:a};return Object(V.jsx)("div",{className:"shrunk-box",onMouseEnter:function(){return f(t)},style:{maxWidth:"".concat(c,"%")},children:Object(V.jsx)(ae,Object(s.a)({},o))},t)}))})}function oe(e){var t=e.dispatch,n=e.slot,r=e.rating,c=e.mode,a=r;return"rate"===c&&(a=Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze,{onClick:function(){return t({action:"rerate",data:{slot:n,rating:r-1}})},children:"-"}),a,Object(V.jsx)(Ze,{onClick:function(){return t({action:"rerate",data:{slot:n,rating:r+1}})},children:"+"})]})),Object(V.jsx)("div",{className:"rater",children:a})}function se(e){var t={};return Array.from(Array(30).keys()).forEach((function(e){t[e]=!1})),console.log(Array(10)),console.log(e),console.log(t),Object(s.a)(Object(s.a)({},t),e)}var le=function(){var e=c.a.useContext(We),t=c.a.useState(null),n=Object(o.a)(t,2),r=n[0],a=n[1],i=c.a.useState(null),u=Object(o.a)(i,2),l=u[0],d=u[1],j=c.a.useState("view"),f=Object(o.a)(j,2),b=f[0],h=f[1];if(c.a.useEffect((function(){return m(e).then(a)}),[e]),c.a.useEffect((function(){return"rate"===b&&v(e).then(d)}),[e,b]),null===r||"rate"===b&&null===l)return Object(V.jsx)("div",{children:"Loading content..."});var p=[],O={actions:p,mode:b};return"reschedule"===b?p.push({name:"Zaporoponuj zmiany",cb:function(e){a(null),w(e).then((function(){return m().then(a)}))}}):"rate"===b&&(p.push({name:"Zapisz",cb:function(e){d(null),function(e){return S.apply(this,arguments)}(e).then((function(){return v().then(d).then((function(){return h("view")}))}))}}),O.initRatings=l),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ne,Object(s.a)({initSchedule:r},O)),Object(V.jsxs)("div",{children:[Object(V.jsx)(Ze,{onClick:function(){return h("view")},children:"Plan"}),Object(V.jsx)(Ze,{onClick:function(){return h("reschedule")},children:"Zmiana Grup"}),Object(V.jsx)(Ze,{onClick:function(){return h("rate")},children:"Dogodno\u015b\u0107 Godzin"})]})]})};n(19);function de(){var e=c.a.useContext(Fe),t=c.a.useState(""),n=Object(o.a)(t,2),r=n[0],a=n[1],i=c.a.useState(""),u=Object(o.a)(i,2),s=u[0],l=u[1];return Object(V.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return h.apply(this,arguments)}(r,s).then((function(t){return e({action:"login",data:t})})).catch(alert)},children:[Object(V.jsx)("input",{type:"text",name:"name",value:r,onChange:function(e){a(e.target.value)},required:!0,placeholder:"Login"}),Object(V.jsx)("br",{}),Object(V.jsx)("input",{type:"password",name:"password",value:s,onChange:function(e){l(e.target.value)},required:!0,placeholder:"Has\u0142o"}),Object(V.jsx)("br",{}),Object(V.jsx)(Ze,{submit:!0,onClick:function(){return console.log("pressed log in")},children:"Log in"})]})}function je(){var e=c.a.useContext(Fe);return c.a.useContext(We)?Object(V.jsx)("span",{style:{float:"right"},onClick:function(){e({action:"logout"})},children:"Log out"}):Object(V.jsx)("span",{style:{float:"right"},onClick:function(){e({action:"setContent",data:Object(V.jsx)(de,{})})},children:"Log in"})}n(20);function fe(e){var t=e.children,n=e.view,r=e.nNots,a=c.a.useContext(Fe);return Object(V.jsxs)("span",{onClick:function(){return a({action:"setContent",data:n})},children:[t,r&&Object(V.jsx)("div",{className:"notifIndicator",children:r})]})}function be(e){var t=e.toggle;return Object(V.jsx)("span",{onClick:t,children:"O"})}function he(e){var t=e.links,n=e.windWidth,r=c.a.useState(!1),a=Object(o.a)(r,2),i=a[0],u=a[1],s=c.a.useContext(We),l=Object(V.jsx)("div",{children:"You must be logged in to view this content"});return n<500?Object(V.jsxs)("nav",{children:[Object(V.jsx)("div",{style:{display:i?"block":"none"},children:t.map((function(e,t){return Object(V.jsx)(fe,{view:s?e.view:l,stack:!0,nNots:e.nNots,children:e.name},t)}))}),Object(V.jsx)(be,{toggle:function(){u((function(e){return!e}))}}),Object(V.jsx)(je,{})]}):Object(V.jsxs)("nav",{children:[Object(V.jsx)(je,{}),t.map((function(e,t){return Object(V.jsx)(fe,{view:s?e.view:l,stack:!1,nNots:e.nNots,children:e.name},t)}))]})}n(21);function pe(e){return"blablabla info o ".concat(e)}function Oe(e){var t=c.a.useState(""),n=Object(o.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(pe(e.name))}),[e.name]),Object(V.jsxs)("div",{children:[Object(V.jsx)("h2",{children:e.name}),r]})}function me(e){var t=c.a.useState(""),n=Object(o.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(pe(e.name))}),[e.name]),Object(V.jsx)("div",{children:r})}function xe(e){var t=c.a.useState(!1),n=Object(o.a)(t,2),r=n[0],a=n[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"course",onClick:function(){a((function(e){return!e}))},children:e.name}),Object(V.jsxs)("div",{className:"course-menu",style:{maxHeight:r?"3em":"0px"},children:[Object(V.jsx)(fe,{view:Object(V.jsx)(Oe,{name:e.name}),children:"Strona przedmiotu"}),Object(V.jsx)(fe,{view:Object(V.jsx)(me,{name:e.maitainerName}),children:"Strona prowadz\u0105cego"})]})]})}var ve=function(){var e=b(p);return null===e?Object(V.jsx)("div",{children:"Loading content..."}):Object(V.jsxs)("div",{id:"courses",className:"content-box",children:["Moje Przedmioty",e.map((function(e){return Object(V.jsx)(xe,{name:e.name},e.id)}))]})};n(22),n(23);function ge(){var e=b(F);return null===e?Object(V.jsx)("div",{children:"Loading grades..."}):Object(V.jsxs)("div",{className:"content-box",children:["Moje oceny",e.map((function(e){return Object(V.jsxs)("div",{className:"box-row",children:[e.name,":",Object(V.jsx)("span",{className:"grade",children:e.grade})]})}))]})}n(24);function we(){var e=b(D),t=c.a.useState([]),n=Object(o.a)(t,2),r=n[0],a=n[1];if(c.a.useEffect((function(){return a(e)}),[e]),null===r)return Object(V.jsx)("div",{children:"Loading requests..."});function i(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}return Object(V.jsxs)("div",{className:"content-box",children:["Pro\u015bby o zmiany grup",r.map((function(e){return Object(V.jsx)(ye,Object(s.a)(Object(s.a)({},e),{},{del:i}),e.id)}))]})}function ye(e){var t=e.id,n=e.stud,r=e.cls,a=e.to,i=e.del,u=c.a.useState(!1),s=Object(o.a)(u,2),l=s[0],d=s[1];return Object(V.jsxs)("div",{className:"box-row",children:[r.name," ",r.type,", ",n,", na ",a,Object(V.jsx)("span",{className:"resched-buttons",children:l?"przetwarzanie...":Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze,{onClick:function(){d(!0),function(e){return k.apply(this,arguments)}(t).then((function(){return i(t)})).catch((function(){return d(!1)}))},children:"Zaakceptuj"}),Object(V.jsx)(Ze,{onClick:function(){d(!0),function(e){return C.apply(this,arguments)}(t).then((function(){return i(t)})).catch((function(){return d(!1)}))},children:"Odrzu\u0107"})]})})]})}n(25);function Se(){var e=b(P),t=b(p),n=b(m),r=b(v),a=Xe(),i=Object(o.a)(a,2),u=i[0],l=i[1],d=c.a.useState(null),j=Object(o.a)(d,2),f=j[0],h=j[1],O=c.a.useMemo((function(){return function(e){if(null===e)return null;var t=new Set;return e.forEach((function(e){return t.add(e.id)})),t}(t)}),[t]);if(null===e||null===O||null===r)return Object(V.jsx)("div",{children:"Loading subjects..."});var x={show:l,schedule:n,ratings:r},g=null!==f&&void 0!==f?f:e;return Object(V.jsxs)("div",{className:"content-box",children:[Object(V.jsx)(Be,{onSearch:function(t){return h(e.filter((function(e){return e.name.includes(t)})))}}),null!==f&&Object(V.jsx)(Ze,{onClick:function(){return h(null)},children:"Wyczy\u015b\u0107"}),g.map((function(e){return Object(V.jsx)(ke,Object(s.a)({sbj:e,alReg:O.has(e.id)},x))})),u]})}function ke(e){var t,n=e.sbj,r=e.ratings,a=e.alReg,i=e.show,u=e.schedule,o=c.a.useMemo((function(){if(void 0!==n.slots){var e={};return n.slots.forEach((function(t){return e[t]=!0})),e}}),[n]);return Object(V.jsxs)("div",{className:"box-row",children:[n.name,Object(V.jsx)("span",{className:"resched-buttons",children:a?"Zarejestrowano":Object(V.jsxs)(V.Fragment,{children:[o&&Object(V.jsx)("div",{className:"indicator",style:{backgroundColor:(t=Ce(n.slots,r),"rgb(".concat(Math.floor(Math.min(255,512*(1-t))),", ").concat(Math.floor(Math.min(255,512*t)),", 0)"))}}),Object(V.jsx)(Ze,{onClick:function(){o?i((function(e){return Object(V.jsx)(ne,{initSchedule:u,initSelections:o,mode:"select",onSelect:e})})).then((function(e){return function(e,t){return z.apply(this,arguments)}(n.id,e)}),Ye):function(e){R.apply(this,arguments)}(n.id)},children:"Zarejestruj"})]})})]})}function Ce(e,t){var n=e.map((function(e){return t[e]})).filter((function(e){return void 0!==e})).sort().reverse();return Ne(.8,1,n.length).map((function(e,t){return e*n[t]})).reduce((function(e,t){return e+t}))/6}function Ne(e,t,n){return 0===n?[]:[t*e].concat(Object(u.a)(Ne(e,t*(1-e),n-1)))}function Me(){var e=void 0===c.a.useContext(We),t=b(Z),n=Xe(),r=Object(o.a)(n,2),a=r[0],i=r[1];if(null===t)return Object(V.jsx)("div",{children:"Loading polls..."});function u(e){(function(e){return L.apply(this,arguments)})(e).then((function(e){var t=Object.entries(e).reduce((function(e,t){return e[1]>t[1]?e:t}))[0];i((function(){return Object(V.jsx)(ne,{initRatings:e,initSelections:Object(l.a)({},t,!0),mode:"view"})})).catch(Ye)}))}function d(e){(function(e){return J.apply(this,arguments)})(e).then((function(e){return i((function(t){return Object(V.jsx)(ne,{initRatings:e,mode:"rate",actions:[{name:"G\u0142osuj",cb:t}]})}))})).then((function(t){return function(e,t){return W.apply(this,arguments)}(e,t)}),Ye)}return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"content-box",children:["Ankiety",t.map((function(t){return Object(V.jsx)(Re,Object(s.a)(Object(s.a)({},t),{},{resolve:u,vote:e?d:null}),t.id)}))]}),e||Object(V.jsx)("div",{children:Object(V.jsx)(Ze,{onClick:function(){i((function(e){return Object(V.jsx)(Ge,{onSelect:e})})).then((function(e){return function(e){return G.apply(this,arguments)}(e)})).then((function(e){return i((function(t){return Object(V.jsx)(ze,{onSelect:t,initSlots:e})}))})).then((function(e){return function(e,t){return M.apply(this,arguments)}(e.name,e.slots)})).catch(Ye)},children:"Dodaj"})}),a]})}function Re(e){var t=e.id,n=e.name,r=e.voted,c=e.resolve,a=e.vote;return Object(V.jsxs)("div",{className:"box-row",children:[n,Object(V.jsx)("span",{className:"resched-buttons",children:a?Object(V.jsxs)(V.Fragment,{children:[r&&"Zag\u0142osowano",Object(V.jsx)(Ze,{onClick:function(){return a(t)},children:"G\u0142osuj"})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ze,{onClick:function(){return c(t)},children:"Wynik"}),Object(V.jsx)(Ze,{onClick:function(){return function(e){return N.apply(this,arguments)}(t)},children:"Zako\u0144cz"})]})})]})}function ze(e){var t=e.onSelect,n=e.initSlots,r=c.a.useState(""),a=Object(o.a)(r,2),i=a[0],u=a[1];return Object(V.jsxs)("form",{className:"search-bar",children:[Object(V.jsx)("div",{children:Object(V.jsx)("input",{type:"text",value:i,onChange:function(e){return u(e.target.value)},required:!0,placeholder:"Wpisz nazw\u0119"})}),Object(V.jsx)(ne,{initSelections:se(n),mode:"select",actions:[{name:"Utw\xf3rz",cb:function(e){return t({name:i,slots:e})}}]})]})}n(26);function Pe(){var e=b(U);return null===e?Object(V.jsx)("div",{children:"Loading news..."}):Object(V.jsxs)("div",{className:"content-box",id:"news-box",children:["Aktualno\u015bci",e.map((function(e){return Object(V.jsxs)("div",{className:"box-row",children:[Object(V.jsx)("h3",{children:e.title}),Object(V.jsx)("div",{className:"info-box",children:e.text})]})}))]})}function Ee(){var e,t=b(K),n=c.a.useMemo((function(){return null===t||void 0===t?void 0:t.map((function(e){return e.name}))}),[t]),r=c.a.useState(null),a=Object(o.a)(r,2),i=a[0],u=a[1],s=c.a.useState(null),l=Object(o.a)(s,2),d=l[0],j=l[1];return null===t?Object(V.jsx)("div",{children:"Loading workers..."}):Object(V.jsxs)("div",{className:"content-box",children:["Pracownicy",Object(V.jsx)(Be,{onSearch:function(e){j(null),u(t.filter((function(t){return t.name.includes(e)})))},suggestions:n}),null!==(e=null===d||void 0===d?void 0:d.text)&&void 0!==e?e:null===i||void 0===i?void 0:i.map((function(e){return Object(V.jsxs)("div",{className:"content-row",children:[e.name,Object(V.jsx)(Ze,{onClick:function(){(function(e){return Q.apply(this,arguments)})(e.id).then(j)},children:"Wybierz"})]},e.id)}))]})}function Le(){var e=c.a.useState(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=c.a.useState(null),i=Object(o.a)(a,2),u=i[0],s=i[1];return c.a.useEffect((function(){return null===u||Y(u).then(r)}),[u]),Object(V.jsxs)("div",{className:"content-box",children:[Object(V.jsx)(Ge,{onSelect:s}),n&&Object(V.jsx)(ne,{initSchedule:n,permResched:!0,mode:"reschedule",actions:[{name:"Zmie\u0144",cb:function(e){r(null),w(e).then((function(){return Y(u).then(r)}))}}]})]})}var We=c.a.createContext(),Fe=c.a.createContext();function Ie(e,t){var n=t.action,r=t.data;switch(n){case"resize":return Object(s.a)(Object(s.a)({},e),{},{width:window.innerWidth});case"login":return Object(s.a)(Object(s.a)({},e),{},{user:r,content:Object(V.jsx)(ve,{})});case"logout":return Object(s.a)(Object(s.a)({},e),{},{user:null,content:Object(V.jsx)(de,{})});case"setContent":return Object(s.a)(Object(s.a)({},e),{},{content:r})}}function De(){var e=c.a.useReducer(Ie,{content:Object(V.jsx)(de,{}),user:null,width:window.innerWidth}),t=Object(o.a)(e,2),n=t[0],r=n.content,a=n.user,i=n.width,u=t[1];return c.a.useEffect((function(){var e=function(){return u({action:"resize"})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(V.jsx)(Fe.Provider,{value:u,children:Object(V.jsxs)(We.Provider,{value:a,children:[Object(V.jsx)(he,{links:[{name:"Przedmioty",view:Object(V.jsx)(ve,{})},{name:"Plan zaj\u0119\u0107",view:Object(V.jsx)(le,{})},{name:"Oceny",view:Object(V.jsx)(ge,{})},{name:"Zmiany grup",view:Object(V.jsx)(we,{}),nNots:a?3:void 0},{name:"Rejestracja",view:Object(V.jsx)(Se,{})},{name:"Ankiety",view:Object(V.jsx)(Me,{}),nNots:a?10:void 0},{name:"Aktualno\u015bci",view:Object(V.jsx)(Pe,{})},{name:"Pracownicy",view:Object(V.jsx)(Ee,{})},{name:"Plan",view:Object(V.jsx)(Le,{})}],windWidth:i}),Object(V.jsx)(Ae,{children:r}),Object(V.jsx)(Te,{})]})})}function Ae(e){var t=e.children;return Object(V.jsx)("div",{id:"content",children:Object(V.jsx)("div",{children:t})})}function Ze(e){var t=e.onClick,n=e.children,r=e.submit,a=e.style,i=c.a.useState(!1),u=Object(o.a)(i,2),s=u[0],l=u[1];return Object(V.jsxs)("button",{className:"button"+(s?" button-clicked":""),onClick:t,onMouseDown:function(){return l(!0)},onMouseUp:function(){return l(!1)},onMouseLeave:function(){return l(!1)},type:r?"submit":"",style:a,children:[Object(V.jsx)("div",{className:"bdummy",children:n}),Object(V.jsx)("div",{className:"btext"+(s?" btext-clicked":""),children:n})]})}function Be(e){var t=e.onSearch,n=e.suggestions,r=c.a.useState(""),a=Object(o.a)(r,2),i=a[0],u=a[1],s=c.a.useState(!1),l=Object(o.a)(s,2),d=l[0],j=l[1],f=c.a.useState(null),b=Object(o.a)(f,2),h=b[0],p=b[1],O=c.a.useState(!0),m=Object(o.a)(O,2),x=m[0],v=m[1],g=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.includes(i)}))}),[n,i]);return Object(V.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i)},autoComplete:"off",children:[Object(V.jsxs)("div",{className:"search-bar",children:[Object(V.jsx)("input",{type:"text",name:"name",value:i,onChange:function(e){p(null),u(e.target.value),v(!0)},onFocus:function(){return j(!0)},onBlur:function(){return j(!1)},onKeyDown:function(e){switch(e.key){case"ArrowDown":p((function(e){return Math.min((null!==e&&void 0!==e?e:-1)+1,g.length-1)}));break;case"ArrowUp":p((function(e){return null===e||0===e?null:e-1}));break;case"Enter":null!==h&&(e.preventDefault(),u(g[h]),p(null),v(!1))}},required:!0,placeholder:"Szukaj po nazwie"}),d&&g&&x&&Object(V.jsx)("div",{className:"suggestions",children:g.map((function(e,t){return Object(V.jsx)("div",{className:"suggestion"+(t===h?" focused-sugg":""),onMouseDown:function(){u(e),p(null),v(!1)},children:e},t)}))})]}),Object(V.jsx)(Ze,{submit:!0,children:"Szukaj"})]})}function Te(){return Object(V.jsx)("div",{id:"footer",children:"Studia 4 PAP-Z223"})}function Xe(){var e=c.a.useState(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return[n,function(e){return new Promise((function(t,n){r(Object(V.jsxs)("div",{className:"pop-up",children:[Object(V.jsx)(Ze,{onClick:function(){r(null),n("popup closed")},children:"X"}),e((function(e){r(null),t(e)}))]}))}))}]}function Ge(e){var t=e.onSelect,n=b(T),r=c.a.useState([]),a=Object(o.a)(r,2),i=a[0],s=a[1],l=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.map((function(e){return e.name}))}),[n]);return null===n?Object(V.jsx)("div",{children:"Loading..."}):Object(V.jsxs)("div",{children:[Object(V.jsx)(Be,{onSearch:function(e){var t=[];n.forEach((function(n){n.name.includes(e)&&(i.includes(n)||t.push(n))})),s((function(e){return[].concat(Object(u.a)(e),t)}))},suggestions:l}),i.map((function(e){return Object(V.jsxs)("div",{children:[e.name,Object(V.jsx)(Ze,{onClick:function(){s((function(t){var n=Object(u.a)(t);return n.splice(t.indexOf(e),1),n}))},children:"X"})]},e.id+e.type)})),Object(V.jsx)(Ze,{onClick:function(){return 0===i.length||t(i)},children:"Wybierz"})]})}function Ye(e){if("popup closed"!==e)throw e}var qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(De,{})}),document.getElementById("root")),qe()}],[[27,1,2]]]);
//# sourceMappingURL=main.89454214.chunk.js.map