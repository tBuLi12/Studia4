(this.webpackJsonpstudia4=this.webpackJsonpstudia4||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(11),i=n.n(a),o=n(8),u=n(4),s=n(2),l=n(6),d=(n(16),n(3)),j=n.n(d),f=n(5);function b(e){var t=c.a.useState(null),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){return e().then(a).catch(alert)}),[e]),r}function h(){return(h=Object(f.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(r=new FormData).append("username",t),r.append("password",n),e.next=7,fetch("http://"+document.location.host+"/login",{method:"POST",body:r});case 7:if(404!==e.sent.status){e.next=10;break}throw"Login failed";case 10:return e.next=12,fetch("http://"+document.location.host+"/logged").then((function(e){return e.json()})).catch(alert);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch("http://"+document.location.host+"/classes").then((function(e){return e.json()}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return x.apply(this,arguments)}function x(){return(x=Object(f.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(t=new URL("http://"+document.location.host+"/classes")).searchParams.append("flag","1"),console.log("schedule requested"),e.next=7,fetch(t).then((function(e){return e.json()}));case 7:return n=e.sent,console.log("Classes obtained"),console.log(n),r={},n.forEach((function(e){var t=e.name,n=e.id,c=e.roomNumber,a=e.class_type,i=e.timeSlotID;return r[n]={name:t,id:n,room:c,type:a,slot:i}})),console.log("transformed schedule:"),console.log(r),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{2:0,26:2,1:2});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(!0)}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e,t){return setTimeout((function(){return t("dht")}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(f.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("pollID",t),e.next=6,fetch("http://"+document.location.host+"/delete-poll",{method:"POST",body:n});case 6:return r=e.sent,console.log(r.status),e.abrupt("return",r.status);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(f.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(r=new FormData).append("name",t),r.append("slots",Array.from(n)),e.next=7,fetch("http://"+document.location.host+"/add-poll",{method:"POST",body:r});case 7:return c=e.sent,console.log(c.status),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:0},{name:"SOI",id:2,slots:[1,2,5]},{name:"PAP",id:3},{name:"PROB",id:4}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new URL("http://"+document.location.host+"/poll-result")).searchParams.append("pollID",t),e.next=6,fetch(n);case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,a={},c.forEach((function(e){return a[e.slotId]=e.rating})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(f.a)(j.a.mark((function e(t,n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(r=new FormData).append("pollId",t),r.append("slotIds",Object.keys(n)),r.append("ratings",Object.values(n)),e.next=8,fetch("http://"+document.location.host+"/vote-poll",{method:"POST",body:r});case 8:return c=e.sent,console.log(c.status),e.abrupt("return",c.status);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",grade:3},{name:"SOI",grade:-10}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return T.apply(this,arguments)}function T(){return(T=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:0,cls:{name:"WSI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Jeremi S",to:"3"},{id:1,cls:{name:"SOI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Karol O",to:"25"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch("http://"+document.location.host+"/polls");case 4:return t=e.sent,e.next=7,t.json();case 7:return n=e.sent,console.log(n),e.abrupt("return",n.map((function(e){return{name:e.pollName,id:e.pollID}})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return X.apply(this,arguments)}function X(){return(X=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:0,type:"Przedmiot"},{name:"SOI - lab",id:1,type:"Zajecia"},{name:"Grupa I2",id:0,type:"Grupa"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{8:!0,12:!0});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:{name:"WSI",slot:"2",room:"98",id:0,type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},1:{name:"SI",slot:"2",room:"98",id:1,type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},2:{name:"Wsi",slot:"2",room:"11",id:2,type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},3:{name:"nji",slot:"10",room:"98",id:3,type:"Laboratorium"}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:3,22:4});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{title:"Som news",text:"yyyyyyysapidfj aijsd 0iasj d0asdjo asj"},{title:"Hee",text:"0aijsdiwef0u82hgfy23h8irj1jkfi0owshdfsgbfhidb"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return _.apply(this,arguments)}function _(){return(_=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"Ewa S.",id:0},{name:"Peter Gawkuu",id:1}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:"Jakie\u015b info o panu pracowniku"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(18);var V=n(0);function $(){var e=b(L),t=b(p),n=b(m),r=b(v),a=Ge(),i=Object(u.a)(a,2),o=i[0],l=i[1],d=c.a.useState(null),j=Object(u.a)(d,2),f=j[0],h=j[1],O=c.a.useMemo((function(){return function(e){if(null===e)return null;var t=new Set;return e.forEach((function(e){return t.add(e.id)})),t}(t)}),[t]);if(null===e||null===O||null===r)return Object(V.jsx)("div",{children:"Loading subjects..."});var x={show:l,schedule:n,ratings:r},g=null!==f&&void 0!==f?f:e;return Object(V.jsxs)("div",{className:"content-box",children:[Object(V.jsx)(Be,{onSearch:function(t){return h(e.filter((function(e){return e.name.includes(t)})))}}),null!==f&&Object(V.jsx)(Ae,{onClick:function(){return h(null)},children:"Wyczy\u015b\u0107"}),g.map((function(e){return Object(V.jsx)(ee,Object(s.a)({sbj:e,alReg:O.has(e.id)},x))})),o]})}function ee(e){var t=e.sbj,n=e.ratings,r=e.alReg,a=e.show,i=e.schedule,o=c.a.useMemo((function(){if(void 0!==t.slots){var e={};return t.slots.forEach((function(t){return e[t]=!0})),e}}),[t]);return Object(V.jsxs)("div",{className:"box-row",children:[t.name,Object(V.jsx)("span",{className:"resched-buttons",children:r?"Zarejestrowano":Object(V.jsxs)(V.Fragment,{children:[o&&Object(V.jsx)("div",{className:"indicator",style:{backgroundColor:re(te(t.slots,n))}}),Object(V.jsx)(Ae,{onClick:function(){o?a((function(e){return Object(V.jsx)(oe,{initSchedule:i,initSelections:o,mode:"select",onSelect:e})})).then((function(e){return function(e,t){return z.apply(this,arguments)}(t.id,e)}),Ye):function(e){R.apply(this,arguments)}(t.id)},children:"Zarejestruj"})]})})]})}function te(e,t){var n=e.map((function(e){return t[e]})).filter((function(e){return void 0!==e})).sort().reverse();return ne(.8,1,n.length).map((function(e,t){return e*n[t]})).reduce((function(e,t){return e+t}))/6}function ne(e,t,n){return 0===n?[]:[t*e].concat(Object(o.a)(ne(e,t*(1-e),n-1)))}function re(e){return"rgb(".concat(Math.floor(Math.min(255,512*(1-e))),", ").concat(Math.floor(Math.min(255,512*e)),", 0)")}var ce=["8:15","10:15","12:15","14:15","16:15","18:15"],ae=["poniedzialek","wtorek","sroda","czwartek","piatek"];function ie(e,t){var n,r=t.action,c=t.data;switch(r){case"drag":return Object(s.a)(Object(s.a)({},e),{},{dragged:c});case"endDrag":for(var a=c.x,i=c.y,o=c.id,d=null,j=0,f=Object.entries(e.dropSlots.current);j<f.length;j++){var b=Object(u.a)(f[j],2),h=b[0];if((0,b[1])(a,i)){(d=JSON.parse(JSON.stringify(e.schedule)))[o].resched=h,d[o].slot===h&&delete d[o].resched;break}}return Object(s.a)(Object(s.a)({},e),{},{dragged:null,schedule:null!==(n=d)&&void 0!==n?n:e.schedule});case"toggleSelect":return Object(s.a)(Object(s.a)({},e),{},{selections:Object(s.a)(Object(s.a)({},e.selections),{},Object(l.a)({},c,!e.selections[c]))});case"rerate":return Object(s.a)(Object(s.a)({},e),{},{ratings:Object(s.a)(Object(s.a)({},e.ratings),{},Object(l.a)({},c.slot,c.rating))});case"setSchedule":return Object(s.a)(Object(s.a)({},e),{},{schedule:c});case"setSelections":return Object(s.a)(Object(s.a)({},e),{},{selections:c});case"setRatings":return Object(s.a)(Object(s.a)({},e),{},{ratings:c});default:return e}}function oe(e){var t=e.initSchedule,n=e.initRatings,r=e.initSelections,a=e.onSelect,i=e.mode,o=e.actions,l=e.permResched,d=e.setDataPusher,j=c.a.useRef({}),f=c.a.useCallback((function(e,t,n){return n?delete j.current[e]:j.current[e]=t}),[]),b=c.a.useRef(),h=c.a.useReducer(ie,{schedule:t,selections:r,ratings:n,dragged:null,dropSlots:j}),p=Object(u.a)(h,2),O=p[0],m=O.schedule,x=O.selections,v=O.ratings,g=O.dragged,w=p[1];c.a.useEffect((function(){return w({action:"setSchedule",data:t})}),[t]),c.a.useEffect((function(){return w({action:"setSelections",data:r})}),[r]),c.a.useEffect((function(){return w({action:"setRatings",data:n})}),[n]);var y=c.a.useMemo((function(){return function(e,t,n){if(void 0===e)return{};for(var r={},c=0,a=Object.entries(e);c<a.length;c++){var i,o,l,d,j,f=Object(u.a)(a[c],2),b=f[0],h=f[1];t?b!=n&&(null!==(i=r[null!==(o=h.resched)&&void 0!==o?o:h.slot])&&void 0!==i?i:r[null!==(l=h.resched)&&void 0!==l?l:h.slot]=[]).push(h):((null!==(d=r[h.slot])&&void 0!==d?d:r[h.slot]=[]).push(h),h.resched&&(null!==(j=r[h.resched])&&void 0!==j?j:r[h.resched]=[]).push(Object(s.a)(Object(s.a)({},h),{},{pend:!0})))}return r}(m,l,null===g||void 0===g?void 0:g.disId)}),[m,l,g]),k={mode:i,dispatch:w,registerDropSlot:f,onSelect:a,borderRef:b},S={reschedule:function(){return function(e,t){for(var n={},r=0,c=Object.entries(t);r<c.length;r++){var a,i,o,s=Object(u.a)(c[r],2),l=s[0],d=s[1];(null!==(a=d.resched)&&void 0!==a?a:d.slot)!==(null!==(i=e[l].resched)&&void 0!==i?i:e[l].slot)&&(n[l]=null!==(o=d.resched)&&void 0!==o?o:d.slot)}return n}(t,m)},select:function(){return function(e){for(var t=new Set,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(u.a)(r[n],2),a=c[0];c[1]&&t.add(a)}return t}(x)},rate:function(){return v}}[i];return c.a.useEffect((function(){return null===d||void 0===d?void 0:d(S)})),Object(V.jsxs)("div",{id:"schedule",className:"content-box",children:["Plan zaj\u0119\u0107",Object(V.jsx)("div",{id:"scheduleborder",ref:b,children:Object(V.jsxs)("ul",{id:"daylist",children:[Object(V.jsx)("li",{children:Object(V.jsx)(ue,{})}),ae.map((function(e){return Object(V.jsx)("li",{children:Object(V.jsxs)("ul",{className:"daycolumn",children:[e,ce.map((function(t){var n=function(e,t){return(1+ce.indexOf(t)+6*ae.indexOf(e)).toString()}(e,t);return Object(V.jsx)(se,Object(s.a)({slot:n,cls:y[n],selected:null===x||void 0===x?void 0:x[n],rating:null===v||void 0===v?void 0:v[n],droppable:l?"all":null===g||void 0===g?void 0:g.drops.includes(n)},k),n)}))]})},e)})),Object(V.jsx)("li",{children:Object(V.jsx)(ue,{})})]})}),null===g||void 0===g?void 0:g.elem,null===o||void 0===o?void 0:o.map((function(e,t){return Object(V.jsx)(Ae,{onClick:function(){return e.cb(S())},children:e.name},t)}))]})}function ue(){return Object(V.jsxs)("ul",{className:"hourlegend",children:["\xa0",[8,10,12,14,16,18].map((function(e){return Object(V.jsx)("li",{children:e.toString()+":15"},e)}))]})}function se(e){var t=e.cls,n=e.slot,r=e.mode,a=e.dispatch,i=e.registerDropSlot,o=e.selected,u=e.onSelect,l=e.rating,d=e.droppable,j=e.borderRef,f=c.a.useRef(),b={mode:r,dispatch:a,rating:l,borderRef:j};c.a.useEffect((function(){if(d)return i(n,(function(e,t){var n=f.current.getBoundingClientRect();return t>n.top&&t<n.bottom&&e>n.left&&e<n.right}),!1),function(){return i(n,null,!0)}}),[n,i,d]);var h=null;void 0!==l?h=Object(V.jsx)(fe,Object(s.a)(Object(s.a)({},b),{},{slot:n,cls:t})):void 0!==t&&0!==t.length&&(h=1===t.length?Object(V.jsx)(le,Object(s.a)(Object(s.a)({},b),{},{cls:t[0]})):Object(V.jsx)(je,Object(s.a)(Object(s.a)({},b),{},{cls:t})));var p={};return"select"===r&&void 0!==o&&(p.onClick=function(){a({action:"toggleSelect",data:n}),null===u||void 0===u||u(n)}),Object(V.jsx)("li",Object(s.a)(Object(s.a)({className:"class-box"+(!0===d||o?" highlight":"")},p),{},{ref:f,children:h}))}function le(e){var t,n=null!==(t=e.width)&&void 0!==t?t:100,r=c.a.useState({prevW:100}),a=Object(u.a)(r,2),i=a[0],o=i.text,l=i.prevW,d=a[1];c.a.useLayoutEffect((function(){var t;if(t=n>=65?Object(V.jsxs)(V.Fragment,{children:[e.cls.name,Object(V.jsx)("br",{}),e.cls.type,Object(V.jsx)("br",{}),"Sala: ",e.cls.room]}):n>18?Object(V.jsx)(V.Fragment,{children:e.cls.name.split("").map((function(e){return Object(V.jsxs)(V.Fragment,{children:[e,Object(V.jsx)("br",{})]})}))}):Object(V.jsx)(V.Fragment,{children:"I"}),n>l){var r=setTimeout((function(){return d({text:t,prevW:n})}),100);return function(){return clearTimeout(r)}}d({text:t,prevW:n})}),[n]);var j={};"reschedule"===e.mode&&(j.onMouseDown=function(t){var n;t.preventDefault();var r=t.currentTarget.getBoundingClientRect(),c={x:r.x+window.scrollX-t.pageX,y:r.y+window.scrollY-t.pageY};null===(n=e.dispatch)||void 0===n||n.call(e,{action:"drag",data:{elem:Object(V.jsx)(de,{cls:e.cls,initPos:{x:t.pageX,y:t.pageY},offset:c,dispatch:e.dispatch,borderRef:e.borderRef}),drops:e.cls.alts,disId:e.cls.id}})});var f=e.cls.pend?{opacity:.5}:{};return Object(V.jsx)("div",Object(s.a)(Object(s.a)({className:e.cls.type},j),{},{style:f,children:o}))}function de(e){var t,n,r=e.initPos,a=e.cls,i=e.offset,o=i.x,s=i.y,l=e.dispatch,d=e.borderRef,j=c.a.useRef(),f=function(e){var t=c.a.useState(e),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){function e(e){a({x:e.pageX,y:e.pageY})}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),r}(r),b=f.x,h=f.y,p=null!==(t=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0},O=p.width,m=p.height,x=d.current.getBoundingClientRect(),v=x.top,g=x.left,w=x.bottom,y=x.right,k=Math.min(Math.max(b+o,g+window.scrollX),y+window.scrollX-O),S=Math.min(Math.max(h+s,v+window.scrollY),w+window.scrollY-m);return Object(V.jsx)("div",{className:"class-box",style:{position:"absolute",left:k,top:S},ref:j,onMouseUp:function(){var e=j.current.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.left,c=e.right;l({action:"endDrag",data:{y:(t+n)/2,x:(r+c)/2,id:a.id}})},children:Object(V.jsx)(le,{cls:a})})}function je(e){var t=e.cls,n=e.mode,r=e.dispatch,a=e.borderRef,i=100/t.length,o=35/(t.length-1),l=c.a.useState(null),d=Object(u.a)(l,2),j=d[0],f=d[1];return Object(V.jsx)("div",{onMouseLeave:function(){return f(null)},style:{height:"100%"},children:t.map((function(e,t){var c=null===j?i:t===j?65:o,u={cls:e,width:c,mode:n,dispatch:r,borderRef:a};return Object(V.jsx)("div",{className:"shrunk-box",onMouseEnter:function(){return f(t)},style:{maxWidth:"".concat(c,"%")},children:Object(V.jsx)(le,Object(s.a)({},u))},t)}))})}function fe(e){var t=e.dispatch,n=e.slot,r=e.rating,a=e.mode,i=e.cls,o=e.borderRef,l=c.a.useState(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],b=null;if(b="rate"!==a?Object(V.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(re(r/6)),width:"100%"},children:r}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(re(r/6))},children:r}),Object(V.jsxs)("div",{className:"rater-button-box",children:[Object(V.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.min(6,r+1)}})},children:"+"}),Object(V.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.max(0,r-1)}})},children:"-"})]})]}),i){console.log("need to show class");var h={mode:a,borderRef:o,dispatch:t},p=1===i.length?Object(V.jsx)(le,Object(s.a)(Object(s.a)({},h),{},{cls:i[0]})):Object(V.jsx)(je,Object(s.a)(Object(s.a)({},h),{},{cls:i}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"rater",style:{maxHeight:j?"0":"62%"},children:b}),Object(V.jsx)("div",{style:{height:"100%"},onClick:function(){return f((function(e){return!e}))},onMouseLeave:function(){return f(!1)},children:p})]})}return Object(V.jsx)("div",{className:"rater",children:b})}function be(e){var t={};return Array.from(Array(30).keys()).forEach((function(e){t[e+1]=!1})),Object(s.a)(Object(s.a)({},t),e)}var he=function(){var e=c.a.useState(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=c.a.useState(null),i=Object(u.a)(a,2),o=i[0],l=i[1],d=c.a.useState("view"),j=Object(u.a)(d,2),f=j[0],b=j[1];if(c.a.useEffect((function(){return m().then(r)}),[]),c.a.useEffect((function(){return"rate"===f&&v().then(l)}),[f]),null===n||"rate"===f&&null===o)return Object(V.jsx)("div",{children:"Loading content..."});var h=[],p={actions:h,mode:f};return"reschedule"===f?h.push({name:"Zaporoponuj zmiany",cb:function(e){r(null),w(e).then((function(){return m().then(r)}))}}):"rate"===f&&(h.push({name:"Zapisz",cb:function(e){l(null),function(e){return k.apply(this,arguments)}(e).then((function(){return v().then(l).then((function(){return b("view")}))}))}}),p.initRatings=o),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(oe,Object(s.a)({initSchedule:n},p)),Object(V.jsxs)("div",{children:[Object(V.jsx)(Ae,{onClick:function(){return b("view")},children:"Plan"}),Object(V.jsx)(Ae,{onClick:function(){return b("reschedule")},children:"Zmiana Grup"}),Object(V.jsx)(Ae,{onClick:function(){return b("rate")},children:"Dogodno\u015b\u0107 Godzin"})]})]})};n(20);function pe(){var e=c.a.useContext(Ie),t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1],i=c.a.useState(""),o=Object(u.a)(i,2),s=o[0],l=o[1];return Object(V.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return h.apply(this,arguments)}(r,s).then((function(t){return e({action:"login",data:t})})).catch(alert)},children:[Object(V.jsx)("input",{type:"text",name:"name",value:r,onChange:function(e){a(e.target.value)},required:!0,placeholder:"Login"}),Object(V.jsx)("br",{}),Object(V.jsx)("input",{type:"password",name:"password",value:s,onChange:function(e){l(e.target.value)},required:!0,placeholder:"Has\u0142o"}),Object(V.jsx)("br",{}),Object(V.jsx)(Ae,{submit:!0,onClick:function(){return console.log("pressed log in")},children:"Log in"})]})}function Oe(){var e=c.a.useContext(Ie);return c.a.useContext(We)?Object(V.jsx)("span",{style:{float:"right"},onClick:function(){e({action:"logout"})},children:"Log out"}):Object(V.jsx)("span",{style:{float:"right"},onClick:function(){e({action:"setContent",data:Object(V.jsx)(pe,{})})},children:"Log in"})}n(21);function me(e){var t=e.children,n=e.view,r=e.nNots,a=c.a.useContext(Ie);return Object(V.jsxs)("span",{onClick:function(){return a({action:"setContent",data:n})},children:[t,r&&Object(V.jsx)("div",{className:"notifIndicator",children:r})]})}function xe(e){var t=e.toggle;return Object(V.jsx)("span",{onClick:t,children:"O"})}function ve(e){var t=e.links,n=e.windWidth,r=c.a.useState(!1),a=Object(u.a)(r,2),i=a[0],o=a[1],s=c.a.useContext(We),l=Object(V.jsx)("div",{children:"You must be logged in to view this content"});return n<500?Object(V.jsxs)("nav",{children:[Object(V.jsx)("div",{style:{display:i?"block":"none"},children:t.map((function(e,t){return Object(V.jsx)(me,{view:s?e.view:l,stack:!0,nNots:e.nNots,children:e.name},t)}))}),Object(V.jsx)(xe,{toggle:function(){o((function(e){return!e}))}}),Object(V.jsx)(Oe,{})]}):Object(V.jsxs)("nav",{children:[Object(V.jsx)(Oe,{}),t.map((function(e,t){return Object(V.jsx)(me,{view:s?e.view:l,stack:!1,nNots:e.nNots,children:e.name},t)}))]})}n(22);function ge(e){return"blablabla info o ".concat(e)}function we(e){var t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(ge(e.name))}),[e.name]),Object(V.jsxs)("div",{children:[Object(V.jsx)("h2",{children:e.name}),r]})}function ye(e){var t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(ge(e.name))}),[e.name]),Object(V.jsx)("div",{children:r})}function ke(e){var t=c.a.useState(!1),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"course",onClick:function(){a((function(e){return!e}))},children:e.name}),Object(V.jsxs)("div",{className:"course-menu",style:{maxHeight:r?"3em":"0px"},children:[Object(V.jsx)(me,{view:Object(V.jsx)(we,{name:e.name}),children:"Strona przedmiotu"}),Object(V.jsx)(me,{view:Object(V.jsx)(ye,{name:e.maitainerName}),children:"Strona prowadz\u0105cego"})]})]})}var Se=function(){var e=b(p);return null===e?Object(V.jsx)("div",{children:"Loading content..."}):Object(V.jsxs)("div",{id:"courses",className:"content-box",children:["Moje Przedmioty",e.map((function(e){return Object(V.jsx)(ke,{name:e.name},e.id)}))]})};n(23),n(24);function Ne(){var e=b(W);return null===e?Object(V.jsx)("div",{children:"Loading grades..."}):Object(V.jsxs)("div",{className:"content-box",children:["Moje oceny",e.map((function(e){return Object(V.jsxs)("div",{className:"box-row",children:[e.name,":",Object(V.jsx)("span",{className:"grade",children:e.grade})]})}))]})}n(25);function Ce(){var e=b(F),t=c.a.useState([]),n=Object(u.a)(t,2),r=n[0],a=n[1];if(c.a.useEffect((function(){return a(e)}),[e]),null===r)return Object(V.jsx)("div",{children:"Loading requests..."});function i(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}return Object(V.jsxs)("div",{className:"content-box",children:["Pro\u015bby o zmiany grup",r.map((function(e){return Object(V.jsx)(Me,Object(s.a)(Object(s.a)({},e),{},{del:i}),e.id)}))]})}function Me(e){var t=e.id,n=e.stud,r=e.cls,a=e.to,i=e.del,o=c.a.useState(!1),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(V.jsxs)("div",{className:"box-row",children:[r.name," ",r.type,", ",n,", na ",a,Object(V.jsx)("span",{className:"resched-buttons",children:l?"przetwarzanie...":Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ae,{onClick:function(){d(!0),function(e){return S.apply(this,arguments)}(t).then((function(){return i(t)})).catch((function(){return d(!1)}))},children:"Zaakceptuj"}),Object(V.jsx)(Ae,{onClick:function(){d(!0),function(e){return N.apply(this,arguments)}(t).then((function(){return i(t)})).catch((function(){return d(!1)}))},children:"Odrzu\u0107"})]})})]})}function Re(){var e="ROLE_STUDENT"===c.a.useContext(We).position,t=b(Z),n=Ge(),r=Object(u.a)(n,2),a=r[0],i=r[1];if(null===t)return Object(V.jsx)("div",{children:"Loading polls..."});function o(e){(function(e){return E.apply(this,arguments)})(e).then((function(e){var t=Object.entries(e).reduce((function(e,t){return e[1]>t[1]?e:t}))[0];i((function(){return Object(V.jsx)(oe,{initRatings:e,initSelections:Object(l.a)({},t,!0),mode:"view"})})).catch(Ye)}))}function d(e){(function(e){return q.apply(this,arguments)})(e).then((function(e){return i((function(t){return Object(V.jsx)(oe,{initRatings:e,mode:"rate",actions:[{name:"G\u0142osuj",cb:t}]})}))})).then((function(t){return function(e,t){return D.apply(this,arguments)}(e,t)}),Ye)}return console.log(t),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"content-box",children:["Ankiety",t.map((function(t){return Object(V.jsx)(ze,Object(s.a)(Object(s.a)({},t),{},{resolve:o,vote:e?d:null}),t.id)}))]}),e||Object(V.jsx)("div",{children:Object(V.jsx)(Ae,{onClick:function(){i((function(e){return Object(V.jsx)(Ue,{onSelect:e})})).then((function(e){return function(e){return G.apply(this,arguments)}(e)})).then((function(e){return i((function(t){return Object(V.jsx)(Le,{onSelect:t,initSlots:e})}))})).then((function(e){return function(e,t){return M.apply(this,arguments)}(e.name,e.slots)})).catch(Ye)},children:"Dodaj"})}),a]})}function ze(e){var t=e.id,n=e.name,r=e.voted,c=e.resolve,a=e.vote;return Object(V.jsxs)("div",{className:"box-row",children:[n,Object(V.jsx)("span",{className:"resched-buttons",children:a?Object(V.jsxs)(V.Fragment,{children:[r&&"Zag\u0142osowano",Object(V.jsx)(Ae,{onClick:function(){return a(t)},children:"G\u0142osuj"})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Ae,{onClick:function(){return c(t)},children:"Wynik"}),Object(V.jsx)(Ae,{onClick:function(){return function(e){return C.apply(this,arguments)}(t)},children:"Zako\u0144cz"})]})})]})}function Le(e){var t=e.onSelect,n=e.initSlots,r=c.a.useRef(null),a=c.a.useState(""),i=Object(u.a)(a,2),o=i[0],s=i[1];return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{style:{marginBottom:"0.5em"},children:Object(V.jsx)("form",{className:"search-bar",onSubmit:function(e){e.preventDefault(),t({name:o,slots:r.current()})},children:Object(V.jsx)("div",{children:Object(V.jsx)("input",{type:"text",value:o,onChange:function(e){return s(e.target.value)},required:!0,placeholder:"Wpisz nazw\u0119"})})})}),Object(V.jsx)(oe,{initSelections:be(n),mode:"select",actions:[{name:"Utw\xf3rz",cb:function(e){return t({name:o,slots:e})}}],setDataPusher:function(e){return function(){return r.current=e}}})]})}n(26);function Pe(){var e=b(J);return null===e?Object(V.jsx)("div",{children:"Loading news..."}):Object(V.jsxs)("div",{className:"content-box",id:"news-box",children:["Aktualno\u015bci",e.map((function(e){return Object(V.jsxs)("div",{className:"box-row",children:[Object(V.jsx)("h3",{children:e.title}),Object(V.jsx)("div",{className:"info-box",children:e.text})]})}))]})}function Ee(){var e,t=b(K),n=c.a.useMemo((function(){return null===t||void 0===t?void 0:t.map((function(e){return e.name}))}),[t]),r=c.a.useState(null),a=Object(u.a)(r,2),i=a[0],o=a[1],s=c.a.useState(null),l=Object(u.a)(s,2),d=l[0],j=l[1];return null===t?Object(V.jsx)("div",{children:"Loading workers..."}):Object(V.jsxs)("div",{className:"content-box",children:["Pracownicy",Object(V.jsx)(Be,{onSearch:function(e){j(null),o(t.filter((function(t){return t.name.includes(e)})))},suggestions:n}),null!==(e=null===d||void 0===d?void 0:d.text)&&void 0!==e?e:null===i||void 0===i?void 0:i.map((function(e){return Object(V.jsxs)("div",{className:"content-row",children:[e.name,Object(V.jsx)(Ae,{onClick:function(){(function(e){return Q.apply(this,arguments)})(e.id).then(j)},children:"Wybierz"})]},e.id)}))]})}function De(){var e=c.a.useState(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=c.a.useState(null),i=Object(u.a)(a,2),o=i[0],s=i[1];return c.a.useEffect((function(){return null===o||U(o).then(r)}),[o]),Object(V.jsxs)("div",{className:"content-box",children:[Object(V.jsx)(Ue,{onSelect:s}),n&&Object(V.jsx)(oe,{initSchedule:n,permResched:!0,mode:"reschedule",actions:[{name:"Zmie\u0144",cb:function(e){r(null),w(e).then((function(){return U(o).then(r)}))}}]})]})}var We=c.a.createContext(),Ie=c.a.createContext();function Fe(e,t){var n=t.action,r=t.data;switch(n){case"resize":return Object(s.a)(Object(s.a)({},e),{},{width:window.innerWidth});case"login":return Object(s.a)(Object(s.a)({},e),{},{user:r,content:Object(V.jsx)(Pe,{})});case"logout":return Object(s.a)(Object(s.a)({},e),{},{user:null,content:Object(V.jsx)(pe,{})});case"setContent":return Object(s.a)(Object(s.a)({},e),{},{content:r})}}function Te(){var e=c.a.useReducer(Fe,{content:Object(V.jsx)(pe,{}),user:null,width:window.innerWidth}),t=Object(u.a)(e,2),n=t[0],r=n.content,a=n.user,i=n.width,o=t[1];c.a.useEffect((function(){var e=function(){return o({action:"resize"})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var s=[{name:"Plan zaj\u0119\u0107",view:Object(V.jsx)(he,{})},{name:"Ankiety",view:Object(V.jsx)(Re,{}),nNots:a?10:void 0},{name:"Aktualno\u015bci",view:Object(V.jsx)(Pe,{})},{name:"Pracownicy",view:Object(V.jsx)(Ee,{})}];return a&&(a.position,s.push.apply(s,[{name:"Oceny",view:Object(V.jsx)(Ne,{})},{name:"Przedmioty",view:Object(V.jsx)(Se,{})},{name:"Rejestracja",view:Object(V.jsx)($,{})}]),s.push({name:"Zmiany grup",view:Object(V.jsx)(Ce,{}),nNots:a?3:void 0}),a.security,s.push({name:"Plan",view:Object(V.jsx)(De,{})})),Object(V.jsx)(Ie.Provider,{value:o,children:Object(V.jsxs)(We.Provider,{value:a,children:[Object(V.jsx)(ve,{links:s,windWidth:i}),Object(V.jsx)(Ze,{children:r}),Object(V.jsx)(Xe,{})]})})}function Ze(e){var t=e.children;return Object(V.jsx)("div",{id:"content",children:Object(V.jsx)("div",{children:t})})}function Ae(e){var t=e.onClick,n=e.children,r=e.submit,a=e.style,i=c.a.useState(!1),o=Object(u.a)(i,2),s=o[0],l=o[1];return Object(V.jsxs)("button",{className:"button"+(s?" button-clicked":""),onClick:t,onMouseDown:function(){return l(!0)},onMouseUp:function(){return l(!1)},onMouseLeave:function(){return l(!1)},type:r?"submit":"",style:a,children:[Object(V.jsx)("div",{className:"bdummy",children:n}),Object(V.jsx)("div",{className:"btext"+(s?" btext-clicked":""),children:n})]})}function Be(e){var t=e.onSearch,n=e.suggestions,r=e.searchOnSelect,a=c.a.useState(""),i=Object(u.a)(a,2),o=i[0],s=i[1],l=c.a.useState(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],b=c.a.useState(null),h=Object(u.a)(b,2),p=h[0],O=h[1],m=c.a.useState(!0),x=Object(u.a)(m,2),v=x[0],g=x[1],w=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.includes(o)}))}),[n,o]);return Object(V.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(o)},autoComplete:"off",children:[Object(V.jsxs)("div",{className:"search-bar",children:[Object(V.jsx)("input",{type:"text",name:"name",value:o,onChange:function(e){O(null),s(e.target.value),g(!0)},onFocus:function(){return f(!0)},onBlur:function(){return f(!1)},onKeyDown:function(e){switch(e.key){case"ArrowDown":O((function(e){return Math.min((null!==e&&void 0!==e?e:-1)+1,w.length-1)}));break;case"ArrowUp":O((function(e){return null===e||0===e?null:e-1}));break;case"Enter":if(null!==p){e.preventDefault();var n=w[p];s(n),O(null),g(!1),r&&t(n)}}},required:!0,placeholder:"Szukaj po nazwie"}),j&&w&&v&&Object(V.jsx)("div",{className:"suggestions",children:w.map((function(e,n){return Object(V.jsx)("div",{className:"suggestion"+(n===p?" focused-sugg":""),onMouseDown:function(){s(e),O(null),g(!1),r&&t(e)},children:e},n)}))})]}),Object(V.jsx)(Ae,{submit:!0,children:"Szukaj"})]})}function Xe(){return Object(V.jsx)("div",{id:"footer",children:"Studia 4 PAP-Z223"})}function Ge(){var e=c.a.useState(null),t=Object(u.a)(e,2),n=t[0],r=t[1];return[n,function(e){return new Promise((function(t,n){r(Object(V.jsx)("div",{className:"pop-up-container",children:Object(V.jsxs)("div",{className:"pop-up",children:[Object(V.jsx)("div",{className:"button-div",children:Object(V.jsx)(Ae,{onClick:function(){r(null),n("popup closed")},children:"X"})}),e((function(e){r(null),t(e)}))]})}))}))}]}function Ue(e){var t=e.onSelect,n=b(B),r=c.a.useState([]),a=Object(u.a)(r,2),i=a[0],s=a[1],l=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.map((function(e){return e.name}))}),[n]);return null===n?Object(V.jsx)("div",{children:"Loading..."}):Object(V.jsxs)("div",{className:"group-selector",children:[Object(V.jsx)(Be,{searchOnSelect:!0,onSearch:function(e){var t=[];n.forEach((function(n){n.name.includes(e)&&(i.includes(n)||t.push(n))})),s((function(e){return[].concat(Object(o.a)(e),t)}))},suggestions:l}),i.map((function(e){return Object(V.jsxs)("div",{children:[e.name,Object(V.jsx)(Ae,{onClick:function(){s((function(t){var n=Object(o.a)(t);return n.splice(t.indexOf(e),1),n}))},children:"X"})]},e.id+e.type)})),0===i.length||Object(V.jsx)(Ae,{onClick:function(){return t(i)},children:"Wybierz"})]})}function Ye(e){if("popup closed"!==e)throw e}var qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,28)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(Te,{})}),document.getElementById("root")),qe()}],[[27,1,2]]]);
//# sourceMappingURL=main.b09d207f.chunk.js.map