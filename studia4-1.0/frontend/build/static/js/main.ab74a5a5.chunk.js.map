{"version":3,"sources":["Remote.js","Schedule.js","Login.js","Nav.js","Courses.js","Grades.js","ReschedRequests.js","Register.js","Polls.js","News.js","Workers.js","AdminSchedule.js","App.js","reportWebVitals.js","index.js"],"names":["useRemoteData","fetcher","user","React","useContext","UserContext","useState","data","setData","useEffect","then","username","passowrd","a","loginData","FormData","append","fetch","document","location","host","method","body","res","text","json","loginInf","fetchCourses","name","id","fetchClasses","slot","room","type","Math","floor","random","alts","url","URL","searchParams","console","log","classes","schedObj","forEach","roomNumber","class_type","timeSlotID","fetchRatings","pushRescheduleRequest","changes","ratings","Promise","resolve","setTimeout","reject","slots","sbjId","fetchCoursesRegister","rts","fetchGrades","grade","fetchRequests","cls","stud","to","fetchPolls","fetchGroups","groups","fetchGroupSchedule","fetchNews","title","fetchWorkers","hours","days","schedStateReducer","state","action","dragged","x","y","newSched","Object","entries","dropSlots","current","clb","JSON","parse","stringify","schedule","resched","selections","rating","Schedule","initSchedule","initRatings","initSelections","onSelect","mode","actions","permResched","useRef","borderRef","useReducer","dispatch","schedBySlot","useMemo","perm","disId","undefined","sbs","push","pend","transformSchedule","fwd","getCbData","reschedule","inital","scheduleDiff","select","sel","Set","add","reduceSelections","rate","className","ref","HourLegend","map","day","hour","indexOf","toString","getSlotId","ClassBox","selected","droppable","drops","includes","elem","act","i","Button","onClick","cb","rect","getBoundingClientRect","top","bottom","left","right","cont","length","Class","Collision","handlers","Rater","props","width","prevW","setText","useLayoutEffect","newText","split","l","tId","clearTimeout","onMouseDown","event","preventDefault","currentTarget","offset","window","scrollX","pageX","scrollY","pageY","DraggedClass","initPos","style","opacity","ox","oy","pos","setPos","handleMove","addEventListener","removeEventListener","useMousePos","height","borderTop","borderLeft","borderBottom","borderRight","leftPos","min","max","topPos","position","onMouseUp","clss","eqWidth","ufWidth","focused","setFocused","onMouseLeave","onMouseEnter","maxWidth","expandSelection","fullSel","Array","from","keys","ScheduleView","setSchedule","setRatings","setMode","schedProps","chng","rtings","pushRatings","LogIn","DispatchContext","nameVal","setName","passVal","setPass","onSubmit","login","un","catch","alert","value","onChange","target","required","placeholder","submit","LogInLink","float","NavLink","children","view","nNots","ShowNav","toggle","NavBar","links","windWidth","sideVisible","setSide","prompt","display","link","stack","prev","getCourseText","CourseInfo","info","setInfo","MaitainerInfo","Course","expanded","setExpanded","maxHeight","maitainerName","CoursesList","courses","crs","Grades","ReschedRequests","initRequests","requests","setRequests","delRequest","reqs","filter","r","req","RRequest","del","pending","setPending","approveRequest","declineRequest","Register","allSubjects","mySubjects","usePopup","popup","show","currSubjects","setSubjects","registeredSubjects","subjects","retSet","sbj","sbjSet","SearchBar","onSearch","srch","sub","SubjectRegister","alReg","has","val","slt","backgroundColor","evalSlots","h","classRegister","verifyClose","subjectRegister","ratingVals","s","sort","reverse","genWeights","w","reduce","r1","r2","prop","len","Polls","polls","resolvePoll","best","s1","s2","vote","fetchPollSlots","handleData","rtngs","votePoll","poll","Poll","GroupSelector","grps","fetchIntersect","SlotSelector","initSlots","addPoll","voted","removePoll","newSlots","News","infos","Workers","workers","suggestions","searched","setSearched","worker","setWorker","str","fetchWorkerInfo","AdminSchedule","filteredClasses","setClasses","setGroups","createContext","stateReducer","innerWidth","content","App","updateWidth","Provider","ContentBox","Footer","clicked","setClicked","searchVal","setVal","focusedSugg","setFocusedSugg","showSugg","setShowSugg","fltrSuggerstions","sug","autoComplete","onFocus","onBlur","onKeyDown","key","currElem","setElem","elemGetter","allGroups","groupNames","gr","newGroups","grp","g","cp","splice","err","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ab74a5a5.chunk.js","sourcesContent":["import React from 'react';\r\nimport { UserContext } from './App';\r\nconst dummyData = true;\r\n\r\nexport function useRemoteData(fetcher) {\r\n    const user = React.useContext(UserContext);\r\n    const [data, setData] = React.useState(null);\r\n    React.useEffect(() => fetcher(user).then(setData), [user, fetcher]);\r\n    return data;\r\n}\r\n\r\nexport async function login(username, passowrd) {\r\n    if (dummyData) {\r\n        return \"me\";\r\n    }\r\n    const loginData = new FormData();\r\n    loginData.append(\"username\", username);\r\n    loginData.append(\"password\", passowrd);\r\n    const loginInf = await fetch(\"http://\" + document.location.host + \"/login\", {method: 'POST', body: loginData})\r\n        .then(res => res.text())\r\n        .then(() => fetch(\"http://\" + document.location.host + \"/logged\"))\r\n        .then(res => res.json())\r\n    return loginInf.username;\r\n}\r\n\r\nexport async function fetchCourses() {\r\n    if (dummyData) {\r\n        return [\r\n            {\r\n                name: \"WSI\",\r\n                id: 0\r\n            },\r\n            {\r\n                name: \"pap\",\r\n                id: 1\r\n            }\r\n        ]\r\n    }\r\n    return await fetch(\"http://\" + document.location.host + \"/classes\").then(res => res.json());\r\n}\r\n\r\nexport async function fetchClasses() {\r\n    if (dummyData) {\r\n        return {\r\n            0: {\r\n                name: \"WSI\",\r\n                slot: \"2\",\r\n                room: \"98\",\r\n                id: 0,\r\n                type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n                alts: [\"2\", \"29\"]\r\n            },\r\n            1: {\r\n                name: \"SI\",\r\n                slot: \"2\",\r\n                room: \"98\",\r\n                id: 1,\r\n                type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n                alts: []\r\n            },\r\n            2: {\r\n                name: \"Wsi\",\r\n                slot: \"2\",\r\n                room: \"11\",\r\n                id: 2,\r\n                type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n                alts: []\r\n            },\r\n            3: {\r\n                name: \"nji\",\r\n                slot: \"26\",\r\n                room: \"98\",\r\n                id: 3,\r\n                type: \"lab\",\r\n                alts: []\r\n            }\r\n        };\r\n    }\r\n    const url = new URL(\"http://\" + document.location.host + \"/classes\");\r\n    url.searchParams.append(\"flag\", \"1\");\r\n    console.log(\"schedule requested\");\r\n    const classes = await fetch(url).then(res => res.json());\r\n    console.log(\"Classes obtained\");\r\n    console.log(classes);\r\n    const schedObj = {};\r\n    classes.forEach(({ name, id, roomNumber, class_type, timeSlotID }) => schedObj[id] = {\r\n        name,\r\n        id,\r\n        room: roomNumber,\r\n        type: class_type,\r\n        slot: timeSlotID\r\n    });\r\n    console.log(\"transformed schedule:\");\r\n    console.log(schedObj);\r\n    return schedObj;\r\n}\r\n\r\nexport async function fetchRatings() {\r\n\r\n    // [[1, 2], [1, 2]]\r\n    // {1: 2, 1: 2}\r\n    return ({\r\n        \"2\": 0,\r\n        \"5\": 2,\r\n        \"0\": 2,\r\n    });\r\n}\r\n\r\nexport async function pushRescheduleRequest(changes) {\r\n    console.log(changes);\r\n    return true;\r\n}\r\n\r\nexport async function pushRatings(ratings) {\r\n    console.log(ratings);\r\n    return true;\r\n}\r\n\r\nexport async function approveRequest(id) {\r\n    console.log(id);\r\n    return new Promise(resolve => setTimeout(() => resolve(true), 2000));\r\n}\r\n\r\nexport async function declineRequest(id) {\r\n    console.log(id);\r\n    return new Promise((resolve, reject) => setTimeout(() => reject(\"dupa\"), 2000));\r\n}\r\n\r\nexport async function removePoll(id) {\r\n    console.log(id);\r\n    return true;\r\n}\r\n\r\nexport async function addPoll(name, slots) {\r\n    console.log(name);\r\n    console.log(slots);\r\n    return true;\r\n}\r\n\r\nexport async function subjectRegister(id) {\r\n    return true;\r\n}\r\n\r\nexport async function classRegister(sbjId, slot) {\r\n    return true;\r\n}\r\n\r\nexport async function fetchCoursesRegister() {\r\n    return [{\r\n        name: \"WSI\",\r\n        id: 0,\r\n    },\r\n    {\r\n        name: \"SOI\",\r\n        id: 2,\r\n        slots: [0, 2, 5]\r\n    },\r\n    {\r\n        name: \"PAP\",\r\n        id: 3,\r\n    },\r\n    {\r\n        name: \"PROB\",\r\n        id: 4,\r\n    }];\r\n}\r\n\r\nexport async function resolvePoll(id) {\r\n    return {\r\n        \"2\": 13,\r\n        \"15\": 10,\r\n    }\r\n}\r\n\r\nexport async function votePoll(id, rts) {\r\n    console.log(rts);\r\n    return true;\r\n}\r\n\r\nexport async function fetchGrades(user) {\r\n    return ([{\r\n        name: \"WSI\",\r\n        grade: 3\r\n    },\r\n    {\r\n        name: \"SOI\",\r\n        grade: -10\r\n    }\r\n    ])\r\n}\r\n\r\nexport async function fetchRequests(user) {\r\n    return ([{\r\n        id: 0,\r\n        cls: {\r\n            name: \"WSI\",\r\n            type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n        },\r\n        stud: \"Jeremi S\",\r\n        to: \"3\"\r\n    },\r\n    {\r\n        id: 1,\r\n        cls: {\r\n            name: \"SOI\",\r\n            type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n        },\r\n        stud: \"Karol O\",\r\n        to: \"25\"\r\n    }\r\n    ])\r\n}\r\n\r\nexport async function fetchPolls(user) {\r\n    return ([{\r\n        name: \"dupa\",\r\n        id: 0\r\n    },\r\n    {\r\n        name: \"yyyy\",\r\n        id: 1\r\n    }\r\n    ])\r\n}\r\n\r\nexport async function fetchGroups(user) {\r\n    return ([{\r\n        name: \"WSI\",\r\n        id: 0,\r\n        type: \"Przedmiot\"\r\n    },\r\n    {\r\n        name: \"SOI - lab\",\r\n        id: 1,\r\n        type: \"Zajecia\"\r\n    },\r\n    {\r\n        name: \"Grupa I2\",\r\n        id: 0,\r\n        type: \"Grupa\"\r\n    }\r\n    ])\r\n}\r\n\r\nexport async function fetchIntersect(groups) {\r\n    return ({\r\n        \"8\": true,\r\n        \"12\": true,\r\n    })\r\n}\r\n\r\nexport async function fetchGroupSchedule(groups) {\r\n    return {\r\n        0: {\r\n            name: \"WSI\",\r\n            slot: \"2\",\r\n            room: \"98\",\r\n            id: 0,\r\n            type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n        },\r\n        1: {\r\n            name: \"SI\",\r\n            slot: \"2\",\r\n            room: \"98\",\r\n            id: 1,\r\n            type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n        },\r\n        2: {\r\n            name: \"Wsi\",\r\n            slot: \"2\",\r\n            room: \"11\",\r\n            id: 2,\r\n            type: [\"lab\", \"exercise\", \"lecture\"][Math.floor(Math.random()*3)],\r\n        },\r\n        3: {\r\n            name: \"nji\",\r\n            slot: \"10\",\r\n            room: \"98\",\r\n            id: 3,\r\n            type: \"lab\",\r\n        }\r\n    };\r\n}\r\n\r\nexport async function fetchPollSlots(id) {\r\n    return {\"0\": 3, \"22\": 4};\r\n}\r\n\r\nexport async function fetchNews() {\r\n    return [\r\n        {\r\n            title: \"DUPA\",\r\n            text: \"yyyyyyysapidfj aijsd 0iasj d0asdjo asj\"\r\n        },\r\n        {\r\n            title: \"Hee\",\r\n            text: \"0aijsdiwef0u82hgfy23h8irj1jkfi0owshdfsgbfhidb\"\r\n        }\r\n    ]\r\n}\r\n\r\nexport async function fetchWorkers() {\r\n    return [\r\n        {\r\n            name: \"Ewa S.\",\r\n            id: 0\r\n        },\r\n        {\r\n            name: \"Peter Gawkuu\",\r\n            id: 1\r\n        }\r\n    ];\r\n}\r\n\r\nexport async function fetchWorkerInfo(id) {\r\n    return {\r\n        text: \"Jakieś info o panu pracowniku\"\r\n    };\r\n}","import React from 'react';\nimport './Schedule.css';\nimport { Button, UserContext } from \"./App\";\nimport { fetchClasses, pushRescheduleRequest, pushRatings, fetchRatings } from \"./Remote\";\nconst hours = [\"8:15\", \"10:15\", \"12:15\", \"14:15\", \"16:15\", \"18:15\"];\nconst days = [\"poniedzialek\", \"wtorek\", \"sroda\", \"czwartek\", \"piatek\"];\n\nfunction getSlotId(day, hour) {\n    return (hours.indexOf(hour) + days.indexOf(day)*6).toString();\n}\n\nfunction useMousePos(inital) {\n    const [pos, setPos] = React.useState(inital);\n    React.useEffect(function() {\n        function handleMove(event) {\n            setPos({\n                x: event.pageX,\n                y: event.pageY\n            });\n        }\n        window.addEventListener(\"mousemove\", handleMove);\n        return () => window.removeEventListener(\"mousemove\", handleMove);\n    }, []);\n    return pos;\n}\n\nfunction schedStateReducer(state, { action, data }) {\n    switch (action) {\n        case \"drag\":\n            return {...state, dragged: data};\n        case \"endDrag\":\n            const { x, y, id } = data;\n            let newSched = null;\n            for (const [slot, clb] of Object.entries(state.dropSlots.current)) {\n                if (clb(x, y)) {\n                    newSched = JSON.parse(JSON.stringify(state.schedule));\n                    newSched[id].resched = slot;\n                    if (newSched[id].slot === slot) {\n                        delete newSched[id].resched;\n                    }\n                    break;\n                }\n            }\n            return {...state, dragged: null, schedule: newSched ?? state.schedule};\n        case \"toggleSelect\":\n            return {...state, selections: {...state.selections, [data]: !state.selections[data]}};\n        case \"rerate\":\n            return {...state, ratings: {...state.ratings, [data.slot]: data.rating}};\n        case \"setSchedule\":\n            return {...state, schedule: data};\n        case \"setSelections\":\n            return {...state, selections: data};\n        case \"setRatings\":\n            return {...state, ratings: data};\n        default:\n            return state;\n    }\n}\n\nfunction transformSchedule(schedule, perm, disId) {\n    if (schedule === undefined) {\n        return {};\n    }\n    const sbs = {};\n    for (const [id, cls] of Object.entries(schedule)) {\n        if (perm) {\n            id != disId && (sbs[cls.resched ?? cls.slot] ?? (sbs[cls.resched ?? cls.slot] = [])).push(cls);\n        } else {\n            (sbs[cls.slot] ?? (sbs[cls.slot] = [])).push(cls);\n            if (cls.resched) {\n                (sbs[cls.resched] ?? (sbs[cls.resched] = [])).push({...cls, pend: true});\n            }\n        }\n    }\n    return sbs;\n}\n\nfunction reduceSelections(selections) {\n    const sel = new Set();\n    for (const [slot, selected] of Object.entries(selections)) {\n        selected && sel.add(slot);\n    }\n    return sel;\n}\n\nfunction scheduleDiff(inital, current) {\n    const changes = {};\n    for (const [id, cls] of Object.entries(current)) {\n        if ((cls.resched ?? cls.slot) !== (inital[id].resched ?? inital[id].slot)) {\n            changes[id] = cls.resched ?? cls.slot;\n        }\n    }\n    return changes;\n}\n\nexport function Schedule({ initSchedule, initRatings, initSelections, onSelect, mode, actions, permResched }) {\n    const dropSlots = React.useRef({});\n    const borderRef = React.useRef();\n    const [{ schedule, selections, ratings, dragged }, dispatch] = React.useReducer(schedStateReducer, {\n        schedule: initSchedule,\n        selections: initSelections,\n        ratings: initRatings,\n        dragged: null,\n        dropSlots\n    });\n    React.useEffect(() => dispatch({action: \"setSchedule\", data: initSchedule}), [initSchedule]);\n    React.useEffect(() => dispatch({action: \"setSelections\", data: initSelections}), [initSelections]);\n    React.useEffect(() => dispatch({action: \"setRatings\", data: initRatings}), [initRatings]);\n    const schedBySlot = React.useMemo(() => transformSchedule(schedule, permResched, dragged?.disId), [schedule, permResched, dragged]);\n\n    const fwd = {mode, dispatch, dropSlots, onSelect, borderRef};\n\n    const getCbData = {\n        reschedule: () => scheduleDiff(initSchedule, schedule),\n        select: () => reduceSelections(selections),\n        rate: () => ratings\n    }[mode];\n\n    return (\n        <div id=\"schedule\" className=\"content-box\">\n            Plan zajęć\n            <div id=\"scheduleborder\" ref={borderRef}>\n                <ul id=\"daylist\">\n                    <li><HourLegend/></li>\n                    {days.map(function(day) {\n                        return (\n                            <li key={day}><ul className=\"daycolumn\">\n                                {day}\n                                {hours.map(function(hour) {\n                                    const slot = getSlotId(day, hour);\n                                    return <ClassBox\n                                        key={slot} \n                                        slot={slot} \n                                        cls={schedBySlot[slot]}\n                                        selected={selections?.[slot]}\n                                        rating={ratings?.[slot]}\n                                        droppable={permResched ? \"all\" : dragged?.drops.includes(slot)}\n                                        {...fwd}\n                                    />\n                                })}\n                            </ul></li>\n                        );\n                    })}\n                    <li><HourLegend/></li>\n                </ul>\n            </div>\n            {dragged?.elem}\n            {actions?.map((act, i) => <Button key={i} onClick={() => act.cb(getCbData())}>{act.name}</Button>)}\n        </div>\n    );\n}\n\nfunction ScheduleView() {\n    const user = React.useContext(UserContext);\n    const [schedule, setSchedule] = React.useState(null);\n    const [ratings, setRatings] = React.useState(null);\n    const [mode, setMode] = React.useState(\"view\");\n    React.useEffect(() => fetchClasses(user).then(setSchedule), [user]);\n    React.useEffect(() => mode === \"rate\" && fetchRatings(user).then(setRatings), [user, mode]);\n    if (schedule === null || (mode === \"rate\" && ratings === null)) {\n        return <div>Loading content...</div>;\n    }\n    const actions = [];\n    const schedProps = {actions, mode};\n    if (mode === \"reschedule\") {\n        actions.push({\n            name: \"Zaporoponuj zmiany\",\n            cb: function(chng) {\n                setSchedule(null);\n                pushRescheduleRequest(chng).then(() => fetchClasses().then(setSchedule));\n            }\n        });\n    } else if (mode === \"rate\") {\n        actions.push({\n            name: \"Zapisz\",\n            cb: function(rtings) {\n                setRatings(null);\n                pushRatings(rtings).then(() => fetchRatings().then(setRatings).then(() => setMode(\"view\")));\n            }\n        });\n        schedProps.initRatings = ratings;\n    }\n    return (\n        <>\n            <Schedule initSchedule={schedule} {...schedProps}/>\n            <div>\n                <Button onClick={() => setMode(\"view\")}>Plan</Button>\n                <Button onClick={() => setMode(\"reschedule\")}>Zmiana Grup</Button>\n                <Button onClick={() => setMode(\"rate\")}>Dogodność Godzin</Button>\n            </div>\n        </>\n    )\n}\n\nfunction HourLegend() {\n    return (\n        <ul className=\"hourlegend\">\n            &nbsp;\n            {[8, 10, 12, 14, 16, 18].map(hour => <li key={hour}>{hour.toString() + \":15\"}</li>)}\n        </ul>\n    );\n}\n\nfunction ClassBox({ cls, slot, mode, dispatch, dropSlots, selected, onSelect, rating, droppable, borderRef }) {\n    const ref = React.useRef();\n    const fwd = {mode, dispatch, rating, borderRef};\n    React.useEffect(function() {\n        if (droppable) {\n            dropSlots.current[slot] = function(x, y) {\n                const rect = ref.current.getBoundingClientRect();\n                return (y > rect.top && y < rect.bottom && x > rect.left && x < rect.right);\n            }\n            return () => delete dropSlots.current[slot];\n        }\n    }, [slot, dropSlots, droppable]);\n    let cont = null;\n    if (cls !== undefined && cls.length !== 0) {\n        cont = cls.length === 1 ? <Class {...fwd} cls={cls[0]}/> : <Collision {...fwd} cls={cls}/>;\n    }\n    const handlers = {};\n    if (mode === \"select\" && selected !== undefined) {\n        handlers.onClick = function() {\n            dispatch({action: \"toggleSelect\", data: slot});\n            onSelect?.(slot);\n        }\n    }\n    if (rating !== undefined) {\n        cont = <>{cont}<Rater {...fwd} slot={slot}/></>;\n    }\n    return <li className={\"class-box\" + (droppable === true || selected ? \" highlight\" : \"\")} {...handlers} ref={ref}>{cont}</li>;\n}\n\nfunction Class(props) {\n    const width = props.width ?? 100;\n    const [{ text, prevW }, setText] = React.useState({prevW: 100});\n    React.useLayoutEffect(function() {\n        let newText;\n        if (width >= 65) {\n            newText = (<>\n                {props.cls.name}<br/>\n                {props.cls.type}<br/>\n                Sala: {props.cls.room}\n            </>);\n        } else if (width > 18) {\n            newText = <>{props.cls.name.split('').map(l => <>{l}<br/></>)}</>;\n        } else {\n            newText = <>I</>;\n        }\n        if (width > prevW) {\n            const tId = setTimeout(() => setText({text: newText, prevW: width}), 100);\n            return () => clearTimeout(tId);\n        }\n        setText({text: newText, prevW: width});\n    }, [width])\n    let handlers = {};\n    if (props.mode === \"reschedule\") {\n        handlers.onMouseDown = function(event) {\n            event.preventDefault();\n            const rect = event.currentTarget.getBoundingClientRect();\n            const offset = {\n                x: rect.x + window.scrollX - event.pageX,\n                y: rect.y + window.scrollY - event.pageY\n            }\n            props.dispatch?.({action: \"drag\", data: {\n                elem: <DraggedClass cls={props.cls} initPos={{x: event.pageX, y: event.pageY}} offset={offset} dispatch={props.dispatch} borderRef={props.borderRef}/>,\n                drops: props.cls.alts,\n                disId: props.cls.id\n            }});\n        }\n    }\n    const style = props.cls.pend ? {opacity: 0.5} : {};\n    return (<div className={props.cls.type} {...handlers} style={style}>{text}</div>);\n}\n\nfunction DraggedClass({ initPos, cls, offset: {x: ox, y: oy}, dispatch, borderRef }) {\n    const ref = React.useRef();\n    const { x, y } = useMousePos(initPos);\n    const { width, height } = ref.current?.getBoundingClientRect() ?? {width: 0, height: 0};\n    const { top: borderTop, left: borderLeft, bottom: borderBottom, right: borderRight } = borderRef.current.getBoundingClientRect();\n    const leftPos = Math.min(Math.max(x + ox, borderLeft + window.scrollX), borderRight + window.scrollX - width);\n    const topPos = Math.min(Math.max(y + oy, borderTop + window.scrollY), borderBottom + window.scrollY - height);\n    return (<div className=\"class-box\" style={{\n        position: \"absolute\",\n        left: leftPos,\n        top: topPos\n    }} ref={ref} onMouseUp={function() {\n        const {top, bottom, left, right} = ref.current.getBoundingClientRect();\n        dispatch({action: \"endDrag\", data: {y: (top + bottom) / 2, x: (left + right) / 2, id: cls.id}})\n    }}>\n        <Class cls={cls}/>\n    </div>);\n}\n\nfunction Collision({ cls: clss, mode, dispatch, borderRef }) {\n    const eqWidth = 100/clss.length;\n    const fWidth = 65;\n    const ufWidth = 35/(clss.length - 1);\n    const [focused, setFocused] = React.useState(null);\n    return (\n        <div onMouseLeave={() => setFocused(null)} style={{height: \"100%\"}}>\n            {clss.map(function(cls, i) {\n                const width = focused === null ? eqWidth : (i === focused ? fWidth : ufWidth);\n                const fwd = {cls, width, mode, dispatch, borderRef};\n                return (\n                    <div key={i} className=\"shrunk-box\" onMouseEnter={() => setFocused(i)} style={{maxWidth: `${width}%`}}>\n                        <Class {...fwd}/>\n                    </div>\n                );\n            })}\n        </div>\n    );\n}\n\nfunction Rater({ dispatch, slot, rating, mode }) {\n    let cont = rating;\n    mode === \"rate\" && (cont = (\n        <>\n            <Button onClick={() => dispatch({action: \"rerate\", data: {slot, rating: rating - 1}})}>-</Button>\n            {cont}\n            <Button onClick={() => dispatch({action: \"rerate\", data: {slot, rating: rating + 1}})}>+</Button>\n        </>\n    ));\n    return <div className='rater'>{cont}</div>;\n}\n\nexport function expandSelection(sel) {\n    const fullSel = {};\n    \n    Array.from(Array(30).keys()).forEach(i => {fullSel[i] = false});\n    console.log(Array(10));\n    console.log(sel);\n    console.log(fullSel);\n    return {...fullSel, ...sel};\n}\n\n// export function PopupSchedule({ schedProps, onClose, topRender}) {\n//     return (\n//         <div className=\"pop-up\">\n//             {topRender}\n//             <div><Button onClick={onClose}>X</Button></div>\n//             <Schedule {...schedProps}/>\n//         </div>\n//     );\n// }\n\nexport default ScheduleView;","import React from \"react\"\nimport { Button, DispatchContext, UserContext } from \"./App\";\nimport \"./Login.css\"\nimport { login } from \"./Remote\";\n\nexport default function LogIn() {\n    const dispatch = React.useContext(DispatchContext);\n    const [nameVal, setName] = React.useState(\"\");\n    const [passVal, setPass] = React.useState(\"\");\n    function onChangeName(event) {\n        setName(event.target.value);\n    }\n    function onChangePass(event) {\n        setPass(event.target.value);\n    }\n    function onSubmit(event) {\n        event.preventDefault();\n        login(nameVal, passVal).then(un => dispatch({action: \"login\", data: un})).catch(alert);\n    }\n    return (\n        <form onSubmit={onSubmit}>\n            <input type=\"text\" name=\"name\" value={nameVal} onChange={onChangeName} required placeholder=\"Login\"/><br/>\n            <input type=\"password\" name=\"password\" value={passVal} onChange={onChangePass} required placeholder=\"Hasło\"/><br/>\n            <Button submit>Log in</Button>\n        </form>\n    );\n}\n\nexport function LogInLink() {\n    const dispatch = React.useContext(DispatchContext);\n    const user = React.useContext(UserContext);\n    if (user) {\n        return (\n            <span style={{float: \"right\"}} onClick={function() {\n                dispatch({action: \"logout\"});\n            }}>Log out</span>\n        )\n    }\n    return (\n        <span style={{float: \"right\"}} onClick={function() {\n            dispatch({action: \"setContent\", data: <LogIn/>});\n        }}>Log in</span>\n    )\n}","import React from 'react';\nimport { DispatchContext, UserContext } from \"./App\";\nimport { LogInLink } from './Login';\nimport './Nav.css';\n\n\nexport function NavLink({ children, view, nNots }) {\n    const dispatch = React.useContext(DispatchContext);\n    return (<span onClick={() => dispatch({action: \"setContent\", data: view})}>\n        {children}\n        {nNots && <div className=\"notifIndicator\">{nNots}</div>}\n    </span>);\n}\n\nfunction ShowNav({ toggle }) {\n    return <span onClick={toggle}>O</span>;\n}\n\n// function SideNav() {\n//     return (\n        \n//     )\n// }\n\nexport default function NavBar({ links, windWidth }) {\n    const [sideVisible, setSide] = React.useState(false);\n    const user = React.useContext(UserContext);\n    const prompt = <div>You must be logged in to view this content</div>;\n    if (windWidth < 500) {\n        return (\n            <nav>\n                <div style={{display: sideVisible ? \"block\" : \"none\"}}>\n                    {links.map((link, i) => <NavLink key={i} view={user ? link.view : prompt} stack={true} nNots={link.nNots}>{link.name}</NavLink>)}\n                </div>\n                <ShowNav toggle={function() {setSide(prev => !prev)}}/>\n                <LogInLink/>\n            </nav>\n        );    \n    }\n    return (\n        <nav>\n            <LogInLink/>\n            {links.map((link, i) => <NavLink key={i} view={user ? link.view : prompt} stack={false} nNots={link.nNots}>{link.name}</NavLink>)}\n        </nav>\n    );\n}\n","import React from \"react\";\nimport { NavLink } from \"./Nav\";\nimport './Courses.css';\nimport { fetchCourses, useRemoteData } from \"./Remote\";\n\nfunction getCourseText(name) {\n    return `blablabla info o ${name}`;\n}\n\nfunction CourseInfo(props) {\n    const [info, setInfo] = React.useState(\"\");\n    React.useEffect(function() {\n        setInfo(getCourseText(props.name));\n    }, [props.name]);\n    return (\n        <div>\n            <h2>{props.name}</h2>\n            {info}\n        </div>\n    )\n}\n\nfunction MaitainerInfo(props) {\n    const [info, setInfo] = React.useState(\"\");\n    React.useEffect(function() {\n        setInfo(getCourseText(props.name));\n    }, [props.name]);\n    return (\n        <div>\n            {info}\n        </div>\n    )\n}\n\nfunction CoursesList() {\n    const courses = useRemoteData(fetchCourses);\n    if (courses === null) {\n        return <div>Loading content...</div>;\n    }\n    return (\n        <div id=\"courses\" className=\"content-box\">\n            Moje Przedmioty\n            {courses.map(crs => <Course key={crs.id} name={crs.name}/>)}\n        </div>\n    )\n}\n\nfunction Course(props) {\n    const [expanded, setExpanded] = React.useState(false);\n    return (\n        <>\n            <div className=\"course\" onClick={function() {\n                setExpanded(prev => !prev);\n            }}>{props.name}</div>\n            <div className=\"course-menu\" style={{maxHeight: expanded ? \"3em\" : \"0px\"}}>\n                <NavLink view={<CourseInfo name={props.name}/>}>Strona przedmiotu</NavLink>\n                <NavLink view={<MaitainerInfo name={props.maitainerName}/>}>Strona prowadzącego</NavLink>\n            </div>\n        </>\n    )\n}\n\nexport default CoursesList;","import React from 'react';\r\nimport { useRemoteData, fetchGrades } from \"./Remote\";\r\nimport './Grades.css';\r\n\r\nexport default function Grades() {\r\n    const courses = useRemoteData(fetchGrades);\r\n    if (courses === null) {\r\n        return <div>Loading grades...</div>;\r\n    }\r\n    return (\r\n        <div className='content-box'>\r\n            Moje oceny\r\n            {courses.map(crs => <div className='box-row'>{crs.name}:<span className='grade'>{crs.grade}</span></div>)}\r\n        </div>\r\n    );\r\n}","import React from 'react';\r\nimport { Button } from './App';\r\nimport { fetchRequests, useRemoteData, approveRequest, declineRequest } from \"./Remote\";\r\nimport './ReschedRequests.css';\r\n\r\nexport default function ReschedRequests() {\r\n    const initRequests = useRemoteData(fetchRequests);\r\n    const [requests, setRequests] = React.useState([]);\r\n    React.useEffect(() => setRequests(initRequests), [initRequests]);\r\n    if (requests === null) {\r\n        return <div>Loading requests...</div>;\r\n    }\r\n    function delRequest(id) {\r\n        setRequests(reqs => reqs.filter(r => r.id !== id));\r\n    }\r\n    return (\r\n        <div className=\"content-box\">\r\n            Prośby o zmiany grup\r\n            {requests.map(req => <RRequest key={req.id} {...req} del={delRequest}/>)}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction RRequest({ id, stud, cls, to, del }) {\r\n    const [pending, setPending] = React.useState(false);\r\n    return (\r\n        <div className=\"box-row\">\r\n            {cls.name} {cls.type}, {stud}, na {to}\r\n            <span className='resched-buttons'>{pending ? \"przetwarzanie...\" : (<><Button onClick={function() {\r\n                setPending(true);\r\n                approveRequest(id).then(() => del(id)).catch(() => setPending(false));\r\n            }}>Zaakceptuj</Button>\r\n            <Button onClick={function() {\r\n                setPending(true);\r\n                declineRequest(id).then(() => del(id)).catch(() => setPending(false));\r\n            }}>Odrzuć</Button></>)}</span>\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { Button, SearchBar, usePopup, UserContext, verifyClose } from \"./App\";\r\nimport { classRegister, fetchClasses, fetchCourses, fetchCoursesRegister, fetchRatings, subjectRegister, useRemoteData } from \"./Remote\";\r\nimport { Schedule } from './Schedule';\r\nimport './Register.css';\r\n\r\nexport default function Register() {\r\n    const allSubjects = useRemoteData(fetchCoursesRegister);\r\n    const mySubjects = useRemoteData(fetchCourses);\r\n    const schedule = useRemoteData(fetchClasses);\r\n    const ratings = useRemoteData(fetchRatings);\r\n    const [popup, show] = usePopup();\r\n    const [currSubjects, setSubjects] = React.useState(null);\r\n    const registeredSubjects = React.useMemo(() => sbjSet(mySubjects), [mySubjects]);\r\n    if (allSubjects === null || registeredSubjects === null || ratings === null) {\r\n        return <div>Loading subjects...</div>;\r\n    }\r\n    const fwd = {show, schedule, ratings};\r\n    const subjects = currSubjects ?? allSubjects;\r\n    return (\r\n        <div className=\"content-box\">\r\n            <SearchBar onSearch={srch => setSubjects(allSubjects.filter(sub => sub.name.includes(srch)))}/>\r\n            {currSubjects !== null && <Button onClick={() => setSubjects(null)}>Wyczyść</Button>}\r\n            {subjects.map(sbj => <SubjectRegister sbj={sbj} alReg={registeredSubjects.has(sbj.id)} {...fwd}/>)}\r\n            {popup}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction SubjectRegister({ sbj, ratings, alReg, show, schedule }) {\r\n    const slots = React.useMemo(function() {\r\n        if (sbj.slots === undefined) {\r\n            return undefined;\r\n        }\r\n        const slots = {};\r\n        sbj.slots.forEach(slt => slots[slt] = true);\r\n        return slots;\r\n    }, [sbj])\r\n    return (\r\n        <div className=\"box-row\">\r\n            {sbj.name}\r\n            \r\n            <span className='resched-buttons'>{alReg ? \"Zarejestrowano\" : <>\r\n                {slots && <div className=\"indicator\" style={{backgroundColor: getColor(evalSlots(sbj.slots, ratings))}}/>}  \r\n                <Button onClick={function() {\r\n                    if (slots) {\r\n                        show(h => <Schedule\r\n                            initSchedule={schedule}\r\n                            initSelections={slots}\r\n                            mode={\"select\"}\r\n                            onSelect={h}\r\n                        />).then(slot => classRegister(sbj.id, slot), verifyClose)\r\n                    } else {\r\n                        subjectRegister(sbj.id);\r\n                    }\r\n                }}>Zarejestruj</Button>\r\n            </>}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction evalSlots(slots, ratings) {\r\n    const ratingVals = slots.map(s => ratings[s]).filter(r => r !== undefined).sort().reverse()\r\n    return genWeights(0.8, 1, ratingVals.length).map((w, i) => w*ratingVals[i]).reduce((r1, r2) => r1+r2) / 6\r\n}\r\n\r\nfunction genWeights(prop, val, len) {\r\n    if (len === 0) {\r\n        return [];\r\n    }\r\n    return [val*prop, ...genWeights(prop, val*(1-prop), len - 1)] \r\n}\r\n\r\nfunction getColor(val) {\r\n    return `rgb(${Math.floor(Math.min(255, (1-val)*512))}, ${Math.floor(Math.min(255, val*512))}, 0)`;\r\n}\r\n\r\nfunction sbjSet(subjects) {\r\n    if (subjects === null) {\r\n        return null;\r\n    }\r\n    const retSet = new Set();\r\n    subjects.forEach(sbj => retSet.add(sbj.id));\r\n    return retSet;\r\n}","import React from 'react';\r\nimport { Button, GroupSelector, SearchBar, usePopup, UserContext, verifyClose } from \"./App\";\r\nimport { fetchPolls, useRemoteData, removePoll, resolvePoll, votePoll, fetchPollSlots, fetchGroups, fetchIntersect, addPoll } from \"./Remote\";\r\nimport { expandSelection, Schedule } from './Schedule';\r\n\r\nexport default function Polls() {\r\n    const user = React.useContext(UserContext);\r\n    const stud = user === undefined;\r\n    const polls = useRemoteData(fetchPolls);\r\n    const [popup, show] = usePopup();\r\n    if (polls === null) {\r\n        return <div>Loading polls...</div>;\r\n    }\r\n    function resolve(id) {\r\n        resolvePoll(id).then(function(res) {\r\n            const best = Object.entries(res).reduce((s1, s2) => s1[1] > s2[1] ? s1 : s2)[0]\r\n            show(() => <Schedule\r\n                initRatings={res}\r\n                initSelections={{[best]: true}}\r\n                mode=\"view\"\r\n            />).catch(verifyClose);\r\n        })\r\n    }\r\n    function vote(id) {\r\n        fetchPollSlots(id).then(slots => show(handleData => <Schedule\r\n            initRatings={slots}\r\n            mode=\"rate\"\r\n            actions={[{\r\n                name: \"Głosuj\",\r\n                cb: handleData\r\n            }]}/>\r\n        )).then(rtngs => votePoll(id, rtngs), verifyClose);\r\n    }\r\n    function add() {\r\n        show(h => <GroupSelector onSelect={h}/>)\r\n            .then(grps => fetchIntersect(grps))\r\n            .then(slots => show(h => <SlotSelector onSelect={h} initSlots={slots}/>))\r\n            .then(({name, slots}) => addPoll(name, slots))\r\n            .catch(verifyClose);\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"content-box\">\r\n                Ankiety\r\n                {polls.map(poll => <Poll key={poll.id} {...poll} resolve={resolve} vote={stud ? vote : null}/>)}\r\n            </div>\r\n            {stud || <div><Button onClick={add}>Dodaj</Button></div>}\r\n            {popup}\r\n        </>\r\n    );\r\n}\r\n\r\nfunction Poll({ id, name, voted, resolve, vote }) {\r\n    return (\r\n        <div className=\"box-row\">\r\n            {name}\r\n            <span className='resched-buttons'>\r\n                {vote ? <>{voted && \"Zagłosowano\"}<Button onClick={() => vote(id)}>Głosuj</Button></> :\r\n                <><Button onClick={() => resolve(id)}>Wynik</Button>\r\n                <Button onClick={() => removePoll(id)}>Zakończ</Button></>}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction SlotSelector({ onSelect, initSlots }) {\r\n    const [name, setName] = React.useState(\"\");\r\n    return (\r\n        <form className=\"search-bar\">\r\n            <div>\r\n                <input \r\n                    type=\"text\"\r\n                    value={name}\r\n                    onChange={event => setName(event.target.value)}\r\n                    required\r\n                    placeholder=\"Wpisz nazwę\"\r\n                />\r\n            </div>\r\n            <Schedule\r\n                initSelections={expandSelection(initSlots)}\r\n                mode=\"select\"\r\n                actions={[{name: \"Utwórz\", cb: newSlots => onSelect({name, slots: newSlots})}]}\r\n            />\r\n        </form>\r\n    );\r\n}","import { fetchNews, useRemoteData } from \"./Remote\";\r\nimport './News.css';\r\n\r\nexport default function News() {\r\n    const infos = useRemoteData(fetchNews);\r\n    if (infos === null) {\r\n        return <div>Loading news...</div>\r\n    }\r\n    return (\r\n        <div className=\"content-box\" id=\"news-box\">\r\n            Aktualności\r\n            {infos.map(info => <div className=\"box-row\">\r\n                <h3>{info.title}</h3>\r\n                <div className=\"info-box\">\r\n                    {info.text}\r\n                </div>\r\n            </div>)}\r\n        </div>\r\n    );\r\n}","import React from \"react\"\r\nimport { Button, SearchBar } from \"./App\";\r\nimport { fetchWorkerInfo, fetchWorkers, useRemoteData } from \"./Remote\";\r\n\r\nexport default function Workers() {\r\n    const workers = useRemoteData(fetchWorkers);\r\n    const suggestions = React.useMemo(() => workers?.map(w => w.name), [workers]);\r\n    const [searched, setSearched] = React.useState(null);\r\n    const [worker, setWorker] = React.useState(null);\r\n    if (workers === null) {\r\n        return <div>Loading workers...</div>;\r\n    }\r\n    return (\r\n        <div className=\"content-box\">\r\n            Pracownicy\r\n            <SearchBar onSearch={function(str) {\r\n                setWorker(null);\r\n                setSearched(workers.filter(w => w.name.includes(str)));\r\n            }} suggestions={suggestions}/>\r\n            {worker?.text ?? searched?.map(w => <div key={w.id} className=\"content-row\">{w.name}<Button onClick={function() {\r\n                fetchWorkerInfo(w.id).then(setWorker);\r\n            }}>Wybierz</Button></div>)}\r\n        </div>\r\n    )\r\n}","import React from 'react';\r\nimport { GroupSelector } from \"./App\";\r\nimport { fetchGroupSchedule, pushRescheduleRequest } from './Remote';\r\nimport { Schedule } from \"./Schedule\";\r\n\r\nexport default function AdminSchedule() {\r\n    const [filteredClasses, setClasses] = React.useState(null);\r\n    const [groups, setGroups] = React.useState(null);\r\n    React.useEffect(() => groups === null || fetchGroupSchedule(groups).then(setClasses), [groups])\r\n    return (\r\n        <div className=\"content-box\">\r\n            <GroupSelector onSelect={setGroups}/>\r\n            {filteredClasses && <Schedule \r\n                initSchedule={filteredClasses}\r\n                permResched\r\n                mode={\"reschedule\"}\r\n                actions={[{\r\n                    name: \"Zmień\",\r\n                    cb: function(chng) {\r\n                        setClasses(null);\r\n                        pushRescheduleRequest(chng)\r\n                            .then(() => fetchGroupSchedule(groups)\r\n                            .then(setClasses));\r\n                    }\r\n                }]}\r\n            />}\r\n        </div>\r\n    )\r\n}","import React from 'react';\nimport ScheduleView from './Schedule';\nimport LogIn from './Login';\nimport NavBar from './Nav';\nimport CoursesList from './Courses';\nimport './App.css';\nimport Grades from './Grades';\nimport ReschedRequests from './ReschedRequests';\nimport Register from './Register';\nimport Polls from './Polls';\nimport News from './News';\nimport Workers from './Workers';\nimport { fetchGroups, useRemoteData } from './Remote';\nimport AdminSchedule from './AdminSchedule';\n\nexport const UserContext = React.createContext();\nexport const DispatchContext = React.createContext();\n\nfunction stateReducer(state, { action, data }) {\n    switch (action) {\n        case \"resize\":\n            return {...state, width: window.innerWidth};\n        case \"login\":\n            return {...state, user: data, content: <CoursesList/>};\n        case \"logout\":\n            return {...state, user: null, content: <LogIn/>};\n        case \"setContent\":\n            return {...state, content: data};\n    }\n}\n\nexport default function App() {\n    const [{ content, user, width }, dispatch] = React.useReducer(stateReducer, {\n        content: <LogIn/>,\n        user: null,\n        width: window.innerWidth\n    });\n\n    React.useEffect(function() {\n        let updateWidth = () => dispatch({action: \"resize\"});\n        window.addEventListener(\"resize\", updateWidth);     \n        return () => window.removeEventListener(\"resize\", updateWidth);\n    }, []);\n\n    return (\n        <DispatchContext.Provider value={dispatch}>\n        <UserContext.Provider value={user}>\n            <NavBar links={[\n                {name: \"Przedmioty\", view: <CoursesList/>},\n                {name: \"Plan zajęć\", view: <ScheduleView/>},\n                {name: \"Oceny\", view: <Grades/>},\n                {name: \"Zmiany grup\", view: <ReschedRequests/>, nNots: user ? 3 : undefined},\n                {name: \"Rejestracja\", view: <Register/>},\n                {name: \"Ankiety\", view: <Polls/>, nNots: user ? 10 : undefined},\n                {name: \"Aktualności\", view: <News/>},\n                {name: \"Pracownicy\", view: <Workers/>},\n                {name: \"Plan\", view: <AdminSchedule/>},\n            ]} windWidth={width}/>\n            <ContentBox>\n                {content}\n            </ContentBox>\n            <Footer/>\n        </UserContext.Provider>\n        </DispatchContext.Provider>\n    );\n}\n\nfunction ContentBox({ children }) {\n    return (\n        <div id=\"content\">\n            <div>\n                {children}\n            </div>\n        </div>\n    );\n}\n\nexport function Button({ onClick, children, submit, style }) {\n    const [clicked, setClicked] = React.useState(false);\n    return (\n        <button \n            className={\"button\" + (clicked ? \" button-clicked\" : \"\")} \n            onClick={onClick}\n            onMouseDown={() => setClicked(true)}\n            onMouseUp={() => setClicked(false)}\n            onMouseLeave={() => setClicked(false)}\n            type={submit ? \"submit\" : \"\"}\n            style={style}\n        >\n            <div className=\"bdummy\">{children}</div>\n            <div className={\"btext\"  + (clicked ? \" btext-clicked\" : \"\")}>{children}</div>\n        </button>\n    )\n}\n\nexport function SearchBar({ onSearch, suggestions }) {\n    const [searchVal, setVal] = React.useState(\"\");\n    const [focused, setFocused] = React.useState(false);\n    const [focusedSugg, setFocusedSugg] = React.useState(null);\n    const [showSugg, setShowSugg] = React.useState(true);\n    const fltrSuggerstions = React.useMemo(() => suggestions\n        ?.filter(sug => sug.includes(searchVal)),\n    [suggestions, searchVal])\n    return (\n        <form onSubmit={function(event) {\n            event.preventDefault();\n            onSearch(searchVal);\n        }} autoComplete='off'>\n            <div  className=\"search-bar\">\n                <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={searchVal}\n                    onChange={function(event) {\n                        setFocusedSugg(null);\n                        setVal(event.target.value);\n                        setShowSugg(true);\n                    }}\n                    onFocus={() => setFocused(true)}\n                    onBlur={() => setFocused(false)}\n                    onKeyDown={function(event) {\n                        switch(event.key) {\n                            case \"ArrowDown\":\n                                setFocusedSugg(i => Math.min((i ?? -1) + 1, fltrSuggerstions.length - 1));\n                                break;\n                            case \"ArrowUp\":\n                                setFocusedSugg(i => i === null || i === 0 ? null : i - 1);\n                                break;\n                            case \"Enter\":\n                                if (focusedSugg !== null) {\n                                    event.preventDefault();\n                                    setVal(fltrSuggerstions[focusedSugg]);\n                                    setFocusedSugg(null);\n                                    setShowSugg(false);\n                                }\n                        }\n                    }}\n                    required\n                    placeholder=\"Szukaj po nazwie\"\n                />\n                {focused && fltrSuggerstions && showSugg && (\n                    <div className=\"suggestions\">\n                        {fltrSuggerstions.map((sug, i) => <div key={i}\n                            className={\"suggestion\" + (i === focusedSugg ? \" focused-sugg\" : \"\")}\n                            onMouseDown={function() {\n                                setVal(sug);\n                                setFocusedSugg(null);\n                                setShowSugg(false);\n                            }}\n                        >{sug}</div>)}\n                    </div>\n                )}\n            </div>\n            <Button submit>Szukaj</Button>\n        </form>\n    );\n}\n\nfunction Footer() {\n    return (\n        <div id=\"footer\">\n            Studia 4 PAP-Z223\n        </div>\n    );\n}\n\nexport function usePopup() {\n    const [currElem, setElem] = React.useState(null);\n    return [currElem, function(elemGetter) {\n        return new Promise(function(resolve, reject) {\n            setElem(\n                <div className='pop-up'>\n                    <Button onClick={function() {\n                        setElem(null);\n                        reject(\"popup closed\");\n                    }}>X</Button>\n                    {elemGetter(function(data) {\n                        setElem(null);\n                        resolve(data);\n                    })}\n                </div>\n            );\n        })\n    }]\n}\n\nexport function GroupSelector({ onSelect }) {\n    const allGroups = useRemoteData(fetchGroups);\n    const [groups, setGroups] = React.useState([]);\n    const groupNames = React.useMemo(() => allGroups?.map(gr => gr.name), [allGroups]);\n    if (allGroups === null) {\n        return <div>Loading...</div>;\n    }\n    return (\n        <div>\n            <SearchBar onSearch={function(searchVal) {\n                const newGroups = [];\n                allGroups.forEach(function(grp) {\n                    if (grp.name.includes(searchVal)) {\n                        groups.includes(grp) || newGroups.push(grp);\n                    }\n                });\n                setGroups(g => [...g, ...newGroups]);\n            }} suggestions={groupNames}/>\n            {groups.map(grp => <div key={grp.id+grp.type}>{grp.name}<Button onClick={function() {\n                setGroups(function(g) {\n                    const cp = [...g];\n                    cp.splice(g.indexOf(grp), 1)\n                    return cp;\n                });\n            }}>X</Button></div>)}\n            <Button onClick={() => groups.length === 0 || onSelect(groups)}>Wybierz</Button>\n        </div>\n    )\n}\n\nexport function verifyClose(err) {\n    if (err !== \"popup closed\") {\n        throw err;\n    }\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}