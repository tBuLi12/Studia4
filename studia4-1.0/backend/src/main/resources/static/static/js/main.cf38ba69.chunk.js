(this.webpackJsonpstudia4=this.webpackJsonpstudia4||[]).push([[0],{24:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(18),i=n.n(a),o=n(7),s=n(3),u=n(2),l=n(19),d=n(6),j=(n(24),n(4)),f=n.n(j),b=n(5),h=n(13),p=n(14),O=n(15),v=n(16),m="http://"+document.location.host,x=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,"An error on the server prevented fetching resources")).name="ServerError",r.response=e,r}return n}(Object(v.a)(Error)),g=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,"A problem with the page's request prevented fetching resources")).name="ClientError",r.response=e,r}return n}(Object(v.a)(Error)),w=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).name="AuthenticationError",r}return n}(Object(v.a)(Error));function y(e){if(e.status<400)return null;if(401===e.status)throw new w("Not logged in");if(e.status<500)throw new g(e);throw new x(e)}function k(e,t){var n=c.a.useContext(Ke),r=c.a.useState(void 0),a=Object(s.a)(r,2),i=a[0],o=a[1],u=c.a.useCallback((function(){o(void 0),e().then(o,(function(e){return n({action:"error",data:e})}))}),[e,n]);return c.a.useEffect((function(){return(null===t||void 0===t||t)&&void 0===i&&u()}),[u,t,i]),[i,u,o]}function S(){return(S=Object(b.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("username",t),r.append("password",n),e.next=5,fetch(m+"/login",{method:"POST",body:r});case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return N.apply(this,arguments)}function N(){return(N=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(m+"/logged");case 4:if(401!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",!1);case 7:return y(t),e.next=10,t.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return R.apply(this,arguments)}function R(){return(R=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(m+"/courses");case 4:return y(t=e.sent),e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=Object(b.a)(f.a.mark((function e(t){var n,r,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return n=new URL(m+"/classes"),t&&n.searchParams.append("flag","alts"),e.next=6,fetch(n);case 6:return y(r=e.sent),e.next=10,r.json();case 10:return c=e.sent,a={},c.forEach((function(e){var t=e.name,n=e.id,r=e.roomNumber,c=e.class_type,i=e.timeSlotID;return a[n]={name:t,id:n,room:r,type:c,slot:i.toString()}})),t&&c.forEach((function(e){var t=e.id,n=e.alternatives;return a[t].alts=n.map((function(e){return{id:e.timeSlotID,clsId:e.classID}}))})),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return z.apply(this,arguments)}function z(){return(z=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{2:0,26:2,1:2});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return I.apply(this,arguments)}function I(){return(I=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("changes",JSON.stringify(t)),e.next=6,fetch(m+"/add-reschedule",{method:"POST",body:n});case 6:return y(e.sent),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(!0)}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e,t){return setTimeout((function(){return t(new x(null))}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("pollID",t),e.next=6,fetch(m+"/delete-poll",{method:"POST",body:n});case 6:return y(e.sent),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(f.a.mark((function e(t,n,r){var c,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(c=new FormData).append("name",t),c.append("slots",Array.from(n)),c.append("classIDs",r.map((function(e){return e.id}))),e.next=8,fetch(m+"/add-poll",{method:"POST",body:c});case 8:return y(a=e.sent),e.next=12,a.json();case 12:return i=e.sent,e.abrupt("return",{id:i.pollID,name:i.pollName});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:"0"},{name:"SOI",id:"2",slots:[1,2,5]},{name:"PAP",id:"3"},{name:"PROB",id:"4"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(b.a)(f.a.mark((function e(t){var n,r,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new URL(m+"/poll-result")).searchParams.append("pollID",t),e.next=6,fetch(n);case 6:return y(r=e.sent),e.next=10,r.json();case 10:return c=e.sent,a={},c.forEach((function(e){return a[e.slotId]=e.rating})),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(b.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(r=new FormData).append("pollId",t),r.append("slotIds",Object.keys(n)),r.append("ratings",Object.values(n)),e.next=8,fetch(m+"/vote-poll",{method:"POST",body:r});case 8:return y(e.sent),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return _.apply(this,arguments)}function _(){return(_=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",grade:3},{name:"SOI",grade:-10}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"0",cls:{name:"WSI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Jeremi Sobierski",to:"3"},{id:"1",cls:{name:"SOI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Karol Orzechowski",to:"25"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return $.apply(this,arguments)}function $(){return($=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(m+"/polls");case 4:return y(t=e.sent),e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n.map((function(e){return{name:e.pollName,id:e.pollID}})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(b.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(t=new URL(m+"/classes")).searchParams.append("flag","all"),e.next=6,fetch(t);case 6:return y(n=e.sent),e.next=10,n.json();case 10:return e.abrupt("return",e.sent.map((function(e){var t=e.name,n=e.id;return{name:t+" "+e.class_type,id:n}})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(b.a)(f.a.mark((function e(t){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("classIDs",t.map((function(e){return e.id}))),e.next=6,fetch(m+"/intersect",{method:"POST",body:n});case 6:return y(r=e.sent),c={},e.next=11,r.json();case 11:return e.sent.forEach((function(e){return c[e]=!0})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:{name:"WSI",slot:"2",room:"98",id:"0",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},1:{name:"SI",slot:"2",room:"98",id:"1",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},2:{name:"Wsi",slot:"2",room:"11",id:"2",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},3:{name:"nji",slot:"10",room:"98",id:"3",type:"Laboratorium"}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:3,22:4});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return se.apply(this,arguments)}function se(){return(se=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{title:"Som news",text:"yyyyyyysapidfj aijsd 0iasj d0asdjo asj"},{title:"Hee",text:"0aijsdiwef0u82hgfy23h8irj1jkfi0owshdfsgbfhidb"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"Ewa S.",id:"0"},{name:"Peter Gawkuu",id:"1"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:"Jakie\u015b info o panu pracowniku"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(26);var je=n(0);function fe(){var e=k(X),t=Object(s.a)(e,1)[0],n=k(E),r=Object(s.a)(n,1)[0],a=k(M),i=Object(s.a)(a,1)[0],o=k(L),l=Object(s.a)(o,1)[0],d=at(),j=Object(s.a)(d,2),f=j[0],b=j[1],h=c.a.useState(null),p=Object(s.a)(h,2),O=p[0],v=p[1],m=c.a.useMemo((function(){return function(e){if(void 0===e)return;var t=new Set;return e.forEach((function(e){return t.add(e.id)})),t}(r)}),[r]);if(void 0===t||void 0===m||void 0===l)return Object(je.jsx)("div",{children:"Loading subjects..."});var x={show:b,schedule:i,ratings:l},g=null!==O&&void 0!==O?O:t;return Object(je.jsxs)("div",{className:"content-box",children:["Rejestracja",Object(je.jsx)(nt,{onSearch:function(e){return v(t.filter((function(t){return t.name.includes(e)})))}}),null!==O&&Object(je.jsx)(tt,{onClick:function(){return v(null)},children:"Wyczy\u015b\u0107"}),g.map((function(e){return Object(je.jsx)(be,Object(u.a)({sbj:e,alReg:m.has(e.id)},x))})),f]})}function be(e){var t=e.sbj,n=e.ratings,r=e.alReg,a=e.show,i=e.schedule,o=c.a.useContext(Ke),s=c.a.useMemo((function(){if(void 0!==t.slots){var e={};return t.slots.forEach((function(t){return e[t]=!0})),e}}),[t]);return Object(je.jsxs)("div",{className:"box-row",children:[Object(je.jsx)("div",{children:t.name}),r?Object(je.jsx)("div",{className:"resched-side-text",children:"Zarejestrowano"}):Object(je.jsxs)("div",{children:[s&&Object(je.jsx)("div",{className:"indicator",style:{backgroundColor:Oe(he(t.slots,n))}}),Object(je.jsx)(tt,{onClick:function(){(s?a((function(e){return Object(je.jsx)(ye,{title:"Wybierz termin",initSchedule:i,initSelections:s,mode:"select",onSelect:e})})).then((function(e){return function(e,t){return q.apply(this,arguments)}(t.id,e)}),ot):function(e){return U.apply(this,arguments)}(t.id)).catch((function(e){return o({action:"popupError",data:e})}))},children:"Zarejestruj"})]})]})}function he(e,t){var n=e.map((function(e){return t[e]})).filter((function(e){return void 0!==e})).sort().reverse();return pe(.8,1,n.length).map((function(e,t){return e*n[t]})).reduce((function(e,t){return e+t}))/6}function pe(e,t,n){return 0===n?[]:[t*e].concat(Object(o.a)(pe(e,t*(1-e),n-1)))}function Oe(e){return"rgb(".concat(Math.floor(Math.min(255,512*(1-e))),", ").concat(Math.floor(Math.min(255,512*e)),", 0)")}var ve=["8:15","10:15","12:15","14:15","16:15","18:15"],me=["poniedzialek","wtorek","sroda","czwartek","piatek"];function xe(e,t){return(1+ve.indexOf(t)+6*me.indexOf(e)).toString()}function ge(e){return me[Math.floor((e-1)/6)]+" "+ve[(e-1)%6]}function we(e,t){var n,r=t.action,c=t.data;switch(r){case"drag":return Object(u.a)(Object(u.a)({},e),{},{dragged:c});case"endDrag":for(var a=c.x,i=c.y,o=c.id,l=null,j=0,f=Object.entries(e.dropSlots.current);j<f.length;j++){var b=Object(s.a)(f[j],2),h=b[0];if((0,b[1])(a,i)){(l=JSON.parse(JSON.stringify(e.schedule)))[o].resched=h,l[o].slot===h&&delete l[o].resched;break}}return Object(u.a)(Object(u.a)({},e),{},{dragged:null,schedule:null!==(n=l)&&void 0!==n?n:e.schedule});case"toggleSelect":return Object(u.a)(Object(u.a)({},e),{},{selections:Object(u.a)(Object(u.a)({},e.selections),{},Object(d.a)({},c,!e.selections[c]))});case"rerate":return Object(u.a)(Object(u.a)({},e),{},{ratings:Object(u.a)(Object(u.a)({},e.ratings),{},Object(d.a)({},c.slot,c.rating))});case"setSchedule":return Object(u.a)(Object(u.a)({},e),{},{schedule:c});case"setSelections":return Object(u.a)(Object(u.a)({},e),{},{selections:c});case"setRatings":return Object(u.a)(Object(u.a)({},e),{},{ratings:c});default:return e}}function ye(e){var t=e.initSchedule,n=e.initRatings,r=e.initSelections,a=e.onSelect,i=e.disabledSlots,o=e.mode,d=e.actions,j=e.permResched,f=e.setDataPusher,b=e.title,h=c.a.useRef({}),p=c.a.useContext(Qe),O=c.a.useCallback((function(e,t,n){return n?delete h.current[e]:h.current[e]=t}),[]),v=c.a.useRef(),m=c.a.useReducer(we,{schedule:t,selections:r,ratings:n,dragged:null,dropSlots:h}),x=Object(s.a)(m,2),g=x[0],w=g.schedule,y=g.selections,k=g.ratings,S=g.dragged,C=x[1];c.a.useEffect((function(){return C({action:"setSchedule",data:t})}),[t]),c.a.useEffect((function(){return C({action:"setSelections",data:r})}),[r]),c.a.useEffect((function(){return C({action:"setRatings",data:n})}),[n]);var N=c.a.useMemo((function(){return function(e,t,n){if(void 0===e)return{};for(var r={},c=0,a=Object.entries(e);c<a.length;c++){var i,o,l,d,j,f=Object(s.a)(a[c],2),b=f[0],h=f[1];t?b!==n&&(null!==(i=r[null!==(o=h.resched)&&void 0!==o?o:h.slot])&&void 0!==i?i:r[null!==(l=h.resched)&&void 0!==l?l:h.slot]=[]).push(h):((null!==(d=r[h.slot])&&void 0!==d?d:r[h.slot]=[]).push(h),h.resched&&(null!==(j=r[h.resched])&&void 0!==j?j:r[h.resched]=[]).push(Object(u.a)(Object(u.a)({},h),{},{pend:!0})))}return r}(w,j,null===S||void 0===S?void 0:S.disId)}),[w,j,S]),E={mode:o,dispatch:C,registerDropSlot:O,onSelect:a,borderRef:v},R={reschedule:function(){return function(e,t){for(var n={},r=0,c=Object.entries(t);r<c.length;r++){var a,i,o=Object(s.a)(c[r],2),u=o[0],d=o[1];if((null!==(a=d.resched)&&void 0!==a?a:d.slot)!==(null!==(i=e[u].resched)&&void 0!==i?i:e[u].slot)){var j,f,b=null!==(j=d.resched)&&void 0!==j?j:d.slot,h=Object(l.a)(d.alts);try{for(h.s();!(f=h.n()).done;){var p=f.value,O=p.clsId;if(b===p.id){n[u]=O;break}}}catch(v){h.e(v)}finally{h.f()}}}return n}(t,w)},select:function(){return function(e){for(var t=new Set,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(s.a)(r[n],2),a=c[0];c[1]&&t.add(a)}return t}(y)},rate:function(){return k}}[o];return c.a.useEffect((function(){return null===f||void 0===f?void 0:f(R)})),p<700?Object(je.jsxs)("div",{id:"schedule",className:"content-box",style:{overflow:"hidden"},children:[b,Object(je.jsx)("div",{id:"scheduleborder",ref:v,children:Object(je.jsx)("div",{id:"daylist-box",children:Object(je.jsx)("ul",{id:"daylist",children:me.map((function(e){return Object(je.jsx)("li",{children:Object(je.jsxs)("ul",{className:"daycolumn",children:[e,ve.map((function(t){var n=xe(e,t);return Object(je.jsx)(Se,Object(u.a)({slot:n,cls:N[n],selected:null===y||void 0===y?void 0:y[n],rating:null===k||void 0===k?void 0:k[n],droppable:j?"all":null===S||void 0===S?void 0:S.drops.includes(n),disabled:null===i||void 0===i?void 0:i.has(n)},E),n)}))]})},e)}))})})}),null===S||void 0===S?void 0:S.elem,null===d||void 0===d?void 0:d.map((function(e,t){var n;return Object(je.jsx)(tt,Object(u.a)(Object(u.a)({},null!==(n=e.btProps)&&void 0!==n?n:{}),{},{onClick:function(){return e.cb(R())},children:e.name}),t)}))]}):Object(je.jsxs)("div",{id:"schedule",className:"content-box",children:[b,Object(je.jsx)("div",{id:"scheduleborder",ref:v,children:Object(je.jsxs)("ul",{id:"daylist",children:[Object(je.jsx)("li",{children:Object(je.jsx)(ke,{})}),me.map((function(e){return Object(je.jsx)("li",{children:Object(je.jsxs)("ul",{className:"daycolumn",children:[e,ve.map((function(t){var n=xe(e,t);return Object(je.jsx)(Se,Object(u.a)({slot:n,cls:N[n],selected:null===y||void 0===y?void 0:y[n],rating:null===k||void 0===k?void 0:k[n],droppable:j?"all":null===S||void 0===S?void 0:S.drops.includes(n),disabled:null===i||void 0===i?void 0:i.has(n)},E),n)}))]})},e)})),Object(je.jsx)("li",{children:Object(je.jsx)(ke,{})})]})}),null===S||void 0===S?void 0:S.elem,null===d||void 0===d?void 0:d.map((function(e,t){var n;return Object(je.jsx)(tt,Object(u.a)(Object(u.a)({},null!==(n=e.btProps)&&void 0!==n?n:{}),{},{onClick:function(){return e.cb(R())},children:e.name}),t)}))]})}function ke(){return Object(je.jsxs)("ul",{className:"hourlegend",children:["\xa0",[8,10,12,14,16,18].map((function(e){return Object(je.jsx)("li",{children:e+":15"},e)}))]})}function Se(e){var t=e.cls,n=e.slot,r=e.mode,a=e.dispatch,i=e.registerDropSlot,o=e.selected,s=e.onSelect,l=e.rating,d=e.droppable,j=e.disabled,f=e.borderRef,b=c.a.useRef(),h={mode:r,dispatch:a,rating:l,borderRef:f};c.a.useEffect((function(){if(d)return i(n,(function(e,t){var n=b.current.getBoundingClientRect();return t>n.top&&t<n.bottom&&e>n.left&&e<n.right}),!1),function(){return i(n,null,!0)}}),[n,i,d]);var p=null;void 0!==l?p=Object(je.jsx)(Re,Object(u.a)(Object(u.a)({},h),{},{slot:n,cls:t})):void 0!==t&&0!==t.length&&(p=1===t.length?Object(je.jsx)(Ce,Object(u.a)(Object(u.a)({},h),{},{cls:t[0]})):Object(je.jsx)(Ee,Object(u.a)(Object(u.a)({},h),{},{cls:t})));var O={};"select"===r&&void 0!==o&&(O.onClick=function(){a({action:"toggleSelect",data:n}),null===s||void 0===s||s(n)});var v="class-box";return!0===d||o?v=v.concat(j?" selected-disabled":" highlight"):j&&(v=v.concat(" disabled-slot")),Object(je.jsx)("li",Object(u.a)(Object(u.a)({className:v},O),{},{ref:b,children:p}))}function Ce(e){var t,n=null!==(t=e.width)&&void 0!==t?t:100,r=c.a.useState({prevW:100}),a=Object(s.a)(r,2),i=a[0],o=i.text,l=i.prevW,d=a[1];c.a.useLayoutEffect((function(){var t;if(t=n>=65?Object(je.jsxs)(je.Fragment,{children:[e.cls.name,Object(je.jsx)("br",{}),e.cls.type,Object(je.jsx)("br",{}),"Sala: ",e.cls.room]}):n>18?Object(je.jsx)(je.Fragment,{children:e.cls.name.split("").map((function(e){return Object(je.jsxs)(je.Fragment,{children:[e,Object(je.jsx)("br",{})]})}))}):Object(je.jsx)(je.Fragment,{children:"I"}),n>l){var r=setTimeout((function(){return d({text:t,prevW:n})}),100);return function(){return clearTimeout(r)}}d({text:t,prevW:n})}),[n,l,e.cls.name,e.cls.type,e.cls.room]);var j={};"reschedule"===e.mode&&(j.onMouseDown=function(t){var n;t.preventDefault();var r=t.currentTarget.getBoundingClientRect(),c={x:r.x+window.scrollX-t.pageX,y:r.y+window.scrollY-t.pageY};null===(n=e.dispatch)||void 0===n||n.call(e,{action:"drag",data:{elem:Object(je.jsx)(Ne,{cls:e.cls,initPos:{x:t.pageX,y:t.pageY},offset:c,dispatch:e.dispatch,borderRef:e.borderRef}),drops:e.cls.alts.map((function(e){return e.id})),disId:e.cls.id}})});var f=e.cls.pend?{opacity:.5}:{};return Object(je.jsx)("div",Object(u.a)(Object(u.a)({className:e.cls.type},j),{},{style:f,children:o}))}function Ne(e){var t,n,r=e.initPos,a=e.cls,i=e.offset,o=i.x,u=i.y,l=e.dispatch,d=e.borderRef,j=c.a.useRef(),f=function(e){var t=c.a.useState(e),n=Object(s.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){function e(e){a({x:e.pageX,y:e.pageY})}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),r}(r),b=f.x,h=f.y,p=null!==(t=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0},O=p.width,v=p.height,m=d.current.getBoundingClientRect(),x=m.top,g=m.left,w=m.bottom,y=m.right,k=Math.min(Math.max(b+o,g+window.scrollX),y+window.scrollX-O),S=Math.min(Math.max(h+u,x+window.scrollY),w+window.scrollY-v);return Object(je.jsx)("div",{className:"class-box dragged-class",style:{left:k,top:S},ref:j,onMouseUp:function(){var e=j.current.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.left,c=e.right;l({action:"endDrag",data:{y:(t+n)/2,x:(r+c)/2,id:a.id}})},children:Object(je.jsx)(Ce,{cls:a})})}function Ee(e){var t=e.cls,n=e.mode,r=e.dispatch,a=e.borderRef,i=100/t.length,o=35/(t.length-1),l=c.a.useRef(),d=c.a.useState(null),j=Object(s.a)(d,2),f=j[0],b=j[1];return c.a.useEffect((function(){function e(e){var t=e.clientX,n=e.clientY,r=l.current.getBoundingClientRect(),c=r.top,a=r.bottom,i=r.left,o=r.right;(n<c||n>a||t<i||t>o)&&b(null)}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),Object(je.jsx)("div",{ref:l,style:{height:"100%"},onMouseLeave:function(){return b(null)},children:t.map((function(e,t){var c=null===f?i:t===f?65:o,s={cls:e,width:c,mode:n,dispatch:r,borderRef:a};return Object(je.jsx)("div",{className:"shrunk-box",onMouseEnter:function(){return b(t)},style:{maxWidth:"".concat(c,"%")},children:Object(je.jsx)(Ce,Object(u.a)({},s))},t)}))})}function Re(e){var t=e.dispatch,n=e.slot,r=e.rating,a=e.mode,i=e.cls,o=e.borderRef,l=c.a.useState(!1),d=Object(s.a)(l,2),j=d[0],f=d[1],b=null;if(b="rate"!==a?Object(je.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(Oe(r/6)),width:"100%"},children:r}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(Oe(r/6))},children:r}),Object(je.jsxs)("div",{className:"rater-button-box",children:[Object(je.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.min(6,r+1)}})},children:"+"}),Object(je.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.max(0,r-1)}})},children:"-"})]})]}),i){var h={mode:a,borderRef:o,dispatch:t},p=1===i.length?Object(je.jsx)(Ce,Object(u.a)(Object(u.a)({},h),{},{cls:i[0]})):Object(je.jsx)(Ee,Object(u.a)(Object(u.a)({},h),{},{cls:i}));return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{className:"rater",style:{maxHeight:j?"0":"62%"},children:b}),Object(je.jsx)("div",{style:{height:"100%"},onClick:function(){return f((function(e){return!e}))},onMouseLeave:function(){return f(!1)},children:p})]})}return Object(je.jsx)("div",{className:"rater",children:b})}var Me=function(){var e=c.a.useContext(Ke),t=c.a.useState("view"),n=Object(s.a)(t,2),r=n[0],a=n[1],i=c.a.useState({schedule:void 0,hasAlts:!1}),o=Object(s.a)(i,2),l=o[0],d=l.schedule,j=l.hasAlts,f=o[1],b=k(L,"rate"===r),h=Object(s.a)(b,3),p=h[0],O=h[1],v=h[2];if(c.a.useEffect((function(){"reschedule"===r?(void 0===d||!j)&&M(!0).then((function(e){f({schedule:e,hasAlts:!0})}),(function(t){return e({action:"error",data:t})})):void 0===d&&M().then((function(e){return f({schedule:e,hasAlts:!1})}),(function(t){return e({action:"error",data:t})}))}),[d,j,r,e]),!d||"rate"===r&&void 0===p||"reschedule"===r&&!j)return Object(je.jsx)("div",{children:"Loading content..."});var m=[],x={actions:m,mode:r,title:"Plan Zaj\u0119\u0107"};return"reschedule"===r?m.push({name:"Zaporoponuj zmiany",cb:function(t){a("view"),f({schedule:null,hasAlts:!1}),D(t).then((function(){return M()})).then((function(e){return f({schedule:e,hasAlts:!1})}),(function(t){return e({action:"error",data:t})}))}}):"rate"===r&&(m.push({name:"Zapisz",cb:function(t){a("view"),v(void 0),function(e){return W.apply(this,arguments)}(t).then(O,(function(t){return e({action:"popupError",data:t})}))}}),x.initRatings=p),Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ye,Object(u.a)({initSchedule:d},x)),Object(je.jsxs)("div",{children:[Object(je.jsx)(tt,{onClick:function(){return a("view")},children:"Plan"}),Object(je.jsx)(tt,{onClick:function(){return a("reschedule")},children:"Zmiana Grup"}),Object(je.jsx)(tt,{onClick:function(){return a("rate")},children:"Dogodno\u015b\u0107 Godzin"})]})]})};n(28);function Pe(){var e=c.a.useContext(Ke),t=c.a.useState(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=c.a.useState(""),o=Object(s.a)(i,2),u=o[0],l=o[1],d=c.a.useState(!1),j=Object(s.a)(d,2),f=j[0],b=j[1];return Object(je.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return S.apply(this,arguments)}(r,u).then(C).then((function(t){t?e({action:"login",data:t}):b(!0)}),(function(t){return e({action:"error",data:t})}))},children:[Object(je.jsx)("input",{type:"text",name:"name",value:r,onChange:function(e){a(e.target.value)},required:!0,placeholder:"Login"}),Object(je.jsx)("br",{}),Object(je.jsx)("input",{type:"password",name:"password",value:u,onChange:function(e){l(e.target.value)},required:!0,placeholder:"Has\u0142o"}),Object(je.jsx)("br",{}),Object(je.jsx)(tt,{submit:!0,children:"Log in"}),f&&Object(je.jsx)("div",{className:"invalid-cred",children:"Invalid credentials"})]})}function Le(e){var t=e.user,n=c.a.useContext(Ke);return t?Object(je.jsx)("span",{style:{float:"right"},onClick:function(){return n({action:"logout"})},children:"Log out"}):Object(je.jsx)("span",{style:{float:"right"},onClick:function(){n({action:"setContent",data:Object(je.jsx)(Pe,{})})},children:"Log in"})}n(29);function ze(e){var t=e.children,n=e.view,r=e.nNots,a=c.a.useContext(Ke);return Object(je.jsxs)("span",{onClick:function(){return a({action:"setContent",data:n})},children:[t,r&&Object(je.jsx)("div",{className:"notifIndicator",children:r})]})}function De(e){var t=e.toggle;return Object(je.jsx)("span",{onClick:t,children:"O"})}function Ie(e){var t=e.links,n=e.windWidth,r=e.user,a=c.a.useState(!1),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(je.jsx)("div",{children:"You must be logged in to view this content"});return n<900?Object(je.jsxs)("nav",{className:"small-nav",children:[Object(je.jsx)("div",{style:{display:o?"block":"none"},children:t.map((function(e,t){return Object(je.jsx)(ze,{view:r?e.view:l,stack:!0,nNots:e.nNots,children:e.name},t)}))}),Object(je.jsx)(De,{toggle:function(){u((function(e){return!e}))}}),Object(je.jsx)(Le,{user:r})]}):Object(je.jsxs)("nav",{children:[Object(je.jsx)(Le,{user:r}),t.map((function(e,t){return Object(je.jsx)(ze,{view:r?e.view:l,stack:!1,nNots:e.nNots,children:e.name},t)}))]})}n(30);function We(e){return"blablabla info o ".concat(e)}function Fe(e){var t=c.a.useState(""),n=Object(s.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(We(e.name))}),[e.name]),Object(je.jsxs)("div",{children:[Object(je.jsx)("h2",{children:e.name}),r]})}function Ae(e){var t=c.a.useState(""),n=Object(s.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(We(e.name))}),[e.name]),Object(je.jsx)("div",{children:r})}function Te(e){var t=c.a.useState(!1),n=Object(s.a)(t,2),r=n[0],a=n[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{className:"course",onClick:function(){a((function(e){return!e}))},children:e.name}),Object(je.jsxs)("div",{className:"course-menu",style:{maxHeight:r?"3em":"0"},children:[Object(je.jsx)(ze,{view:Object(je.jsx)(Fe,{name:e.name}),children:"Strona przedmiotu"}),Object(je.jsx)(ze,{view:Object(je.jsx)(Ae,{name:e.maitainerName}),children:"Strona prowadz\u0105cego"})]})]})}var Ze=function(){var e=k(E),t=Object(s.a)(e,1)[0];return void 0===t?Object(je.jsx)("div",{children:"Loading content..."}):Object(je.jsxs)("div",{id:"courses",className:"content-box",children:["Moje Przedmioty",t.map((function(e){return Object(je.jsx)(Te,{name:e.name},e.id)}))]})};n(31),n(32);function Be(){var e=k(H),t=Object(s.a)(e,1)[0];return void 0===t?Object(je.jsx)("div",{children:"Loading grades..."}):Object(je.jsxs)("div",{className:"content-box",children:["Moje oceny",t.map((function(e){return Object(je.jsxs)("div",{className:"box-row",children:[Object(je.jsxs)("div",{children:[e.name,":"]}),Object(je.jsx)("div",{className:"grade",children:e.grade})]})}))]})}n(33);function Ue(){var e=k(K),t=Object(s.a)(e,3),n=t[0],r=(t[1],t[2]),a=c.a.useCallback((function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))}),[r]);return void 0===n?Object(je.jsx)("div",{children:"Loading requests..."}):Object(je.jsxs)("div",{className:"content-box",children:["Pro\u015bby o zmiany grup",n.map((function(e){return Object(je.jsx)(qe,Object(u.a)(Object(u.a)({},e),{},{del:a}),e.id)}))]})}function qe(e){var t=e.id,n=e.stud,r=e.cls,a=e.to,i=e.del,o=c.a.useState(!1),u=Object(s.a)(o,2),l=u[0],d=u[1],j=c.a.useContext(Ke);return Object(je.jsxs)("div",{className:"box-row",children:[Object(je.jsxs)("div",{className:"request-text",children:[r.name," ",r.type,",",Object(je.jsx)("br",{}),n,",",Object(je.jsx)("br",{}),"na ",ge(a)]}),Object(je.jsx)("div",{className:"request-buttons",children:l?Object(je.jsx)("div",{className:"request-text",children:"przetwarzanie..."}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(tt,{onClick:function(){d(!0),function(e){return F.apply(this,arguments)}(t).then((function(){return i(t)}),(function(e){d(!1),j({action:"popupError",data:e})}))},children:"Zaakceptuj"}),Object(je.jsx)(tt,{onClick:function(){d(!0),function(e){return A.apply(this,arguments)}(t).then((function(){return i(t)}),(function(e){d(!1),j({action:"popupError",data:e})}))},children:"Odrzu\u0107"})]})})]})}function Xe(e){var t=e.user,n=c.a.useContext(Ke),r="ROLE_STUDENT"===t.position,a=k(V),i=Object(s.a)(a,3),l=i[0],j=(i[1],i[2]),h=at(),p=Object(s.a)(h,2),O=p[0],v=p[1],m=c.a.useCallback((function(e){(function(e){return J.apply(this,arguments)})(e).then((function(e){var t=Object.entries(e).reduce((function(e,t){return e[1]>t[1]?e:t}))[0];return v((function(){return Object(je.jsx)(ye,{title:"Wynik ankiety",initRatings:e,initSelections:Object(d.a)({},t,!0),mode:"view"})}))})).catch(ot).catch((function(e){return n({action:"popupError",data:e})}))}),[v,n]),x=c.a.useCallback((function(e){(function(e){return ie.apply(this,arguments)})(e).then((function(e){return v((function(t){return Object(je.jsx)(ye,{initRatings:e,mode:"rate",actions:[{name:"G\u0142osuj",cb:t}]})}))})).then((function(t){return function(e,t){return G.apply(this,arguments)}(e,t)}),ot).catch((function(e){return n({action:"popupError",data:e})}))}),[v,n]),g=c.a.useCallback((function(){v((function(e){return Object(je.jsx)(it,{onSelect:e})})).then(function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(t);case 2:return n=e.sent,e.next=5,v((function(e){return Object(je.jsx)(Je,{onSelect:e,initSlots:n})})).catch(ot);case 5:return r=e.sent,c=r.name,a=r.slots,e.next=10,Z(c,a,t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return j((function(t){return[].concat(Object(o.a)(t),[e])}))}),(function(e){return n({action:"popupError",data:e})}))}),[v,j,n]),w=c.a.useCallback((function(e){(function(e){return T.apply(this,arguments)})(e).then((function(){return j((function(t){return t.filter((function(t){return t.id!==e}))}))}),(function(e){return n({action:"popupError",data:e})}))}),[j,n]);return void 0===l?Object(je.jsx)("div",{children:"Loading polls..."}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("div",{className:"content-box",children:["Ankiety",l.map((function(e){return Object(je.jsx)(Ye,Object(u.a)(Object(u.a)({},e),{},{resolve:m,remove:w,vote:r?x:null}),e.id)}))]}),r||Object(je.jsx)("div",{children:Object(je.jsx)(tt,{onClick:g,children:"Dodaj"})}),O]})}function Ye(e){var t=e.id,n=e.name,r=e.voted,c=e.resolve,a=e.remove,i=e.vote;return Object(je.jsxs)("div",{className:"box-row",children:[Object(je.jsx)("div",{children:n}),Object(je.jsx)("div",{children:i?Object(je.jsxs)(je.Fragment,{children:[r&&"Zag\u0142osowano",Object(je.jsx)(tt,{onClick:function(){return i(t)},children:"G\u0142osuj"})]}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(tt,{onClick:function(){return c(t)},children:"Wynik"}),Object(je.jsx)(tt,{onClick:function(){return a(t)},children:"Zako\u0144cz"})]})})]})}function Je(e){var t=e.onSelect,n=e.initSlots,r=c.a.useRef(),a=c.a.useMemo((function(){var e=function(e){var t={};return Array.from(Array(30).keys()).forEach((function(e){t[e+1]=!1})),Object(u.a)(Object(u.a)({},t),e)}(n),t=new Set;return Object.keys(e).forEach((function(e){return e in n||t.add(e)})),[e,t]}),[n]),i=Object(s.a)(a,2),o=i[0],l=i[1],d=c.a.useRef(null),j=c.a.useState(""),f=Object(s.a)(j,2),b=f[0],h=f[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{style:{marginBottom:"0.5em"},children:Object(je.jsx)("form",{id:"slot-selector-form",className:"search-bar",onSubmit:function(e){e.preventDefault(),t({name:b,slots:d.current()})},children:Object(je.jsx)("div",{children:Object(je.jsx)("input",{type:"text",value:b,onChange:function(e){return h(e.target.value)},required:!0,placeholder:"Wpisz nazw\u0119"})})})}),Object(je.jsx)("div",{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.focus({preventScroll:!0})},children:Object(je.jsx)(ye,{initSelections:o,disabledSlots:l,mode:"select",setDataPusher:function(e){return function(){return d.current=e}}})}),Object(je.jsx)("div",{children:Object(je.jsx)(tt,{ref:r,form:"slot-selector-form",submit:!0,children:"Utw\xf3rz"})})]})}n(34);function Ge(){var e=k(oe),t=Object(s.a)(e,1)[0];return void 0===t?Object(je.jsx)("div",{children:"Loading news..."}):Object(je.jsxs)("div",{className:"content-box",id:"news-box",children:["Aktualno\u015bci",t.map((function(e){return Object(je.jsx)("div",{className:"box-row",children:Object(je.jsxs)("div",{style:{display:"block"},children:[Object(je.jsx)("h3",{children:e.title}),Object(je.jsx)("div",{className:"info-box",children:e.text})]})})}))]})}function He(){var e,t=c.a.useContext(Ke),n=k(ue),r=Object(s.a)(n,1)[0],a=c.a.useMemo((function(){return null===r||void 0===r?void 0:r.map((function(e){return e.name}))}),[r]),i=c.a.useState(null),o=Object(s.a)(i,2),u=o[0],l=o[1],d=c.a.useState(null),j=Object(s.a)(d,2),f=j[0],b=j[1];return void 0===r?Object(je.jsx)("div",{children:"Loading workers..."}):Object(je.jsxs)("div",{className:"content-box",children:["Pracownicy",Object(je.jsx)(nt,{onSearch:function(e){b(null),l(r.filter((function(t){return t.name.includes(e)})))},suggestions:a}),null!==(e=null===f||void 0===f?void 0:f.text)&&void 0!==e?e:null===u||void 0===u?void 0:u.map((function(e){return Object(je.jsxs)("div",{className:"content-row",children:[e.name,Object(je.jsx)(tt,{onClick:function(){(function(e){return de.apply(this,arguments)})(e.id).then(b,(function(e){return t({action:"error",data:e})}))},children:"Wybierz"})]},e.id)}))]})}function _e(){var e=c.a.useState(null),t=Object(s.a)(e,2),n=t[0],r=t[1],a=c.a.useState(null),i=Object(s.a)(a,2),o=i[0],u=i[1];return c.a.useEffect((function(){return null===o||ce(o).then(r)}),[o]),Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{className:"content-box",children:Object(je.jsx)(it,{onSelect:u})}),Object(je.jsx)("br",{}),n&&Object(je.jsx)(ye,{initSchedule:n,permResched:!0,mode:"reschedule",actions:[{name:"Zmie\u0144",cb:function(e){r(null),D(e).then((function(){return ce(o).then(r)}))}}]})]})}var Ke=c.a.createContext(),Qe=c.a.createContext();function Ve(e,t){var n=t.action,r=t.data;switch(n){case"resize":return Object(u.a)(Object(u.a)({},e),{},{width:window.innerWidth});case"login":return Object(u.a)(Object(u.a)({},e),{},{user:r,content:Object(je.jsx)(Ge,{})});case"logout":return Object(u.a)(Object(u.a)({},e),{},{user:null,content:Object(je.jsx)(Pe,{})});case"setContent":return Object(u.a)(Object(u.a)({},e),{},{content:r});case"error":return Object(u.a)(Object(u.a)({},e),{},{content:Object(je.jsx)("div",{children:r.message})});case"popupError":return Object(u.a)(Object(u.a)({},e),{},{popup:Object(je.jsx)("div",{children:r.message})});case"closePopup":return Object(u.a)(Object(u.a)({},e),{},{popup:null});case"setUser":return Object(u.a)(Object(u.a)({},e),{},{user:r});default:return e}}function $e(){var e=c.a.useReducer(Ve,{content:null,user:void 0,width:window.innerWidth,popup:null}),t=Object(s.a)(e,2),n=t[0],r=n.content,a=n.user,i=n.width,o=n.popup,u=t[1];c.a.useEffect((function(){var e=function(){return u({action:"resize"})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),c.a.useEffect((function(){void 0===a&&(u({action:"setUser",data:null}),C().then((function(e){return u(!1===e?{action:"setContent",data:Object(je.jsx)(Pe,{})}:{action:"login",data:e})})).catch((function(e){return u({action:"error",data:e})})))}),[a]);var l=[{name:"Plan zaj\u0119\u0107",view:Object(je.jsx)(Me,{})},{name:"Ankiety",view:Object(je.jsx)(Xe,{user:a}),nNots:a?10:void 0},{name:"Aktualno\u015bci",view:Object(je.jsx)(Ge,{})},{name:"Pracownicy",view:Object(je.jsx)(He,{})}];return a&&(a.position,l.push.apply(l,[{name:"Oceny",view:Object(je.jsx)(Be,{})},{name:"Przedmioty",view:Object(je.jsx)(Ze,{})},{name:"Rejestracja",view:Object(je.jsx)(fe,{})}]),l.push({name:"Zmiany grup",view:Object(je.jsx)(Ue,{}),nNots:a?3:void 0}),a.security,l.push({name:"Plan",view:Object(je.jsx)(_e,{})})),Object(je.jsx)(Qe.Provider,{value:i,children:Object(je.jsxs)(Ke.Provider,{value:u,children:[Object(je.jsx)(Ie,{links:l,windWidth:i,user:a}),Object(je.jsx)(et,{children:void 0===a?Object(je.jsx)("div",{children:"Loading..."}):r}),o&&Object(je.jsx)(ct,{close:function(){return u({action:"closePopup"})},children:o}),Object(je.jsx)(rt,{})]})})}function et(e){var t=e.children;return Object(je.jsx)("div",{id:"content",children:Object(je.jsx)("div",{children:t})})}var tt=c.a.forwardRef((function(e,t){var n=e.onClick,r=e.children,a=e.submit,i=e.style,o=e.autofocus,l=e.form,d=c.a.useState(!1),j=Object(s.a)(d,2),f=j[0],b=j[1];return c.a.useEffect((function(){return o&&t.current.focus({preventScroll:!0})}),[]),Object(je.jsxs)("button",Object(u.a)(Object(u.a)({className:"button"+(f?" button-clicked":""),onClick:n,onMouseDown:function(){return b(!0)},onMouseUp:function(){return b(!1)},onMouseLeave:function(){return b(!1)},type:a?"submit":"",style:i,ref:t},l?{form:l}:{}),{},{children:[Object(je.jsx)("div",{className:"bdummy",children:r}),Object(je.jsx)("div",{className:"btext"+(f?" btext-clicked":""),children:r})]}))}));function nt(e){var t=e.onSearch,n=e.suggestions,r=e.searchOnSelect,a=c.a.useState(""),i=Object(s.a)(a,2),o=i[0],u=i[1],l=c.a.useState(!1),d=Object(s.a)(l,2),j=d[0],f=d[1],b=c.a.useState(null),h=Object(s.a)(b,2),p=h[0],O=h[1],v=c.a.useState(!0),m=Object(s.a)(v,2),x=m[0],g=m[1],w=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.includes(o)}))}),[n,o]);return Object(je.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(o)},autoComplete:"off",children:[Object(je.jsxs)("div",{className:"search-bar",children:[Object(je.jsx)("input",{type:"text",name:"name",value:o,onChange:function(e){O(null),u(e.target.value),g(!0)},onFocus:function(){return f(!0)},onBlur:function(){return f(!1)},onKeyDown:function(e){switch(e.key){case"ArrowDown":O((function(e){return Math.min((null!==e&&void 0!==e?e:-1)+1,w.length-1)}));break;case"ArrowUp":O((function(e){return null===e||0===e?null:e-1}));break;case"Enter":if(null!==p){e.preventDefault();var n=w[p];u(n),O(null),g(!1),r&&t(n)}}},required:!0,placeholder:"Szukaj po nazwie"}),j&&w&&x&&Object(je.jsx)("div",{className:"suggestions",children:w.map((function(e,n){return Object(je.jsx)("div",{className:"suggestion"+(n===p?" focused-sugg":""),onMouseDown:function(){u(e),O(null),g(!1),r&&t(e)},children:e},n)}))})]}),Object(je.jsx)(tt,{submit:!0,children:"Szukaj"})]})}function rt(){return Object(je.jsx)("div",{id:"footer",children:"Studia 4 PAP-Z223"})}function ct(e){var t=e.children,n=e.close;return Object(je.jsx)("div",{className:"pop-up-container",onClick:function(e){return e.target===e.currentTarget&&n()},children:Object(je.jsxs)("div",{className:"pop-up",children:[Object(je.jsx)("div",{className:"button-div",children:Object(je.jsx)(tt,{onClick:n,children:"X"})}),t]})})}function at(){var e=c.a.useRef(null),t=c.a.useState(null),n=Object(s.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){return function(){var t;return null===(t=e.current)||void 0===t?void 0:t.call(e,"popup closed")}}),[]),[r,c.a.useCallback((function(t){return new Promise((function(n,r){e.current=r,a(Object(je.jsx)(ct,{close:function(){a(null),r("popup closed")},children:t((function(e){a(null),n(e)}))}))}))}),[])]}function it(e){var t=e.onSelect,n=c.a.useRef(),r=k(ee),a=Object(s.a)(r,1)[0],i=c.a.useState([]),u=Object(s.a)(i,2),l=u[0],d=u[1],j=c.a.useMemo((function(){return null===a||void 0===a?void 0:a.map((function(e){return e.name}))}),[a]);return void 0===a?Object(je.jsx)("div",{children:"Loading..."}):Object(je.jsxs)("div",{className:"group-selector",children:[Object(je.jsx)(nt,{searchOnSelect:!0,onSearch:function(e){var t,r=[];a.forEach((function(t){t.name.includes(e)&&(l.includes(t)||r.push(t))})),d((function(e){return[].concat(Object(o.a)(e),r)})),null===(t=n.current)||void 0===t||t.focus({preventScroll:!0})},suggestions:j}),l.map((function(e){return Object(je.jsxs)("div",{children:[e.name,Object(je.jsx)(tt,{onClick:function(){d((function(t){var n=Object(o.a)(t);return n.splice(t.indexOf(e),1),n}))},children:"X"})]},e.id)})),0===l.length||Object(je.jsx)(tt,{onClick:function(){return t(l)},ref:n,autofocus:!0,children:"Wybierz"})]})}function ot(e){if("popup closed"!==e)throw e}var st=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(je.jsx)(c.a.StrictMode,{children:Object(je.jsx)($e,{})}),document.getElementById("root")),st()}},[[35,1,2]]]);
//# sourceMappingURL=main.cf38ba69.chunk.js.map