(this.webpackJsonpstudia4=this.webpackJsonpstudia4||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(18),i=n.n(a),o=n(7),u=n(3),s=n(2),l=n(6),d=(n(23),n(4)),j=n.n(d),f=n(5),b=n(13),p=n(14),h=n(15),O=n(16),v="http://"+document.location.host,m=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,"An error on the server prevented fetching resources")).name="ServerError",r.response=e,r}return n}(Object(O.a)(Error)),x=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,"A problem with the page's request prevented fetching resources")).name="ClientError",r.response=e,r}return n}(Object(O.a)(Error)),g=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(b.a)(this,n),(r=t.call(this,e)).name="AuthenticationError",r}return n}(Object(O.a)(Error));function w(e){if(e.status<400)return null;if(401===e.status)throw new g("Not logged in");if(e.status<500)throw new x(e);throw new m(e)}function y(e,t){var n=c.a.useContext(He),r=c.a.useState(void 0),a=Object(u.a)(r,2),i=a[0],o=a[1],s=c.a.useCallback((function(){o(void 0),e().then(o,(function(e){return n({action:"error",data:e})}))}),[e,n]);return c.a.useEffect((function(){return(null===t||void 0===t||t)&&void 0===i&&s()}),[s,t,i]),[i,s,o]}function k(){return(k=Object(f.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("username",t),r.append("password",n),e.next=5,fetch(v+"/login",{method:"POST",body:r});case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return C.apply(this,arguments)}function C(){return(C=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(v+"/logged");case 4:if(401!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",!1);case 7:return w(t),e.next=10,t.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(v+"/courses");case 4:return w(t=e.sent),e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new URL(v+"/classes")).searchParams.append("flag","alts"),e.next=6,fetch(n);case 6:return w(r=e.sent),e.next=10,r.json();case 10:return c=e.sent,a={},c.forEach((function(e){var t=e.name,n=e.id,r=e.roomNumber,c=e.class_type,i=e.timeSlotID;return a[n]={name:t,id:n,room:r,type:c,slot:i}})),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{2:0,26:2,1:2});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return D.apply(this,arguments)}function D(){return(D=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e){return setTimeout((function(){return e(!0)}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",new Promise((function(e,t){return setTimeout((function(){return t(new m(null))}),2e3)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("pollID",t),e.next=6,fetch(v+"/delete-poll",{method:"POST",body:n});case 6:return w(e.sent),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t,n){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(j.a.mark((function e(t,n,r){var c,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(c=new FormData).append("name",t),c.append("slots",Array.from(n)),c.append("classIDs",r.map((function(e){return e.id}))),e.next=8,fetch(v+"/add-poll",{method:"POST",body:c});case 8:return w(a=e.sent),e.next=12,a.json();case 12:return i=e.sent,e.abrupt("return",{id:i.pollID,name:i.pollName});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(f.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return q.apply(this,arguments)}function q(){return(q=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",id:"0"},{name:"SOI",id:"2",slots:[1,2,5]},{name:"PAP",id:"3"},{name:"PROB",id:"4"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(f.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new URL(v+"/poll-result")).searchParams.append("pollID",t),e.next=6,fetch(n);case 6:return w(r=e.sent),e.next=10,r.json();case 10:return c=e.sent,a={},c.forEach((function(e){return a[e.slotId]=e.rating})),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(f.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(r=new FormData).append("pollId",t),r.append("slotIds",Object.keys(n)),r.append("ratings",Object.values(n)),e.next=8,fetch(v+"/vote-poll",{method:"POST",body:r});case 8:return w(e.sent),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"WSI",grade:3},{name:"SOI",grade:-10}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return K.apply(this,arguments)}function K(){return(K=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:"0",cls:{name:"WSI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Jeremi Sobierski",to:"3"},{id:"1",cls:{name:"SOI",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},stud:"Karol Orzechowski",to:"25"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return V.apply(this,arguments)}function V(){return(V=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,fetch(v+"/polls");case 4:return w(t=e.sent),e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n.map((function(e){return{name:e.pollName,id:e.pollID}})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(f.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(t=new URL(v+"/classes")).searchParams.append("flag","all"),e.next=6,fetch(t);case 6:return w(n=e.sent),e.next=10,n.json();case 10:return e.abrupt("return",e.sent.map((function(e){var t=e.name,n=e.id;return{name:t+" "+e.class_type,id:n}})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(f.a)(j.a.mark((function e(t){var n,r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return(n=new FormData).append("classIDs",t.map((function(e){return e.id}))),e.next=6,fetch(v+"/intersect",{method:"POST",body:n});case 6:return w(r=e.sent),c={},e.next=11,r.json();case 11:return e.sent.forEach((function(e){return c[e]=!0})),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:{name:"WSI",slot:"2",room:"98",id:"0",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},1:{name:"SI",slot:"2",room:"98",id:"1",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},2:{name:"Wsi",slot:"2",room:"11",id:"2",type:["Laboratorium","Cwiczenia","Wyklad"][Math.floor(3*Math.random())]},3:{name:"nji",slot:"10",room:"98",id:"3",type:"Laboratorium"}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{0:3,22:4});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{title:"Som news",text:"yyyyyyysapidfj aijsd 0iasj d0asdjo asj"},{title:"Hee",text:"0aijsdiwef0u82hgfy23h8irj1jkfi0owshdfsgbfhidb"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return se.apply(this,arguments)}function se(){return(se=Object(f.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{name:"Ewa S.",id:"0"},{name:"Peter Gawkuu",id:"1"}]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{text:"Jakie\u015b info o panu pracowniku"});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(25);var de=n(0);function je(){var e=y(X),t=Object(u.a)(e,1)[0],n=y(N),r=Object(u.a)(n,1)[0],a=y(R),i=Object(u.a)(a,1)[0],o=y(L),l=Object(u.a)(o,1)[0],d=nt(),j=Object(u.a)(d,2),f=j[0],b=j[1],p=c.a.useState(null),h=Object(u.a)(p,2),O=h[0],v=h[1],m=c.a.useMemo((function(){return function(e){if(void 0===e)return;var t=new Set;return e.forEach((function(e){return t.add(e.id)})),t}(r)}),[r]);if(void 0===t||void 0===m||void 0===l)return Object(de.jsx)("div",{children:"Loading subjects..."});var x={show:b,schedule:i,ratings:l},g=null!==O&&void 0!==O?O:t;return Object(de.jsxs)("div",{className:"content-box",children:["Rejestracja",Object(de.jsx)($e,{onSearch:function(e){return v(t.filter((function(t){return t.name.includes(e)})))}}),null!==O&&Object(de.jsx)(Ve,{onClick:function(){return v(null)},children:"Wyczy\u015b\u0107"}),g.map((function(e){return Object(de.jsx)(fe,Object(s.a)({sbj:e,alReg:m.has(e.id)},x))})),f]})}function fe(e){var t=e.sbj,n=e.ratings,r=e.alReg,a=e.show,i=e.schedule,o=c.a.useContext(He),u=c.a.useMemo((function(){if(void 0!==t.slots){var e={};return t.slots.forEach((function(t){return e[t]=!0})),e}}),[t]);return Object(de.jsxs)("div",{className:"box-row",children:[Object(de.jsx)("div",{children:t.name}),r?Object(de.jsx)("div",{className:"resched-side-text",children:"Zarejestrowano"}):Object(de.jsxs)("div",{children:[u&&Object(de.jsx)("div",{className:"indicator",style:{backgroundColor:he(be(t.slots,n))}}),Object(de.jsx)(Ve,{onClick:function(){(u?a((function(e){return Object(de.jsx)(ge,{title:"Wybierz termin",initSchedule:i,initSelections:u,mode:"select",onSelect:e})})).then((function(e){return function(e,t){return U.apply(this,arguments)}(t.id,e)}),ct):function(e){return B.apply(this,arguments)}(t.id)).catch((function(e){return o({action:"popupError",data:e})}))},children:"Zarejestruj"})]})]})}function be(e,t){var n=e.map((function(e){return t[e]})).filter((function(e){return void 0!==e})).sort().reverse();return pe(.8,1,n.length).map((function(e,t){return e*n[t]})).reduce((function(e,t){return e+t}))/6}function pe(e,t,n){return 0===n?[]:[t*e].concat(Object(o.a)(pe(e,t*(1-e),n-1)))}function he(e){return"rgb(".concat(Math.floor(Math.min(255,512*(1-e))),", ").concat(Math.floor(Math.min(255,512*e)),", 0)")}var Oe=["8:15","10:15","12:15","14:15","16:15","18:15"],ve=["poniedzialek","wtorek","sroda","czwartek","piatek"];function me(e){return ve[Math.floor((e-1)/6)]+" "+Oe[(e-1)%6]}function xe(e,t){var n,r=t.action,c=t.data;switch(r){case"drag":return Object(s.a)(Object(s.a)({},e),{},{dragged:c});case"endDrag":for(var a=c.x,i=c.y,o=c.id,d=null,j=0,f=Object.entries(e.dropSlots.current);j<f.length;j++){var b=Object(u.a)(f[j],2),p=b[0];if((0,b[1])(a,i)){(d=JSON.parse(JSON.stringify(e.schedule)))[o].resched=p,d[o].slot===p&&delete d[o].resched;break}}return Object(s.a)(Object(s.a)({},e),{},{dragged:null,schedule:null!==(n=d)&&void 0!==n?n:e.schedule});case"toggleSelect":return Object(s.a)(Object(s.a)({},e),{},{selections:Object(s.a)(Object(s.a)({},e.selections),{},Object(l.a)({},c,!e.selections[c]))});case"rerate":return Object(s.a)(Object(s.a)({},e),{},{ratings:Object(s.a)(Object(s.a)({},e.ratings),{},Object(l.a)({},c.slot,c.rating))});case"setSchedule":return Object(s.a)(Object(s.a)({},e),{},{schedule:c});case"setSelections":return Object(s.a)(Object(s.a)({},e),{},{selections:c});case"setRatings":return Object(s.a)(Object(s.a)({},e),{},{ratings:c});default:return e}}function ge(e){var t=e.initSchedule,n=e.initRatings,r=e.initSelections,a=e.onSelect,i=e.disabledSlots,o=e.mode,l=e.actions,d=e.permResched,j=e.setDataPusher,f=e.title,b=c.a.useRef({}),p=c.a.useCallback((function(e,t,n){return n?delete b.current[e]:b.current[e]=t}),[]),h=c.a.useRef(),O=c.a.useReducer(xe,{schedule:t,selections:r,ratings:n,dragged:null,dropSlots:b}),v=Object(u.a)(O,2),m=v[0],x=m.schedule,g=m.selections,w=m.ratings,y=m.dragged,k=v[1];c.a.useEffect((function(){return k({action:"setSchedule",data:t})}),[t]),c.a.useEffect((function(){return k({action:"setSelections",data:r})}),[r]),c.a.useEffect((function(){return k({action:"setRatings",data:n})}),[n]);var S=c.a.useMemo((function(){return function(e,t,n){if(void 0===e)return{};for(var r={},c=0,a=Object.entries(e);c<a.length;c++){var i,o,l,d,j,f=Object(u.a)(a[c],2),b=f[0],p=f[1];t?b!==n&&(null!==(i=r[null!==(o=p.resched)&&void 0!==o?o:p.slot])&&void 0!==i?i:r[null!==(l=p.resched)&&void 0!==l?l:p.slot]=[]).push(p):((null!==(d=r[p.slot])&&void 0!==d?d:r[p.slot]=[]).push(p),p.resched&&(null!==(j=r[p.resched])&&void 0!==j?j:r[p.resched]=[]).push(Object(s.a)(Object(s.a)({},p),{},{pend:!0})))}return r}(x,d,null===y||void 0===y?void 0:y.disId)}),[x,d,y]),C={mode:o,dispatch:k,registerDropSlot:p,onSelect:a,borderRef:h},N={reschedule:function(){return function(e,t){for(var n={},r=0,c=Object.entries(t);r<c.length;r++){var a,i,o,s=Object(u.a)(c[r],2),l=s[0],d=s[1];(null!==(a=d.resched)&&void 0!==a?a:d.slot)!==(null!==(i=e[l].resched)&&void 0!==i?i:e[l].slot)&&(n[l]=null!==(o=d.resched)&&void 0!==o?o:d.slot)}return n}(t,x)},select:function(){return function(e){for(var t=new Set,n=0,r=Object.entries(e);n<r.length;n++){var c=Object(u.a)(r[n],2),a=c[0];c[1]&&t.add(a)}return t}(g)},rate:function(){return w}}[o];return c.a.useEffect((function(){return null===j||void 0===j?void 0:j(N)})),Object(de.jsxs)("div",{id:"schedule",className:"content-box",children:[f,Object(de.jsx)("div",{id:"scheduleborder",ref:h,children:Object(de.jsxs)("ul",{id:"daylist",children:[Object(de.jsx)("li",{children:Object(de.jsx)(we,{})}),ve.map((function(e){return Object(de.jsx)("li",{children:Object(de.jsxs)("ul",{className:"daycolumn",children:[e,Oe.map((function(t){var n=function(e,t){return(1+Oe.indexOf(t)+6*ve.indexOf(e)).toString()}(e,t);return Object(de.jsx)(ye,Object(s.a)({slot:n,cls:S[n],selected:null===g||void 0===g?void 0:g[n],rating:null===w||void 0===w?void 0:w[n],droppable:d?"all":null===y||void 0===y?void 0:y.drops.includes(n),disabled:null===i||void 0===i?void 0:i.has(n)},C),n)}))]})},e)})),Object(de.jsx)("li",{children:Object(de.jsx)(we,{})})]})}),null===y||void 0===y?void 0:y.elem,null===l||void 0===l?void 0:l.map((function(e,t){var n;return Object(de.jsx)(Ve,Object(s.a)(Object(s.a)({},null!==(n=e.btProps)&&void 0!==n?n:{}),{},{onClick:function(){return e.cb(N())},children:e.name}),t)}))]})}function we(){return Object(de.jsxs)("ul",{className:"hourlegend",children:["\xa0",[8,10,12,14,16,18].map((function(e){return Object(de.jsx)("li",{children:e.toString()+":15"},e)}))]})}function ye(e){var t=e.cls,n=e.slot,r=e.mode,a=e.dispatch,i=e.registerDropSlot,o=e.selected,u=e.onSelect,l=e.rating,d=e.droppable,j=e.disabled,f=e.borderRef,b=c.a.useRef(),p={mode:r,dispatch:a,rating:l,borderRef:f};c.a.useEffect((function(){if(d)return i(n,(function(e,t){var n=b.current.getBoundingClientRect();return t>n.top&&t<n.bottom&&e>n.left&&e<n.right}),!1),function(){return i(n,null,!0)}}),[n,i,d]);var h=null;void 0!==l?h=Object(de.jsx)(Ne,Object(s.a)(Object(s.a)({},p),{},{slot:n,cls:t})):void 0!==t&&0!==t.length&&(h=1===t.length?Object(de.jsx)(ke,Object(s.a)(Object(s.a)({},p),{},{cls:t[0]})):Object(de.jsx)(Ce,Object(s.a)(Object(s.a)({},p),{},{cls:t})));var O={};"select"===r&&void 0!==o&&(O.onClick=function(){a({action:"toggleSelect",data:n}),null===u||void 0===u||u(n)});var v="class-box";return!0===d||o?v=v.concat(j?" selected-disabled":" highlight"):j&&(v=v.concat(" disabled-slot")),Object(de.jsx)("li",Object(s.a)(Object(s.a)({className:v},O),{},{ref:b,children:h}))}function ke(e){var t,n=null!==(t=e.width)&&void 0!==t?t:100,r=c.a.useState({prevW:100}),a=Object(u.a)(r,2),i=a[0],o=i.text,l=i.prevW,d=a[1];c.a.useLayoutEffect((function(){var t;if(t=n>=65?Object(de.jsxs)(de.Fragment,{children:[e.cls.name,Object(de.jsx)("br",{}),e.cls.type,Object(de.jsx)("br",{}),"Sala: ",e.cls.room]}):n>18?Object(de.jsx)(de.Fragment,{children:e.cls.name.split("").map((function(e){return Object(de.jsxs)(de.Fragment,{children:[e,Object(de.jsx)("br",{})]})}))}):Object(de.jsx)(de.Fragment,{children:"I"}),n>l){var r=setTimeout((function(){return d({text:t,prevW:n})}),100);return function(){return clearTimeout(r)}}d({text:t,prevW:n})}),[n,l,e.cls.name,e.cls.type,e.cls.room]);var j={};"reschedule"===e.mode&&(j.onMouseDown=function(t){var n;t.preventDefault();var r=t.currentTarget.getBoundingClientRect(),c={x:r.x+window.scrollX-t.pageX,y:r.y+window.scrollY-t.pageY};null===(n=e.dispatch)||void 0===n||n.call(e,{action:"drag",data:{elem:Object(de.jsx)(Se,{cls:e.cls,initPos:{x:t.pageX,y:t.pageY},offset:c,dispatch:e.dispatch,borderRef:e.borderRef}),drops:e.cls.alts,disId:e.cls.id}})});var f=e.cls.pend?{opacity:.5}:{};return Object(de.jsx)("div",Object(s.a)(Object(s.a)({className:e.cls.type},j),{},{style:f,children:o}))}function Se(e){var t,n,r=e.initPos,a=e.cls,i=e.offset,o=i.x,s=i.y,l=e.dispatch,d=e.borderRef,j=c.a.useRef(),f=function(e){var t=c.a.useState(e),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){function e(e){a({x:e.pageX,y:e.pageY})}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),r}(r),b=f.x,p=f.y,h=null!==(t=null===(n=j.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0},O=h.width,v=h.height,m=d.current.getBoundingClientRect(),x=m.top,g=m.left,w=m.bottom,y=m.right,k=Math.min(Math.max(b+o,g+window.scrollX),y+window.scrollX-O),S=Math.min(Math.max(p+s,x+window.scrollY),w+window.scrollY-v);return Object(de.jsx)("div",{className:"class-box dragged-class",style:{left:k,top:S},ref:j,onMouseUp:function(){var e=j.current.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.left,c=e.right;l({action:"endDrag",data:{y:(t+n)/2,x:(r+c)/2,id:a.id}})},children:Object(de.jsx)(ke,{cls:a})})}function Ce(e){var t=e.cls,n=e.mode,r=e.dispatch,a=e.borderRef,i=100/t.length,o=35/(t.length-1),l=c.a.useRef(),d=c.a.useState(null),j=Object(u.a)(d,2),f=j[0],b=j[1];return c.a.useEffect((function(){function e(e){var t=e.clientX,n=e.clientY,r=l.current.getBoundingClientRect(),c=r.top,a=r.bottom,i=r.left,o=r.right;(n<c||n>a||t<i||t>o)&&b(null)}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[]),Object(de.jsx)("div",{ref:l,style:{height:"100%"},onMouseLeave:function(){return b(null)},children:t.map((function(e,t){var c=null===f?i:t===f?65:o,u={cls:e,width:c,mode:n,dispatch:r,borderRef:a};return Object(de.jsx)("div",{className:"shrunk-box",onMouseEnter:function(){return b(t)},style:{maxWidth:"".concat(c,"%")},children:Object(de.jsx)(ke,Object(s.a)({},u))},t)}))})}function Ne(e){var t=e.dispatch,n=e.slot,r=e.rating,a=e.mode,i=e.cls,o=e.borderRef,l=c.a.useState(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],b=null;if(b="rate"!==a?Object(de.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(he(r/6)),width:"100%"},children:r}):Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{className:"rating",style:{textShadow:"0 0 0.3em ".concat(he(r/6))},children:r}),Object(de.jsxs)("div",{className:"rater-button-box",children:[Object(de.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.min(6,r+1)}})},children:"+"}),Object(de.jsx)("div",{className:"rater-button",onClick:function(){return t({action:"rerate",data:{slot:n,rating:Math.max(0,r-1)}})},children:"-"})]})]}),i){var p={mode:a,borderRef:o,dispatch:t},h=1===i.length?Object(de.jsx)(ke,Object(s.a)(Object(s.a)({},p),{},{cls:i[0]})):Object(de.jsx)(Ce,Object(s.a)(Object(s.a)({},p),{},{cls:i}));return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{className:"rater",style:{maxHeight:j?"0":"62%"},children:b}),Object(de.jsx)("div",{style:{height:"100%"},onClick:function(){return f((function(e){return!e}))},onMouseLeave:function(){return f(!1)},children:h})]})}return Object(de.jsx)("div",{className:"rater",children:b})}var Ee=function(){var e=c.a.useContext(He),t=c.a.useState("view"),n=Object(u.a)(t,2),r=n[0],a=n[1],i=c.a.useState(void 0),o=Object(u.a)(i,2),l=o[0],d=o[1],j=c.a.useState(!1),f=Object(u.a)(j,2),b=f[0],p=f[1],h=y(L,"rate"===r),O=Object(u.a)(h,3),v=O[0],m=O[1],x=O[2];if(c.a.useEffect((function(){"reschedule"===r?(void 0===l||!b)&&R(!0).then((function(e){d(e),p(!0)}),(function(t){return e({action:"error",data:t})})):void 0===l&&R().then(d,(function(t){return e({action:"error",data:t})}))}),[l,b,r,e]),!l||"rate"===r&&void 0===v||"reschedule"===r&&!b)return Object(de.jsx)("div",{children:"Loading content..."});var g=[],w={actions:g,mode:r,title:"Plan Zaj\u0119\u0107"};return"reschedule"===r?g.push({name:"Zaporoponuj zmiany",cb:function(t){a("view"),d(null),p(!1),z(t).then((function(){return R()})).then(d,(function(t){return e({action:"error",data:t})}))}}):"rate"===r&&(g.push({name:"Zapisz",cb:function(t){a("view"),x(void 0),function(e){return W.apply(this,arguments)}(t).then(m,(function(t){return e({action:"popupError",data:t})}))}}),w.initRatings=v),Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(ge,Object(s.a)({initSchedule:l},w)),Object(de.jsxs)("div",{children:[Object(de.jsx)(Ve,{onClick:function(){return a("view")},children:"Plan"}),Object(de.jsx)(Ve,{onClick:function(){return a("reschedule")},children:"Zmiana Grup"}),Object(de.jsx)(Ve,{onClick:function(){return a("rate")},children:"Dogodno\u015b\u0107 Godzin"})]})]})};n(27);function Re(){var e=c.a.useContext(He),t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1],i=c.a.useState(""),o=Object(u.a)(i,2),s=o[0],l=o[1],d=c.a.useState(!1),j=Object(u.a)(d,2),f=j[0],b=j[1];return Object(de.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(e,t){return k.apply(this,arguments)}(r,s).then(S).then((function(t){t?e({action:"login",data:t}):b(!0)}),(function(t){return e({action:"error",data:t})}))},children:[Object(de.jsx)("input",{type:"text",name:"name",value:r,onChange:function(e){a(e.target.value)},required:!0,placeholder:"Login"}),Object(de.jsx)("br",{}),Object(de.jsx)("input",{type:"password",name:"password",value:s,onChange:function(e){l(e.target.value)},required:!0,placeholder:"Has\u0142o"}),Object(de.jsx)("br",{}),Object(de.jsx)(Ve,{submit:!0,children:"Log in"}),f&&Object(de.jsx)("div",{className:"invalid-cred",children:"Invalid credentials"})]})}function Me(e){var t=e.user,n=c.a.useContext(He);return t?Object(de.jsx)("span",{style:{float:"right"},onClick:function(){return n({action:"logout"})},children:"Log out"}):Object(de.jsx)("span",{style:{float:"right"},onClick:function(){n({action:"setContent",data:Object(de.jsx)(Re,{})})},children:"Log in"})}n(28);function Le(e){var t=e.children,n=e.view,r=e.nNots,a=c.a.useContext(He);return Object(de.jsxs)("span",{onClick:function(){return a({action:"setContent",data:n})},children:[t,r&&Object(de.jsx)("div",{className:"notifIndicator",children:r})]})}function Pe(e){var t=e.toggle;return Object(de.jsx)("span",{onClick:t,children:"O"})}function ze(e){var t=e.links,n=e.windWidth,r=e.user,a=c.a.useState(!1),i=Object(u.a)(a,2),o=i[0],s=i[1],l=Object(de.jsx)("div",{children:"You must be logged in to view this content"});return n<900?Object(de.jsxs)("nav",{className:"small-nav",children:[Object(de.jsx)("div",{style:{display:o?"block":"none"},children:t.map((function(e,t){return Object(de.jsx)(Le,{view:r?e.view:l,stack:!0,nNots:e.nNots,children:e.name},t)}))}),Object(de.jsx)(Pe,{toggle:function(){s((function(e){return!e}))}}),Object(de.jsx)(Me,{user:r})]}):Object(de.jsxs)("nav",{children:[Object(de.jsx)(Me,{user:r}),t.map((function(e,t){return Object(de.jsx)(Le,{view:r?e.view:l,stack:!1,nNots:e.nNots,children:e.name},t)}))]})}n(29);function De(e){return"blablabla info o ".concat(e)}function We(e){var t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(De(e.name))}),[e.name]),Object(de.jsxs)("div",{children:[Object(de.jsx)("h2",{children:e.name}),r]})}function Ie(e){var t=c.a.useState(""),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){a(De(e.name))}),[e.name]),Object(de.jsx)("div",{children:r})}function Fe(e){var t=c.a.useState(!1),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{className:"course",onClick:function(){a((function(e){return!e}))},children:e.name}),Object(de.jsxs)("div",{className:"course-menu",style:{maxHeight:r?"3em":"0"},children:[Object(de.jsx)(Le,{view:Object(de.jsx)(We,{name:e.name}),children:"Strona przedmiotu"}),Object(de.jsx)(Le,{view:Object(de.jsx)(Ie,{name:e.maitainerName}),children:"Strona prowadz\u0105cego"})]})]})}var Te=function(){var e=y(N),t=Object(u.a)(e,1)[0];return void 0===t?Object(de.jsx)("div",{children:"Loading content..."}):Object(de.jsxs)("div",{id:"courses",className:"content-box",children:["Moje Przedmioty",t.map((function(e){return Object(de.jsx)(Fe,{name:e.name},e.id)}))]})};n(30),n(31);function Ae(){var e=y(G),t=Object(u.a)(e,1)[0];return void 0===t?Object(de.jsx)("div",{children:"Loading grades..."}):Object(de.jsxs)("div",{className:"content-box",children:["Moje oceny",t.map((function(e){return Object(de.jsxs)("div",{className:"box-row",children:[Object(de.jsxs)("div",{children:[e.name,":"]}),Object(de.jsx)("div",{className:"grade",children:e.grade})]})}))]})}n(32);function Ze(){var e=y(_),t=Object(u.a)(e,3),n=t[0],r=(t[1],t[2]),a=c.a.useCallback((function(e){r((function(t){return t.filter((function(t){return t.id!==e}))}))}),[r]);return void 0===n?Object(de.jsx)("div",{children:"Loading requests..."}):Object(de.jsxs)("div",{className:"content-box",children:["Pro\u015bby o zmiany grup",n.map((function(e){return Object(de.jsx)(Be,Object(s.a)(Object(s.a)({},e),{},{del:a}),e.id)}))]})}function Be(e){var t=e.id,n=e.stud,r=e.cls,a=e.to,i=e.del,o=c.a.useState(!1),s=Object(u.a)(o,2),l=s[0],d=s[1],j=c.a.useContext(He);return Object(de.jsxs)("div",{className:"box-row",children:[Object(de.jsxs)("div",{className:"request-text",children:[r.name," ",r.type,",",Object(de.jsx)("br",{}),n,",",Object(de.jsx)("br",{}),"na ",me(a)]}),Object(de.jsx)("div",{className:"request-buttons",children:l?"przetwarzanie...":Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Ve,{onClick:function(){d(!0),function(e){return I.apply(this,arguments)}(t).then((function(){return i(t)}),(function(e){d(!1),j({action:"popupError",data:e})}))},children:"Zaakceptuj"}),Object(de.jsx)(Ve,{onClick:function(){d(!0),function(e){return F.apply(this,arguments)}(t).then((function(){return i(t)}),(function(e){d(!1),j({action:"popupError",data:e})}))},children:"Odrzu\u0107"})]})})]})}function Ue(e){var t=e.user,n=c.a.useContext(He),r="ROLE_STUDENT"===t.position,a=y(Q),i=Object(u.a)(a,3),d=i[0],b=(i[1],i[2]),p=nt(),h=Object(u.a)(p,2),O=h[0],v=h[1],m=c.a.useCallback((function(e){(function(e){return Y.apply(this,arguments)})(e).then((function(e){var t=Object.entries(e).reduce((function(e,t){return e[1]>t[1]?e:t}))[0];return v((function(){return Object(de.jsx)(ge,{title:"Wynik ankiety",initRatings:e,initSelections:Object(l.a)({},t,!0),mode:"view"})}))})).catch(ct).catch((function(e){return n({action:"popupError",data:e})}))}),[v,n]),x=c.a.useCallback((function(e){(function(e){return ae.apply(this,arguments)})(e).then((function(e){return v((function(t){return Object(de.jsx)(ge,{initRatings:e,mode:"rate",actions:[{name:"G\u0142osuj",cb:t}]})}))})).then((function(t){return function(e,t){return J.apply(this,arguments)}(e,t)}),ct).catch((function(e){return n({action:"popupError",data:e})}))}),[v,n]),g=c.a.useCallback((function(){v((function(e){return Object(de.jsx)(rt,{onSelect:e})})).then(function(){var e=Object(f.a)(j.a.mark((function e(t){var n,r,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(t);case 2:return n=e.sent,e.next=5,v((function(e){return Object(de.jsx)(qe,{onSelect:e,initSlots:n})})).catch(ct);case 5:return r=e.sent,c=r.name,a=r.slots,e.next=10,A(c,a,t);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){return b((function(t){return[].concat(Object(o.a)(t),[e])}))}),(function(e){return n({action:"popupError",data:e})}))}),[v,b,n]),w=c.a.useCallback((function(e){(function(e){return T.apply(this,arguments)})(e).then((function(){return b((function(t){return t.filter((function(t){return t.id!==e}))}))}),(function(e){return n({action:"popupError",data:e})}))}),[b,n]);return void 0===d?Object(de.jsx)("div",{children:"Loading polls..."}):Object(de.jsxs)(de.Fragment,{children:[Object(de.jsxs)("div",{className:"content-box",children:["Ankiety",d.map((function(e){return Object(de.jsx)(Xe,Object(s.a)(Object(s.a)({},e),{},{resolve:m,remove:w,vote:r?x:null}),e.id)}))]}),r||Object(de.jsx)("div",{children:Object(de.jsx)(Ve,{onClick:g,children:"Dodaj"})}),O]})}function Xe(e){var t=e.id,n=e.name,r=e.voted,c=e.resolve,a=e.remove,i=e.vote;return Object(de.jsxs)("div",{className:"box-row",children:[Object(de.jsx)("div",{children:n}),Object(de.jsx)("div",{children:i?Object(de.jsxs)(de.Fragment,{children:[r&&"Zag\u0142osowano",Object(de.jsx)(Ve,{onClick:function(){return i(t)},children:"G\u0142osuj"})]}):Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)(Ve,{onClick:function(){return c(t)},children:"Wynik"}),Object(de.jsx)(Ve,{onClick:function(){return a(t)},children:"Zako\u0144cz"})]})})]})}function qe(e){var t=e.onSelect,n=e.initSlots,r=c.a.useRef(),a=c.a.useMemo((function(){var e=function(e){var t={};return Array.from(Array(30).keys()).forEach((function(e){t[e+1]=!1})),Object(s.a)(Object(s.a)({},t),e)}(n),t=new Set;return Object.keys(e).forEach((function(e){return e in n||t.add(e)})),[e,t]}),[n]),i=Object(u.a)(a,2),o=i[0],l=i[1],d=c.a.useRef(null),j=c.a.useState(""),f=Object(u.a)(j,2),b=f[0],p=f[1];return Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{style:{marginBottom:"0.5em"},children:Object(de.jsx)("form",{id:"slot-selector-form",className:"search-bar",onSubmit:function(e){e.preventDefault(),t({name:b,slots:d.current()})},children:Object(de.jsx)("div",{children:Object(de.jsx)("input",{type:"text",value:b,onChange:function(e){return p(e.target.value)},required:!0,placeholder:"Wpisz nazw\u0119"})})})}),Object(de.jsx)("div",{onClick:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.focus({preventScroll:!0})},children:Object(de.jsx)(ge,{initSelections:o,disabledSlots:l,mode:"select",setDataPusher:function(e){return function(){return d.current=e}}})}),Object(de.jsx)("div",{children:Object(de.jsx)(Ve,{ref:r,form:"slot-selector-form",submit:!0,children:"Utw\xf3rz"})})]})}n(33);function Ye(){var e=y(ie),t=Object(u.a)(e,1)[0];return void 0===t?Object(de.jsx)("div",{children:"Loading news..."}):Object(de.jsxs)("div",{className:"content-box",id:"news-box",children:["Aktualno\u015bci",t.map((function(e){return Object(de.jsx)("div",{className:"box-row",children:Object(de.jsxs)("div",{style:{display:"block"},children:[Object(de.jsx)("h3",{children:e.title}),Object(de.jsx)("div",{className:"info-box",children:e.text})]})})}))]})}function Je(){var e,t=c.a.useContext(He),n=y(ue),r=Object(u.a)(n,1)[0],a=c.a.useMemo((function(){return null===r||void 0===r?void 0:r.map((function(e){return e.name}))}),[r]),i=c.a.useState(null),o=Object(u.a)(i,2),s=o[0],l=o[1],d=c.a.useState(null),j=Object(u.a)(d,2),f=j[0],b=j[1];return void 0===r?Object(de.jsx)("div",{children:"Loading workers..."}):Object(de.jsxs)("div",{className:"content-box",children:["Pracownicy",Object(de.jsx)($e,{onSearch:function(e){b(null),l(r.filter((function(t){return t.name.includes(e)})))},suggestions:a}),null!==(e=null===f||void 0===f?void 0:f.text)&&void 0!==e?e:null===s||void 0===s?void 0:s.map((function(e){return Object(de.jsxs)("div",{className:"content-row",children:[e.name,Object(de.jsx)(Ve,{onClick:function(){(function(e){return le.apply(this,arguments)})(e.id).then(b,(function(e){return t({action:"error",data:e})}))},children:"Wybierz"})]},e.id)}))]})}function Ge(){var e=c.a.useState(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=c.a.useState(null),i=Object(u.a)(a,2),o=i[0],s=i[1];return c.a.useEffect((function(){return null===o||re(o).then(r)}),[o]),Object(de.jsxs)(de.Fragment,{children:[Object(de.jsx)("div",{className:"content-box",children:Object(de.jsx)(rt,{onSelect:s})}),Object(de.jsx)("br",{}),n&&Object(de.jsx)(ge,{initSchedule:n,permResched:!0,mode:"reschedule",actions:[{name:"Zmie\u0144",cb:function(e){r(null),z(e).then((function(){return re(o).then(r)}))}}]})]})}var He=c.a.createContext();function _e(e,t){var n=t.action,r=t.data;switch(n){case"resize":return Object(s.a)(Object(s.a)({},e),{},{width:window.innerWidth});case"login":return Object(s.a)(Object(s.a)({},e),{},{user:r,content:Object(de.jsx)(Ye,{})});case"logout":return Object(s.a)(Object(s.a)({},e),{},{user:null,content:Object(de.jsx)(Re,{})});case"setContent":return Object(s.a)(Object(s.a)({},e),{},{content:r});case"error":return Object(s.a)(Object(s.a)({},e),{},{content:Object(de.jsx)("div",{children:r.message})});case"popupError":return Object(s.a)(Object(s.a)({},e),{},{popup:Object(de.jsx)("div",{children:r.message})});case"closePopup":return Object(s.a)(Object(s.a)({},e),{},{popup:null});case"setUser":return Object(s.a)(Object(s.a)({},e),{},{user:r});default:return e}}function Ke(){var e=c.a.useReducer(_e,{content:null,user:void 0,width:window.innerWidth,popup:null}),t=Object(u.a)(e,2),n=t[0],r=n.content,a=n.user,i=n.width,o=n.popup,s=t[1];c.a.useEffect((function(){var e=function(){return s({action:"resize"})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),c.a.useEffect((function(){void 0===a&&(s({action:"setUser",data:null}),S().then((function(e){return s(!1===e?{action:"setContent",data:Object(de.jsx)(Re,{})}:{action:"login",data:e})})).catch((function(e){return s({action:"error",data:e})})))}),[a]);var l=[{name:"Plan zaj\u0119\u0107",view:Object(de.jsx)(Ee,{})},{name:"Ankiety",view:Object(de.jsx)(Ue,{user:a}),nNots:a?10:void 0},{name:"Aktualno\u015bci",view:Object(de.jsx)(Ye,{})},{name:"Pracownicy",view:Object(de.jsx)(Je,{})}];return a&&(a.position,l.push.apply(l,[{name:"Oceny",view:Object(de.jsx)(Ae,{})},{name:"Przedmioty",view:Object(de.jsx)(Te,{})},{name:"Rejestracja",view:Object(de.jsx)(je,{})}]),l.push({name:"Zmiany grup",view:Object(de.jsx)(Ze,{}),nNots:a?3:void 0}),a.security,l.push({name:"Plan",view:Object(de.jsx)(Ge,{})})),Object(de.jsxs)(He.Provider,{value:s,children:[Object(de.jsx)(ze,{links:l,windWidth:i,user:a}),Object(de.jsx)(Qe,{children:void 0===a?Object(de.jsx)("div",{children:"Loading..."}):r}),o&&Object(de.jsx)(tt,{close:function(){return s({action:"closePopup"})},children:o}),Object(de.jsx)(et,{})]})}function Qe(e){var t=e.children;return Object(de.jsx)("div",{id:"content",children:Object(de.jsx)("div",{children:t})})}var Ve=c.a.forwardRef((function(e,t){var n=e.onClick,r=e.children,a=e.submit,i=e.style,o=e.autofocus,l=e.form,d=c.a.useState(!1),j=Object(u.a)(d,2),f=j[0],b=j[1];return c.a.useEffect((function(){return o&&t.current.focus({preventScroll:!0})}),[]),Object(de.jsxs)("button",Object(s.a)(Object(s.a)({className:"button"+(f?" button-clicked":""),onClick:n,onMouseDown:function(){return b(!0)},onMouseUp:function(){return b(!1)},onMouseLeave:function(){return b(!1)},type:a?"submit":"",style:i,ref:t},l?{form:l}:{}),{},{children:[Object(de.jsx)("div",{className:"bdummy",children:r}),Object(de.jsx)("div",{className:"btext"+(f?" btext-clicked":""),children:r})]}))}));function $e(e){var t=e.onSearch,n=e.suggestions,r=e.searchOnSelect,a=c.a.useState(""),i=Object(u.a)(a,2),o=i[0],s=i[1],l=c.a.useState(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],b=c.a.useState(null),p=Object(u.a)(b,2),h=p[0],O=p[1],v=c.a.useState(!0),m=Object(u.a)(v,2),x=m[0],g=m[1],w=c.a.useMemo((function(){return null===n||void 0===n?void 0:n.filter((function(e){return e.includes(o)}))}),[n,o]);return Object(de.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(o)},autoComplete:"off",children:[Object(de.jsxs)("div",{className:"search-bar",children:[Object(de.jsx)("input",{type:"text",name:"name",value:o,onChange:function(e){O(null),s(e.target.value),g(!0)},onFocus:function(){return f(!0)},onBlur:function(){return f(!1)},onKeyDown:function(e){switch(e.key){case"ArrowDown":O((function(e){return Math.min((null!==e&&void 0!==e?e:-1)+1,w.length-1)}));break;case"ArrowUp":O((function(e){return null===e||0===e?null:e-1}));break;case"Enter":if(null!==h){e.preventDefault();var n=w[h];s(n),O(null),g(!1),r&&t(n)}}},required:!0,placeholder:"Szukaj po nazwie"}),j&&w&&x&&Object(de.jsx)("div",{className:"suggestions",children:w.map((function(e,n){return Object(de.jsx)("div",{className:"suggestion"+(n===h?" focused-sugg":""),onMouseDown:function(){s(e),O(null),g(!1),r&&t(e)},children:e},n)}))})]}),Object(de.jsx)(Ve,{submit:!0,children:"Szukaj"})]})}function et(){return Object(de.jsx)("div",{id:"footer",children:"Studia 4 PAP-Z223"})}function tt(e){var t=e.children,n=e.close;return Object(de.jsx)("div",{className:"pop-up-container",onClick:function(e){return e.target===e.currentTarget&&n()},children:Object(de.jsxs)("div",{className:"pop-up",children:[Object(de.jsx)("div",{className:"button-div",children:Object(de.jsx)(Ve,{onClick:n,children:"X"})}),t]})})}function nt(){var e=c.a.useRef(null),t=c.a.useState(null),n=Object(u.a)(t,2),r=n[0],a=n[1];return c.a.useEffect((function(){return function(){var t;return null===(t=e.current)||void 0===t?void 0:t.call(e,"popup closed")}}),[]),[r,c.a.useCallback((function(t){return new Promise((function(n,r){e.current=r,a(Object(de.jsx)(tt,{close:function(){a(null),r("popup closed")},children:t((function(e){a(null),n(e)}))}))}))}),[])]}function rt(e){var t=e.onSelect,n=c.a.useRef(),r=y($),a=Object(u.a)(r,1)[0],i=c.a.useState([]),s=Object(u.a)(i,2),l=s[0],d=s[1],j=c.a.useMemo((function(){return null===a||void 0===a?void 0:a.map((function(e){return e.name}))}),[a]);return void 0===a?Object(de.jsx)("div",{children:"Loading..."}):Object(de.jsxs)("div",{className:"group-selector",children:[Object(de.jsx)($e,{searchOnSelect:!0,onSearch:function(e){var t,r=[];a.forEach((function(t){t.name.includes(e)&&(l.includes(t)||r.push(t))})),d((function(e){return[].concat(Object(o.a)(e),r)})),null===(t=n.current)||void 0===t||t.focus({preventScroll:!0})},suggestions:j}),l.map((function(e){return Object(de.jsxs)("div",{children:[e.name,Object(de.jsx)(Ve,{onClick:function(){d((function(t){var n=Object(o.a)(t);return n.splice(t.indexOf(e),1),n}))},children:"X"})]},e.id)})),0===l.length||Object(de.jsx)(Ve,{onClick:function(){return t(l)},ref:n,autofocus:!0,children:"Wybierz"})]})}function ct(e){if("popup closed"!==e)throw e}var at=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(de.jsx)(c.a.StrictMode,{children:Object(de.jsx)(Ke,{})}),document.getElementById("root")),at()}},[[34,1,2]]]);
//# sourceMappingURL=main.344e1fd6.chunk.js.map